!function e(t,r,n){function i(a,u){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){var n=e("./webgl/WebGLRenderer"),i=e("./flash/display/Stage"),o=e("./_util/_util"),a=e("./flash/events/FlashEvent"),u=function(){function e(){this._isRunning=!1,this._renderer=null,this._stage=null,this._isInitialized=!1,this._attachedUpdateFunction=null}return e.prototype.initialize=function(e,t,r){void 0===r&&(r=n.WebGLRenderer.DEFAULT_OPTIONS),this._isInitialized||(this._renderer=new n.WebGLRenderer(e,t,r),this._stage=new i.Stage(this._renderer),this._isInitialized=!0)},e.prototype.dispose=function(){this._isInitialized&&(this._stage.dispose(),this._renderer.dispose(),this._stage=null,this._renderer=null,this._isInitialized=!1)},e.prototype.startAnimation=function(){this._isInitialized&&(this._isRunning=!0,o._util.requestAnimationFrame(this.__mainLoop.bind(this)))},e.prototype.stopAnimation=function(){this._isInitialized&&(this._isRunning=!1)},e.prototype.clear=function(){this._renderer.clear()},e.prototype.runOneFrame=function(){this._isInitialized&&(this._stage.dispatchEvent(a.FlashEvent.create(a.FlashEvent.ENTER_FRAME)),null!==this._attachedUpdateFunction&&this._attachedUpdateFunction instanceof Function&&this._attachedUpdateFunction(),this._stage.update(),this._stage.render(this._renderer))},Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._isInitialized?this._renderer.view:null},enumerable:!0,configurable:!0}),e.prototype.attachUpdateFunction=function(e){this._attachedUpdateFunction=e},e.prototype.__mainLoop=function(e){this._isRunning&&this._isInitialized&&(this.runOneFrame(),o._util.requestAnimationFrame(this.__mainLoop.bind(this)))},e}();r.GLantern=u},{"./_util/_util":5,"./flash/display/Stage":44,"./flash/events/FlashEvent":52,"./webgl/WebGLRenderer":100}],2:[function(e,t,r){var n=function(){function e(e){void 0===e&&(e=""),this._message=null,this._message=e}return Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"ApplicationError"},enumerable:!0,configurable:!0}),e}();r.ApplicationError=n},{}],3:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./ApplicationError"),o=function(e){function t(t,r){void 0===t&&(t="Argument error"),void 0===r&&(r=null),e.call(this,t),this._argument=null,this._argument=r}return n(t,e),Object.defineProperty(t.prototype,"argument",{get:function(){return this._argument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"ArgumentError"},enumerable:!0,configurable:!0}),t}(i.ApplicationError);r.ArgumentError=o},{"./ApplicationError":2}],4:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./ApplicationError"),o=function(e){function t(t){void 0===t&&(t="Not implemented"),e.call(this,t)}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedError"},enumerable:!0,configurable:!0}),t}(i.ApplicationError);r.NotImplementedError=o},{"./ApplicationError":2}],5:[function(e,t,r){(function(e){var t=e||window,n=function(){function e(){}return e.isUndefinedOrNull=function(e){return void 0===e||null===e},e.isUndefined=function(e){return void 0===e},e.isFunction=function(e){return"function"==typeof e},e.isClassDefinition=function(e){var t;if("function"==typeof e)t=!0;else{var r=navigator.appVersion.indexOf("Trident/7.0")>=0&&navigator.appVersion.indexOf("rv:11.0")>=0;t=r&&"object"==typeof e}var n=e&&e.prototype?e.prototype.constructor===e:!1;return t&&n},e.limitInto=function(e,t,r){return t>e&&(e=t),e>r&&(e=r),e},e.isValueBetweenNotEquals=function(e,t,r){return e>t&&r>e},e.formatString=function(t){function r(e){var t=e.substring(1,e.length-1),r=parseInt(t);return!o&&r>=0&&a>r?void 0===n[r]?"undefined":null===n[r]?"null":n[r].toString():e}for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=e.isUndefinedOrNull(n),a=o?-1:n.length,u=/{[\d]+}/g;return t.replace(u,r)},e.deepClone=function(r){if(void 0===r||null===r||r===!0||r===!1)return r;if("string"==typeof r||"number"==typeof r)return r;if(Array.isArray(r)){for(var n=[],i=0;i<r.length;++i)n.push(e.deepClone(r[i]));return n}if(void 0!==t.Map&&r instanceof Map){var o=new Map;return r.forEach(function(e,t){o.set(t,e)}),o}if(void 0!==t.Set&&r instanceof Set){var a=new Set;return r.forEach(function(e){a.add(e)}),a}if(r instanceof Function||"function"==typeof r){var u=r,l=function(){return function(){return u.apply(this,arguments)}}();l.prototype=u.prototype;for(var s in u)u.hasOwnProperty(s)&&(l[s]=u[s]);return l}if(r instanceof Object||"object"==typeof r){var c=Object.create(null);if("function"==typeof r.hasOwnProperty)for(var s in r)r.hasOwnProperty(s)&&(c[s]=e.deepClone(r[s]));else for(var s in r)c[s]=e.deepClone(r[s]);return c}},e.isPowerOfTwo=function(e){var t=0|e;return t!=e||isNaN(t)||!isFinite(t)?!1:t>0&&0===(t&t-1)},e.power2Roundup=function(e){return 0>e?0:(--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1)},e.trace=function(e,t){void 0!==t?console.info(e,t):console.info(e),console.trace()},e.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},e.cancelAnimationFrame=function(e){window.cancelAnimationFrame(e)},e.colorToCssSharp=function(t){return t|=0,"#"+e.padLeft(t.toString(16),6,"0")},e.colorToCssRgba=function(e){e|=0;var t=e>>24&255,r=e>>16&255,n=e>>8&255,i=255&e;return"rgba("+[r,n,i,t].join(",")+")"},e.padLeft=function(e,t,r){for(;e.length<t;)e=r+e;return e.length>t&&(e=e.substring(e.length-t,e.length-1)),e},e}();r._util=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./_util")),n(e("./ApplicationError")),n(e("./ArgumentError")),n(e("./NotImplementedError"))},{"./ApplicationError":2,"./ArgumentError":3,"./NotImplementedError":4,"./_util":5}],7:[function(e,t,r){var n=e("./transitions/index");r.transitions=n},{"./transitions/index":24}],8:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/events/EventDispatcher"),o=e("../../_util/NotImplementedError"),a=function(e){function t(t,r,n,i,o,a,u){void 0===u&&(u=!1),e.call(this),this.begin=NaN,this.duration=5,this.finish=5,this.FPS=60,this.func=null,this.isPlaying=!1,this.looping=!1,this.obj=null,this.position=0,this.prop=null,this.time=0,this.useSeconds=!1,this.obj=t,this.prop=r,this.func=n,this.begin=i,this.finish=o,this.duration=a,this.useSeconds=u}return n(t,e),t.prototype.continueTo=function(e,t){throw new o.NotImplementedError},t.prototype.fforward=function(){throw new o.NotImplementedError},t.prototype.nextFrame=function(){throw new o.NotImplementedError},t.prototype.prevFrame=function(){throw new o.NotImplementedError},t.prototype.resume=function(){throw new o.NotImplementedError},t.prototype.rewind=function(e){throw void 0===e&&(e=0),new o.NotImplementedError},t.prototype.start=function(){throw new o.NotImplementedError},t.prototype.stop=function(){throw new o.NotImplementedError},t.prototype.yoyo=function(){throw new o.NotImplementedError},t}(i.EventDispatcher);r.Tween=a},{"../../_util/NotImplementedError":4,"../../flash/events/EventDispatcher":51}],9:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/events/FlashEvent"),o=e("../../_util/NotImplementedError"),a=function(e){function t(t,r,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),e.call(this,t,i,o),this._position=NaN,this._time=NaN,this._position=n,this._time=r}return n(t,e),t.prototype.clone=function(){throw new o.NotImplementedError},Object.defineProperty(t,"MOTION_CHANGE",{get:function(){return"motionChange"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_FINISH",{get:function(){return"motionFinish"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_LOOP",{get:function(){return"motionLoop"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_RESUME",{get:function(){return"motionResume"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_START",{get:function(){return"motionStart"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_STOP",{get:function(){return"motionStop"},enumerable:!0,configurable:!0}),t}(i.FlashEvent);r.TweenEvent=a},{"../../_util/NotImplementedError":4,"../../flash/events/FlashEvent":52}],10:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n,i){return void 0===i&&(i=0),r*(e/=n)*e*((i+1)*e-i)+t},e.easeInOut=function(e,t,r,n,i){return void 0===i&&(i=0),(e/=n/2)<1?r/2*(e*e*(((i*=1.525)+1)*e-i))+t:r/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},e.easeOut=function(e,t,r,n,i){return void 0===i&&(i=0),r*((e=e/n-1)*e*((i+1)*e+i)+1)+t},e}();r.Back=n},{}],11:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(t,r,n,i){return n-e.easeOut(i-t,0,n,i)+r},e.easeInOut=function(t,r,n,i){return i/2>t?.5*e.easeIn(2*t,0,n,i)+r:.5*e.easeOut(2*t-i,0,n,i)+.5*n+r},e.easeOut=function(e,t,r,n){return(e/=n)<1/2.75?r*(7.5625*e*e)+t:2/2.75>e?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t},e}();r.Bounce=n},{}],12:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return-r*(Math.sqrt(1-(e/=n)*e)-1)+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t},e.easeOut=function(e,t,r,n){return r*Math.sqrt(1-(e=e/n-1)*e)+t},e}();r.Circular=n},{}],13:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t},e.easeOut=function(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t},e}();r.Cubic=n},{}],14:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var a;return 0==e?t:1==(e/=n)?t+r:(!i||i<Math.abs(r)?(a=o/4,i=r):a=o/(2*Math.PI)*Math.asin(r/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o))+t)},e.easeInOut=function(e,t,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var a;return 0==e?t:2==(e/=n/2)?t+r:(!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),1>e?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o))+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o)*.5+r+t)},e.easeOut=function(e,t,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var a;return 0==e?t:1==(e/=n)?t+r:(!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*e)*Math.sin((e*n-a)*(2*Math.PI)/o)+r+t)},e}();r.Elastic=n},{}],15:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return 0==e?t:r*Math.pow(2,10*(e/n-1))+t},e.easeInOut=function(e,t,r,n){return 0==e?t:e==n?t+r:(e/=n/2)<1?r/2*Math.pow(2,10*(e-1))+t:r/2*(-Math.pow(2,-10*--e)+2)+t},e.easeOut=function(e,t,r,n){return e==n?t+r:r*(-Math.pow(2,-10*e/n)+1)+t},e}();r.Exponential=n},{}],16:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*e/n+t},e.easeInOut=function(e,t,r,n){return r*e/n+t},e.easeNone=function(e,t,r,n){return n>e?t:t+r},e.easeOut=function(e,t,r,n){return r*e/n+t},e}();r.None=n},{}],17:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t},e.easeOut=function(e,t,r,n){return-r*(e/=n)*(e-2)+t},e}();r.Quadratic=n},{}],18:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e*e*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t},e.easeOut=function(e,t,r,n){return-r*((e=e/n-1)*e*e*e-1)+t},e}();r.Quartic=n},{}],19:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e*e*e*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t},e.easeOut=function(e,t,r,n){return r*((e=e/n-1)*e*e*e*e+1)+t},e}();r.Quintic=n},{}],20:[function(e,t,r){var n=e("../../../_util/NotImplementedError"),i=function(){function e(){}return e.easeIn=function(e,t,r,i){throw new n.NotImplementedError},e.easeInOut=function(e,t,r,i){throw new n.NotImplementedError},e.easeOut=function(e,t,r,i){throw new n.NotImplementedError},e}();r.Regular=i},{"../../../_util/NotImplementedError":4}],21:[function(e,t,r){var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+t},e.easeInOut=function(e,t,r,n){return-r/2*(Math.cos(Math.PI*e/n)-1)+t},e.easeOut=function(e,t,r,n){return r*Math.sin(e/n*(Math.PI/2))+t},e}();r.Sine=n},{}],22:[function(e,t,r){var n=e("../../../_util/NotImplementedError"),i=function(){function e(){}return e.easeIn=function(e,t,r,i){throw new n.NotImplementedError},e.easeInOut=function(e,t,r,i){throw new n.NotImplementedError},e.easeOut=function(e,t,r,i){throw new n.NotImplementedError},e}();r.Strong=i},{"../../../_util/NotImplementedError":4}],23:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./Back")),n(e("./Bounce")),n(e("./Circular")),n(e("./Cubic")),n(e("./Elastic")),n(e("./Exponential")),n(e("./None")),n(e("./Quadratic")),n(e("./Quartic")),n(e("./Quintic")),n(e("./Regular")),n(e("./Sine")),n(e("./Strong"))},{"./Back":10,"./Bounce":11,"./Circular":12,"./Cubic":13,"./Elastic":14,"./Exponential":15,"./None":16,"./Quadratic":17,"./Quartic":18,"./Quintic":19,"./Regular":20,"./Sine":21,"./Strong":22}],24:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}var i=e("./easing/index");r.easing=i,n(e("./Tween")),n(e("./TweenEvent"))},{"./Tween":8,"./TweenEvent":9,"./easing/index":23}],25:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./DisplayObject"),o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(i.DisplayObject);r.Bitmap=o},{"./DisplayObject":31}],26:[function(e,t,r){var n=function(){function e(){}return e}();r.BitmapData=n},{}],27:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"ADD",{get:function(){return"add"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ALPHA",{get:function(){return"alpha"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DARKEN",{get:function(){return"darken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DIFFERENCE",{get:function(){return"difference"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ERASE",{get:function(){return"erase"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HARDLIGHT",{get:function(){return"hardlight"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INVERT",{get:function(){return"invert"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LAYER",{get:function(){return"layer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LIGHTEN",{get:function(){return"lighten"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MULTIPLY",{get:function(){return"multiply"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OVERLAY",{get:function(){return"overlay"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SCREEN",{get:function(){return"screen"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SHADER",{get:function(){return"shader"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SUBTRACT",{get:function(){return"subtract"},enumerable:!0,configurable:!0}),e}();r.BlendMode=n},{}],28:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROUND",{get:function(){return"round"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SQUARE",{get:function(){return"square"},enumerable:!0,configurable:!0}),e}();r.CapsStyle=n},{}],29:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"DEFAULT",{get:function(){return"default"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OFF",{get:function(){return"off"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ON",{get:function(){return"on"},enumerable:!0,configurable:!0}),e}();r.ColorCorrection=n},{}],30:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"DEFAULT_OFF",{get:function(){return"defaultOff"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DEFAULT_ON",{get:function(){return"defaultOn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UNSUPPORTED",{get:function(){return"unsupported"},enumerable:!0,configurable:!0}),e}();r.ColorCorrectionSupport=n},{}],31:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../geom/Transform"),o=e("../../_util/NotImplementedError"),a=e("../events/EventDispatcher"),u=e("../../_util/_util"),l=e("./BlendMode"),s=e("../geom/Matrix3D"),c=e("../geom/Vector3D"),h=function(e){function t(t,r){e.call(this),this.blendMode=l.BlendMode.NORMAL,this.enabled=!0,this.mask=null,this.visible=!0,this._parent=null,this._root=null,this._name="",this._rotation=0,this._rotationX=0,this._rotationY=0,this._rotationZ=0,this._scaleX=1,this._scaleY=1,this._scaleZ=1,this._stage=null,this._height=0,this._width=0,this._x=0,this._y=0,this._z=0,this._childIndex=-1,this._alpha=1,this._filters=null,this._filterTarget=null,this._transform=null,this._isTransformDirty=!0,this._isRoot=!1,this._root=t,this._stage=t,this._parent=r,this._filters=[],this._transform=new i.Transform,this._isRoot=null===t}return n(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha=u._util.limitInto(e,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheAsBitmap",{get:function(){throw new o.NotImplementedError},set:function(e){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childIndex",{get:function(){return this._childIndex},set:function(e){this._childIndex=e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.filters=[]},Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters.slice()},set:function(e){var t,r=this.__shouldProcessFilters();if(r)for(t=0;t<this._filters.length;++t)this._filters[t].notifyRemoved();this._filters=e;var n=this.__shouldProcessFilters();if(n)for(t=0;t<this._filters.length;++t)this._filters[t].notifyAdded();n!==r&&(n?this.__createFilterTarget(this._root.worldRenderer):this.__releaseFilterTarget())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseX",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseY",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){for(;-180>e;)e+=360;for(;e>180;)e-=360;this._rotation=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(e){for(;-180>e;)e+=360;for(;e>180;)e-=360;this._rotationX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(e){for(;-180>e;)e+=360;for(;e>180;)e-=360;this._rotationY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(e){for(;-180>e;)e+=360;for(;e>180;)e-=360;this._rotationZ=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){var t=this._x!==e;this._x=e,t&&this.requestUpdateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){var t=this._y!==e;this._y=e,t&&this.requestUpdateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(e){var t=this._z!==e;this._z=e,t&&this.requestUpdateTransform()},enumerable:!0,configurable:!0}),t.prototype.getBounds=function(e){throw new o.NotImplementedError},t.prototype.getRect=function(e){throw new o.NotImplementedError},t.prototype.update=function(){this._isTransformDirty&&this.__updateTransform(),this.enabled&&this.__update()},t.prototype.render=function(e){this.visible&&this.alpha>0&&(this.__preprocess(e),this.__render(e),this.__postprocess(e))},t.prototype.requestUpdateTransform=function(){this._isTransformDirty=!0},t.prototype.__updateTransform=function(){var e;e=this._isRoot?new s.Matrix3D:this.parent.transform.matrix3D.clone(),e.prependTranslation(this.x,this.y,this.z),e.prependRotation(this.rotationX,c.Vector3D.X_AXIS),e.prependRotation(this.rotationY,c.Vector3D.Y_AXIS),e.prependRotation(this.rotationZ,c.Vector3D.Z_AXIS),this.transform.matrix3D.copyFrom(e)},t.prototype.__preprocess=function(e){var t=this;this.__shouldProcessFilters()?(this._filterTarget.clear(),e.setRenderTarget(this._filterTarget)):e.setRenderTarget(null);var r=e.shaderManager;this.__selectShader(r);var n=r.currentShader;u._util.isUndefinedOrNull(n)||(n.changeValue("uTransformMatrix",function(e){e.value=t.transform.matrix3D.toArray()}),n.changeValue("uAlpha",function(e){e.value=t.alpha})),e.setBlendMode(this.blendMode)},t.prototype.__postprocess=function(e){if(this.__shouldProcessFilters()){var t=e.filterManager;t.pushFilterGroup(this.filters),t.processFilters(e,this._filterTarget,e.screenTarget,!1),t.popFilterGroup()}},t.prototype.__createFilterTarget=function(e){null===this._filterTarget&&(this._filterTarget=e.createRenderTarget())},t.prototype.__releaseFilterTarget=function(){null!==this._filterTarget&&(this._root.worldRenderer.releaseRenderTarget(this._filterTarget),this._filterTarget=null)},t.prototype.__shouldProcessFilters=function(){return null!==this.filters&&this.filters.length>0},t}(a.EventDispatcher);r.DisplayObject=h},{"../../_util/NotImplementedError":4,"../../_util/_util":5,"../events/EventDispatcher":51,"../geom/Matrix3D":61,"../geom/Transform":66,"../geom/Vector3D":67,"./BlendMode":27}],32:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./InteractiveObject"),o=e("../../_util/NotImplementedError"),a=function(e){function t(t,r){e.call(this,t,r),this.mouseChildren=!0,this.tabChildren=!0,this._children=null,this._children=[]}return n(t,e),Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),t.prototype.addChild=function(e){return this._children.indexOf(e)<0&&this._children.push(e),e.childIndex=this._children.length-1,e},t.prototype.addChildAt=function(e,t){return this._children.indexOf(e)<0&&(0===t?this._children.unshift(e):t===this._children.length-1?this._children.push(e):this._children=this._children.slice(0,t-1).concat(e).concat(this._children.slice(t,this._children.length-1))),e.childIndex=t,e},t.prototype.areInaccessibleObjectsUnderPoint=function(e){throw new o.NotImplementedError},t.prototype.contains=function(e){for(var r=!1,n=0;n<this._children.length;++n){if(this._children[n]===e)return!0;if(this._children[n]instanceof t&&(r=this._children[n].contains(e)))return!0}return!1},t.prototype.getChildAt=function(e){return 0>e||e>this._children.length-1?null:this._children[e]},t.prototype.getChildByName=function(e){if(0===this._children.length)return null;for(var r=null,n=0;n<this._children.length;++n){if(this._children[n].name===e)return this._children[n];if(this._children[n]instanceof t&&(r=this._children[n].getChildByName(e),null!==r))return r}return null},t.prototype.getChildIndex=function(e){return this._children.indexOf(e)},t.prototype.getObjectsUnderPoint=function(e){throw new o.NotImplementedError},t.prototype.removeChild=function(e){var t=this._children.indexOf(e);return t>=0?this.removeChildAt(t):null},t.prototype.removeChildAt=function(e){if(0>e||e>=this.numChildren)return null;for(var t=this._children[e],r=e+1;r<this._children.length;r++)this._children[r].childIndex++;return this._children.splice(e,1),t},t.prototype.setChildIndex=function(e,t){throw new o.NotImplementedError},t.prototype.swapChildren=function(e,t){throw new o.NotImplementedError},t.prototype.swapChildrenAt=function(e,t){throw new o.NotImplementedError},Object.defineProperty(t.prototype,"width",{get:function(){throw new o.NotImplementedError},set:function(e){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){throw new o.NotImplementedError},set:function(e){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),t.prototype.dispatchEvent=function(t,r){for(var n=e.prototype.dispatchEvent.call(this,t,r),i=0;i<this._children.length;i++)this._children[i].dispatchEvent(t,r);return n},t.prototype.update=function(){if(e.prototype.update.call(this),this.enabled)for(var t=0;t<this._children.length;++t)this._children[t].update()},t.prototype.render=function(e){if(this.visible&&this.alpha>0){this.__preprocess(e),this.__render(e);for(var t=0;t<this._children.length;++t){var r=this._children[t];r.render(e)}this.__postprocess(e)}},t.prototype.requestUpdateTransform=function(){if(this._isTransformDirty=!0,null!==this._children&&this._children.length>0)for(var e=0;e<this._children.length;++e)this._children[e].requestUpdateTransform()},t.prototype.__selectShader=function(e){},t}(i.InteractiveObject);r.DisplayObjectContainer=a},{"../../_util/NotImplementedError":4,"./InteractiveObject":37}],33:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"LINEAR",{get:function(){return"linear"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RADIAL",{get:function(){return"radial"},enumerable:!0,configurable:!0}),e}();r.GradientType=n},{}],34:[function(e,t,r){function n(e,t){if(null===e||null===t||t.length%2!==0)return!1;for(var r=e.length,n=t.length,i=0;r>i;i++)switch(e[i]){case l.GraphicsPathCommand.CUBIC_CURVE_TO:if(n-=6,0>n)return!1;break;case l.GraphicsPathCommand.CURVE_TO:if(n-=4,0>n)return!1;break;case l.GraphicsPathCommand.LINE_TO:if(n-=2,0>n)return!1;break;case l.GraphicsPathCommand.MOVE_TO:if(n-=2,0>n)return!1;break;case l.GraphicsPathCommand.NO_OP:break;case l.GraphicsPathCommand.WIDE_LINE_TO:if(n-=4,0>n)return!1;break;case l.GraphicsPathCommand.WIDE_MOVE_TO:if(n-=4,0>n)return!1;break;default:return!1}return!0}var i=e("../../_util/NotImplementedError"),o=e("./SpreadMethod"),a=e("./InterpolationMethod"),u=e("./GraphicsPathWinding"),l=e("./GraphicsPathCommand"),s=e("../../_util/_util"),c=e("./TriangleCulling"),h=e("./LineScaleMode"),p=e("../../webgl/graphics/BrushType"),f=e("../../webgl/graphics/SolidStrokeRenderer"),d=e("../../webgl/graphics/SolidFillRenderer"),_=function(){function e(e,t){this._displayObject=null,this._isFilling=!1,this._renderer=null,this._bufferTarget=null,this._isDirty=!0,this._shouldUpdateRenderTarget=!1,this._lineType=p.BrushType.SOLID,this._lineWidth=1,this._lineAlpha=1,this._lineColor=0,this._currentX=0,this._currentY=0,this._lastPathStartX=0,this._lastPathStartY=0,this._currentStrokeRenderer=null,this._currentFillRenderer=null,this._strokeRenderers=null,this._fillRenderers=null,this._displayObject=e,this._renderer=t,this._isDirty=!0,this._strokeRenderers=[],this._fillRenderers=[],this._bufferTarget=t.createRenderTarget(),this.__updateCurrentPoint(0,0),this.__resetStyles(),this.clear()}return e.prototype.beginBitmapFill=function(e,t,r,n){throw void 0===t&&(t=null),void 0===r&&(r=!1),void 0===n&&(n=!1),new i.NotImplementedError},e.prototype.beginFill=function(e,t){void 0===t&&(t=1),this._isFilling&&this.endFill(),this._isFilling||(this._isFilling=!0,this._currentStrokeRenderer=this.__createStrokeRendererWithCurrentSettings(),this._strokeRenderers.push(this._currentStrokeRenderer),this._currentFillRenderer=new d.SolidFillRenderer(this,this._currentX,this._currentY,e,t),this._currentFillRenderer.beginIndex=this._strokeRenderers.length-1)},e.prototype.beginGradientFill=function(e,t,r,n,u,l,s,c){throw void 0===u&&(u=null),void 0===l&&(l=o.SpreadMethod.PAD),void 0===s&&(s=a.InterpolationMethod.RGB),void 0===c&&(c=0),new i.NotImplementedError},e.prototype.beginShaderFill=function(e,t){throw void 0===t&&(t=null),new i.NotImplementedError},e.prototype.clear=function(){var e;if(null!==this._strokeRenderers)for(e=0;e<this._strokeRenderers.length;++e)this._strokeRenderers[e].dispose(),this._isDirty=!0;if(null!==this._fillRenderers)for(e=0;e<this._fillRenderers.length;++e)this._fillRenderers[e].dispose(),this._isDirty=!0;for(null!==this._currentFillRenderer&&(this._currentFillRenderer.dispose(),this._isDirty=!0);this._strokeRenderers.length>0;)this._strokeRenderers.pop(),this._isDirty=!0;for(;this._fillRenderers.length>0;)this._fillRenderers.pop(),this._isDirty=!0;this._currentFillRenderer=null,this._currentStrokeRenderer=this.__createStrokeRendererWithCurrentSettings(),this._strokeRenderers.push(this._currentStrokeRenderer),this._isFilling=!1},e.prototype.copyFrom=function(e){throw new i.NotImplementedError},e.prototype.curveTo=function(e,t,r,n){this._isFilling&&this._currentFillRenderer.curveTo(e,t,r,n),this._currentStrokeRenderer.curveTo(e,t,r,n),this.__updateCurrentPoint(r,n),this._isDirty=!0},e.prototype.drawCircle=function(e,t,r){this._isFilling&&this._currentFillRenderer.drawCircle(e,t,r),this._currentStrokeRenderer.drawCircle(e,t,r),
this.__updateCurrentPoint(e,t),this.__updateLastPathStartPoint(e+r,t),this._isDirty=!0},e.prototype.drawEllipse=function(e,t,r,n){this._isFilling&&this._currentFillRenderer.drawEllipse(e,t,r,n),this._currentStrokeRenderer.drawEllipse(e,t,r,n),this.__updateCurrentPoint(e+r,t+n/2),this.__updateLastPathStartPoint(e+r,t+n/2),this._isDirty=!0},e.prototype.drawGraphicsData=function(e){throw new i.NotImplementedError},e.prototype.drawPath=function(e,t,r,i){if(void 0===r&&(r=u.GraphicsPathWinding.EVEN_ODD),void 0===i&&(i=!0),!i||n(e,t)){for(var o,a,s=e.length,c=0,h=this._isFilling,p=this._currentStrokeRenderer,f=this._currentFillRenderer,d=0;s>d;++d)switch(e[d]){case l.GraphicsPathCommand.CUBIC_CURVE_TO:h&&f.bezierCurveTo(t[c],t[c+1],t[c+2],t[c+3],t[c+4],t[c+5]),p.bezierCurveTo(t[c],t[c+1],t[c+2],t[c+3],t[c+4],t[c+5]),o=t[c+4],a=t[c+5],c+=6;break;case l.GraphicsPathCommand.CURVE_TO:h&&f.curveTo(t[c],t[c+1],t[c+2],t[c+3]),p.curveTo(t[c],t[c+1],t[c+2],t[c+3]),o=t[c+2],a=t[c+3],c+=4;break;case l.GraphicsPathCommand.LINE_TO:h&&f.lineTo(t[c],t[c+1]),p.lineTo(t[c],t[c+1]),o=t[c],a=t[c+1],c+=2;break;case l.GraphicsPathCommand.MOVE_TO:h&&f.moveTo(t[c],t[c+1]),p.moveTo(t[c],t[c+1]),o=t[c],a=t[c+1],c+=2;break;case l.GraphicsPathCommand.NO_OP:break;case l.GraphicsPathCommand.WIDE_LINE_TO:h&&f.lineTo(t[c+2],t[c+3]),p.lineTo(t[c+2],t[c+3]),o=t[c+2],a=t[c+3],c+=4;break;case l.GraphicsPathCommand.WIDE_MOVE_TO:h&&f.moveTo(t[c+2],t[c+3]),p.moveTo(t[c+2],t[c+3]),o=t[c+2],a=t[c+3],c+=4}s>0&&this.__updateCurrentPoint(o,a),this._isDirty=!0}},e.prototype.drawRect=function(e,t,r,n){this._isFilling&&this._currentFillRenderer.drawRect(e,t,r,n),this._currentStrokeRenderer.drawRect(e,t,r,n),this.__updateCurrentPoint(e,t),this.__updateLastPathStartPoint(e,t),this._isDirty=!0},e.prototype.drawRoundRect=function(e,t,r,n,o,a){throw void 0===a&&(a=NaN),isNaN(a)&&(a=o),new i.NotImplementedError},e.prototype.drawTriangles=function(e,t,r,n){if(void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=c.TriangleCulling.NONE),null===t){t=[];for(var i=0;i<e.length;i+=2)t.push(i/2)}else t=t.slice(0);if(t.length%3!==0)return void s._util.trace("Graphics.drawTriangles malformed indices count. Must be multiple of 3.","err");if(n!==c.TriangleCulling.NONE)for(var i=0;i<t.length/3;i++){var o=e[2*t[3*i+1]]-e[2*t[3*i]],a=e[2*t[3*i+1]+1]-e[2*t[3*i]+1],u=e[2*t[3*i+2]]-e[2*t[3*i+1]],l=e[2*t[3*i+2]+1]-e[2*t[3*i+1]+1],h=o*l-u*a;(0>h&&n===c.TriangleCulling.POSITIVE||h>0&&n===c.TriangleCulling.NEGATIVE)&&(t.splice(3*i,3),i--)}for(var p=[],f=[],i=0;i<t.length/3;i++){var d=t[3*i],_=t[3*i+1],m=t[3*i+2],g=e[2*d],y=e[2*d+1],b=e[2*_],v=e[2*_+1],T=e[2*m],P=e[2*m+1];p.push(1,2,2,2),f.push(g,y,b,v,T,P,g,y)}this.drawPath(p,f,void 0,!1)},e.prototype.endFill=function(){this._isFilling&&(this._isFilling=!1,this._currentFillRenderer.endIndex=this._strokeRenderers.length-1,this._currentFillRenderer.closePath(),this._currentStrokeRenderer.closePath(),this._fillRenderers.push(this._currentFillRenderer),this._currentFillRenderer.hasDrawnAnything&&(this._isDirty=!0),this._currentFillRenderer=null)},e.prototype.lineBitmapStyle=function(e,t,r,n){throw void 0===t&&(t=null),void 0===r&&(r=!0),void 0===n&&(n=!1),new i.NotImplementedError},e.prototype.lineGradientStyle=function(e,t,r,n,u,l,s,c){throw void 0===u&&(u=null),void 0===l&&(l=o.SpreadMethod.PAD),void 0===s&&(s=a.InterpolationMethod.RGB),void 0===c&&(c=0),new i.NotImplementedError},e.prototype.lineShaderStyle=function(e,t){throw void 0===t&&(t=null),new i.NotImplementedError},e.prototype.lineStyle=function(e,t,r,n,i,o,a,u){void 0===e&&(e=NaN),void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=!1),void 0===i&&(i=h.LineScaleMode.NORMAL),void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=3),(this._lineType!==p.BrushType.SOLID||this._lineWidth!==e||this._lineColor!==t||this._lineAlpha!==r)&&(this._lineType=p.BrushType.SOLID,isNaN(e)||(this._lineWidth=e),this._lineColor=t,this._lineAlpha=r,this._currentStrokeRenderer=new f.SolidStrokeRenderer(this,this._lastPathStartX,this._lastPathStartY,this._currentX,this._currentY,e,t,r),this._strokeRenderers.push(this._currentStrokeRenderer))},e.prototype.lineTo=function(e,t){this._isFilling&&this._currentFillRenderer.lineTo(e,t),this._currentStrokeRenderer.lineTo(e,t),this.__updateCurrentPoint(e,t),this._isDirty=!0},e.prototype.moveTo=function(e,t){this._isFilling&&this._currentFillRenderer.moveTo(e,t),this._currentStrokeRenderer.moveTo(e,t),this.__updateCurrentPoint(e,t),this.__updateLastPathStartPoint(e,t),this._isDirty=!0},e.prototype.update=function(){if(this._isDirty){for(var e=0,t=this._fillRenderers.length,r=0;r<this._strokeRenderers.length;++r)t>e&&r===this._fillRenderers[e].beginIndex&&(this._fillRenderers[e].update(),e++),this._strokeRenderers[r].update();this._shouldUpdateRenderTarget=!0}this._isDirty=!1},e.prototype.render=function(e,t,r){var n=0,i=this._fillRenderers.length;this._bufferTarget.clear();for(var o=0;o<this._strokeRenderers.length;++o)i>n&&o===this._fillRenderers[n].beginIndex&&(this._fillRenderers[n].render(e),n++),this._strokeRenderers[o].render(e);this._shouldUpdateRenderTarget=!1},e.prototype.dispose=function(){this.clear(),this._strokeRenderers.pop(),this._currentStrokeRenderer.dispose(),this._currentStrokeRenderer=null,this._bufferTarget.dispose(),this._bufferTarget=null},Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFilling",{get:function(){return this._isFilling},enumerable:!0,configurable:!0}),e.prototype.__createStrokeRendererWithCurrentSettings=function(){switch(this._lineType){case p.BrushType.SOLID:return new f.SolidStrokeRenderer(this,this._lastPathStartX,this._lastPathStartY,this._currentX,this._currentY,this._lineWidth,this._lineColor,this._lineAlpha);default:throw new i.NotImplementedError}},e.prototype.__updateCurrentPoint=function(e,t){this._currentX=e,this._currentY=t},e.prototype.__updateLastPathStartPoint=function(e,t){this._lastPathStartX=e,this._lastPathStartY=t},e.prototype.__resetStyles=function(){this._lineType=p.BrushType.SOLID,this._lineWidth=1,this._lineColor=0,this._lineAlpha=1},e}();r.Graphics=_},{"../../_util/NotImplementedError":4,"../../_util/_util":5,"../../webgl/graphics/BrushType":109,"../../webgl/graphics/SolidFillRenderer":113,"../../webgl/graphics/SolidStrokeRenderer":114,"./GraphicsPathCommand":35,"./GraphicsPathWinding":36,"./InterpolationMethod":38,"./LineScaleMode":40,"./SpreadMethod":43,"./TriangleCulling":49}],35:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"CUBIC_CURVE_TO",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CURVE_TO",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LINE_TO",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MOVE_TO",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NO_OP",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WIDE_LINE_TO",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WIDE_MOVE_TO",{get:function(){return 4},enumerable:!0,configurable:!0}),e}();r.GraphicsPathCommand=n},{}],36:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"EVEN_ODD",{get:function(){return"evenOdd"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NON_ZERO",{get:function(){return"nonZero"},enumerable:!0,configurable:!0}),e}();r.GraphicsPathWinding=n},{}],37:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./DisplayObject"),o=function(e){function t(t,r){e.call(this,t,r),this.doubleClickEnabled=!0,this.focusRect=!0,this.mouseEnabled=!0,this.needsSoftKeyboard=!1,this.tabEnabled=!0,this.tabIndex=-1}return n(t,e),t}(i.DisplayObject);r.InteractiveObject=o},{"./DisplayObject":31}],38:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"LINEAR_RGB",{get:function(){return"linearRGB"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RGB",{get:function(){return"rgb"},enumerable:!0,configurable:!0}),e}();r.InterpolationMethod=n},{}],39:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"BEVEL",{get:function(){return"bevel"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MITER",{get:function(){return"miter"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROUND",{get:function(){return"round"},enumerable:!0,configurable:!0}),e}();r.JointStyle=n},{}],40:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"HORIZONTAL",{get:function(){return"horizontal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"VERTICAL",{get:function(){return"vertical"},enumerable:!0,configurable:!0}),e}();r.LineScaleMode=n},{}],41:[function(e,t,r){var n=function(){function e(){}return e}();r.Shader=n},{}],42:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./DisplayObject"),o=e("./Graphics"),a=e("../../webgl/ShaderID"),u=function(e){function t(t,r){e.call(this,t,r),this._graphics=null,this._graphics=new o.Graphics(this,t.worldRenderer)}return n(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._graphics.dispose(),this._graphics=null},Object.defineProperty(t.prototype,"graphics",{get:function(){return this._graphics},enumerable:!0,configurable:!0}),t.prototype.__update=function(){this._graphics.update()},t.prototype.__render=function(e){this.graphics.render(e,e.currentRenderTarget,!1)},t.prototype.__selectShader=function(e){e.selectShader(a.ShaderID.PRIMITIVE2)},t}(i.DisplayObject);r.Shape=u},{"../../webgl/ShaderID":95,"./DisplayObject":31,"./Graphics":34}],43:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"PAD",{get:function(){return"pad"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REFLECT",{get:function(){return"reflect"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REPEAT",{get:function(){return"repeat"},enumerable:!0,configurable:!0}),e}();r.SpreadMethod=n},{}],44:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./ColorCorrectionSupport"),o=e("../../_util/NotImplementedError"),a=e("./StageScaleMode"),u=e("./StageQuality"),l=e("./StageDisplayState"),s=e("./ColorCorrection"),c=e("./StageAlign"),h=e("./DisplayObjectContainer"),p=function(e){function t(t){e.call(this,null,null),this.align=c.StageAlign.TOP_LEFT,this.color=0,this.colorCorrection=s.ColorCorrection.DEFAULT,this.displayState=l.StageDisplayState.NORMAL,this.focus=null,this.frameRate=60,this.fullScreenSourceRect=null,this.mouseChildren=!0,this.quality=u.StageQuality.HIGH,this.scaleMode=a.StageScaleMode.NO_SCALE,this.showDefaultContextMenu=!0,this.tabChildren=!0,this._allowFullScreen=!0,this._allowFullScreenInteractive=!0,this._colorCorrectionSupport=i.ColorCorrectionSupport.DEFAULT_OFF,this._worldRenderer=null,this._root=this,this._worldRenderer=t,this.resize(t.view.width,t.view.height)}return n(t,e),Object.defineProperty(t.prototype,"allowFullScreen",{get:function(){return this._allowFullScreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowFullScreenInteractive",{get:function(){return this._allowFullScreenInteractive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorCorrectionSupport",{get:function(){return this._colorCorrectionSupport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreenHeight",{get:function(){return screen.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreenWidth",{get:function(){return screen.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"softKeyboardRect",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this.worldRenderer.view.height},set:function(e){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this.worldRenderer.view.width},set:function(e){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.invalidate=function(){throw new o.NotImplementedError},t.prototype.isFocusInaccessible=function(){throw new o.NotImplementedError},Object.defineProperty(t.prototype,"worldRenderer",{get:function(){return this._worldRenderer},enumerable:!0,configurable:!0}),t.prototype.resize=function(e,t){this._width=e,this._height=t},t.prototype.__render=function(e){e.currentRenderTarget.clear()},t.prototype.__update=function(){},t}(h.DisplayObjectContainer);r.Stage=p},{"../../_util/NotImplementedError":4,"./ColorCorrection":29,"./ColorCorrectionSupport":30,"./DisplayObjectContainer":32,"./StageAlign":45,"./StageDisplayState":46,"./StageQuality":47,"./StageScaleMode":48}],45:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"BOTTOM",{get:function(){return"B"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BOTTOM_LEFT",{get:function(){return"BL"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BOTTOM_RIGHT",{get:function(){return"BR"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LEFT",{get:function(){return"L"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RIGHT",{get:function(){return"R"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOP",{get:function(){return"T"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOP_LEFT",{get:function(){return"TL"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOP_RIGHT",{get:function(){return"TR"},enumerable:!0,configurable:!0}),e}();r.StageAlign=n},{}],46:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"FULL_SCREEN",{get:function(){return"fullScreen"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FULL_SCREEN_INTERACTIVE",{get:function(){return"fullScreenInteractive"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),e}();r.StageDisplayState=n},{}],47:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"BEST",{get:function(){return"best"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HIGH",{get:function(){return"high"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LOW",{get:function(){return"low"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MEDIUM",{get:function(){return"medium"},enumerable:!0,configurable:!0}),e}();r.StageQuality=n},{}],48:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"EXACT_FIT",{get:function(){return"exactFit"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NO_BORDER",{get:function(){return"noBorder"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NO_SCALE",{get:function(){return"noScale"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SHOW_ALL",{get:function(){return"showAll"},enumerable:!0,configurable:!0}),e}();r.StageScaleMode=n},{}],49:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"NEGATIVE",{get:function(){return"negative"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"POSITIVE",{get:function(){return"positive"},enumerable:!0,configurable:!0}),e}();r.TriangleCulling=n},{}],50:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./Bitmap")),n(e("./BitmapData")),n(e("./BlendMode")),n(e("./CapsStyle")),n(e("./ColorCorrection")),n(e("./ColorCorrectionSupport")),n(e("./DisplayObject")),n(e("./DisplayObjectContainer")),n(e("./GradientType")),n(e("./Graphics")),n(e("./GraphicsPathCommand")),n(e("./GraphicsPathWinding")),n(e("./InteractiveObject")),n(e("./InterpolationMethod")),n(e("./JointStyle")),n(e("./LineScaleMode")),n(e("./Shader")),n(e("./Shape")),n(e("./SpreadMethod")),n(e("./Stage")),n(e("./StageAlign")),n(e("./StageDisplayState")),n(e("./StageQuality")),n(e("./StageScaleMode")),n(e("./TriangleCulling"))},{"./Bitmap":25,"./BitmapData":26,"./BlendMode":27,"./CapsStyle":28,"./ColorCorrection":29,"./ColorCorrectionSupport":30,"./DisplayObject":31,"./DisplayObjectContainer":32,"./GradientType":33,"./Graphics":34,"./GraphicsPathCommand":35,"./GraphicsPathWinding":36,"./InteractiveObject":37,"./InterpolationMethod":38,"./JointStyle":39,"./LineScaleMode":40,"./Shader":41,"./Shape":42,"./SpreadMethod":43,"./Stage":44,"./StageAlign":45,"./StageDisplayState":46,"./StageQuality":47,"./StageScaleMode":48,"./TriangleCulling":49}],51:[function(e,t,r){var n=e("../../_util/_util"),i=function(){function e(){this._listeners=null,this._listeners=new Map}return e.prototype.addEventListener=function(e,t,r){void 0===r&&(r=!1),this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).push(t)},e.prototype.dispatchEvent=function(e,t){if(this._listeners.has(e.type)&&null!==this._listeners.get(e.type)){for(var r=this._listeners.get(e.type),i=0;i<r.length;++i)try{r[i].call(null,t)}catch(o){o.hasOwnProperty("stack")?n._util.trace(o.stack.toString(),"dispatchEvent: error"):n._util.trace(o.toString(),"dispatchEvent: error")}return!0}return!1},e.prototype.removeEventListener=function(e,t,r){if(void 0===r&&(r=!1),this._listeners.has(e)&&0!==this._listeners.get(e).length){var n=this._listeners.get(e).indexOf(t);n>=0&&this._listeners.get(e).splice(n,1)}},e.prototype.hasEventListener=function(e){return this._listeners.has(e)},e.prototype.willTrigger=function(e){return this.hasEventListener(e)&&this._listeners.get(e).length>0},e.prototype.dispose=function(){this._listeners.forEach(function(e){for(;e.length>0;)e.pop()}),this._listeners.clear()},e}();r.EventDispatcher=i},{"../../_util/_util":5}],52:[function(e,t,r){var n=function(){function e(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=null,this.defaultPrevented=!1,this.eventPhase=-1,this.isTrusted=!0,this.returnValue=!1,this.srcElement=null,this.target=null,this.timeStamp=0,this.type=null,this.AT_TARGET=2,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=1,this.type=e,this.bubbles=t,this.cancelable=r}return e.prototype.initEvent=function(e,t,r){},e.prototype.preventDefault=function(){},e.prototype.stopImmediatePropagation=function(){},e.prototype.stopPropagation=function(){},e.create=function(t){var r=new e(t,!1,!1);return r.timeStamp=Date.now(),r},Object.defineProperty(e,"ENTER_FRAME",{get:function(){return"enterFrame"},enumerable:!0,configurable:!0}),e}();r.FlashEvent=n},{}],53:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../_util/NotImplementedError"),o=e("./FlashEvent"),a=function(e){function t(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),e.call(this,t,r,n)}return n(t,e),Object.defineProperty(t,"TIMER",{get:function(){return"timer"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TIMER_COMPLETE",{get:function(){return"timerComplete"},enumerable:!0,configurable:!0}),t.prototype.updateAfterEvent=function(){throw new i.NotImplementedError},t.prototype.clone=function(){throw new i.NotImplementedError},t}(o.FlashEvent);r.TimerEvent=a},{"../../_util/NotImplementedError":4,"./FlashEvent":52}],54:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./EventDispatcher"));var i=e("./FlashEvent");r.Event=i.FlashEvent,n(e("./TimerEvent"))},{"./EventDispatcher":51,"./FlashEvent":52,"./TimerEvent":53}],55:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"HIGH",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LOW",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MEDIUM",{get:function(){return 2},enumerable:!0,configurable:!0}),e}();r.BitmapFilterQuality=n},{}],56:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../webgl/filters/Blur2Filter"),o=e("./BitmapFilterQuality"),a=function(e){function t(t,r,n,i){void 0===r&&(r=4),void 0===n&&(n=4),void 0===i&&(i=o.BitmapFilterQuality.LOW),e.call(this,t),this.blurX=r,this.blurY=n,this.quality=i}return n(t,e),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.strengthX},set:function(e){this.strengthX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.strengthY},set:function(e){this.strengthY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.pass},set:function(e){this.pass=e},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.filterManager,this.blurX,this.blurY,this.quality)},t}(i.Blur2Filter);r.BlurFilter=a},{"../../webgl/filters/Blur2Filter":102,"./BitmapFilterQuality":55}],57:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../webgl/filters/GlowFilter"),o=e("./BitmapFilterQuality"),a=e("../../_util/_util"),u=function(e){function t(t,r,n,i,u,l,s,c,h){void 0===r&&(r=16711680),void 0===n&&(n=1),void 0===i&&(i=6),void 0===u&&(u=6),void 0===l&&(l=2),void 0===s&&(s=o.BitmapFilterQuality.LOW),void 0===c&&(c=!1),void 0===h&&(h=!1),e.call(this,t),this.inner=!1,this.knockout=!1,this.strength=2,this._color=0,this._alpha=1,this.color=r,this.alpha=a._util.limitInto(n,0,1),this.blurX=i,this.blurY=u,this.strength=l,this.quality=s,this.inner=c,this.knockout=h}return n(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){var t=e!==this.alpha;this._alpha=e,t&&this.__updateColorMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.strengthX},set:function(e){this.strengthX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.strengthY},set:function(e){this.strengthY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){e|=0;var t=e!==this._color;this._color=e,t&&this.__updateColorMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.pass},set:function(e){this.pass=e},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.filterManager,this.color,this.alpha,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout)},t.prototype.__updateColorMatrix=function(){var e=(this._color>>>16&255)/255,t=(this._color>>>8&255)/255,r=(255&this._color)/255,n=this._alpha,i=[0,0,0,e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,n,0];this.setColorMatrix(i)},t}(i.GlowFilter);r.GlowFilter=u},{"../../_util/_util":5,"../../webgl/filters/GlowFilter":107,"./BitmapFilterQuality":55}],58:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./BitmapFilterQuality")),n(e("./BlurFilter")),n(e("./GlowFilter"))},{"./BitmapFilterQuality":55,"./BlurFilter":56,"./GlowFilter":57}],59:[function(e,t,r){var n=e("../../_util/_util"),i=e("../../_util/NotImplementedError"),o=function(){function e(e,t,r,n,i,o,a,u){void 0===e&&(e=1),void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),this.color=0,this._alphaMultiplier=1,this._alphaOffset=0,this._redMultiplier=1,this._redOffset=0,this._greenMultiplier=1,this._greenOffset=0,this._blueMultiplier=1,this._blueOffset=0,this.redMultiplier=e,this.greenMultiplier=t,this.blueMultiplier=r,this.alphaMultiplier=n,this.redOffset=i,this.greenOffset=o,this.blueOffset=a,this.alphaOffset=u}return Object.defineProperty(e.prototype,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(e){this._alphaMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaOffset",{get:function(){return this._alphaOffset},set:function(e){this._alphaOffset=n._util.limitInto(e,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redMultiplier",{get:function(){return this._redMultiplier},set:function(e){this._redMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redOffset",{get:function(){return this._redOffset},set:function(e){this._redOffset=n._util.limitInto(e,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(e){this._greenMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"greenOffset",{get:function(){return this._greenOffset},set:function(e){this._greenOffset=n._util.limitInto(e,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(e){this._blueMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blueOffset",{get:function(){return this._blueOffset},set:function(e){this._blueOffset=n._util.limitInto(e,-1,1)},enumerable:!0,configurable:!0}),e.prototype.concat=function(e){throw new i.NotImplementedError},e}();r.ColorTransform=o},{"../../_util/NotImplementedError":4,"../../_util/_util":5}],60:[function(e,t,r){var n=e("./Point"),i=e("../../_util/_util"),o=e("../../_util/NotImplementedError"),a=function(){function e(e,t,r,n,i,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),this._data=[e,r,i,t,n,o,0,0,1]}return Object.defineProperty(e.prototype,"a",{get:function(){return this._data[0]},set:function(e){this._data[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this._data[3]},set:function(e){this._data[3]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"c",{get:function(){return this._data[1]},set:function(e){this._data[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"d",{get:function(){return this._data[4]},set:function(e){this._data[4]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tx",{get:function(){return this._data[2]},set:function(e){this._data[2]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ty",{get:function(){return this._data[5]},set:function(e){this._data[5]=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.prototype.concat=function(t){this._data=e.dotProduct(this._data,t._data)},e.prototype.copyColumnFrom=function(e,t){if(0>e||e>2)throw new RangeError("Column must be 0, 1, or 2.");this._data[3*e]=t.x,this._data[1+3*e]=t.y,this._data[2+3*e]=t.z},e.prototype.copyColumnTo=function(e,t){if(0>e||e>2)throw new RangeError("Column must be 0, 1, or 2.");t.x=this._data[3*e],t.y=this._data[1+3*e],t.z=this._data[2+3*e]},e.prototype.copyFrom=function(e){this._data=e._data.slice()},e.prototype.copyRowFrom=function(e,t){if(0>e||e>2)throw new RangeError("Row must be 0, 1, or 2.");this._data[e]=t.x,this._data[e+3]=t.y,this._data[e+6]=t.z},e.prototype.copyRowTo=function(e,t){if(0>e||e>2)throw new RangeError("Column must be 0, 1, or 2.");t.x=this._data[e],t.y=this._data[3+e],t.z=this._data[6+e]},e.prototype.createBox=function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.identity(),this.rotate(r),this.scale(e,t),this.translate(n,i)},e.prototype.createGradientBox=function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.createBox(e,t,r,n,i)},e.prototype.deltaTransformPoint=function(e){throw new o.NotImplementedError},e.prototype.identity=function(){this._data=[1,0,0,0,1,0,0,0,1]},e.prototype.invert=function(){throw new o.NotImplementedError},e.prototype.rotate=function(t){this._data=e.dotProduct(this._data,[Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1])},e.prototype.scale=function(t,r){this._data=e.dotProduct(this._data,[t,0,0,0,r,0,0,0,1])},e.prototype.skew=function(t,r){this._data=e.dotProduct(this._data,[0,Math.tan(t),0,Math.tan(r),0,0,0,0,1])},e.prototype.setTo=function(e,t,r,n,i,o){this._data=[e,r,i,t,n,o,0,0,1]},e.prototype.toString=function(){return i._util.formatString("[{0} {1} 0\r\n{2} {3} 0\r\n{4} {5} 1]",this.a,this.b,this.c,this.d,this.tx,this.ty)},e.prototype.transformPoint=function(e){return new n.Point(e.x*this._data[0]+e.y*this._data[1]+this._data[2],e.x*this._data[3]+e.y*this._data[4]+this._data[5])},e.prototype.translate=function(e,t){this.tx+=e,this.ty+=t},e.dotProduct=function(e,t){if(9!=t.length)throw new Error("Matrix dot product requires a 3x3 matrix.");for(var r=[0,0,0,0,0,0,0,0,0],n=0;3>n;n++)for(var i=0;3>i;i++)for(var o=0;3>o;o++)r[3*n+i]+=e[3*n+o]*t[3*o+i];return r},e}();r.Matrix=a},{"../../_util/NotImplementedError":4,"../../_util/_util":5,"./Point":64}],61:[function(e,t,r){var n=e("./Vector3D"),i=e("../../_util/ArgumentError"),o=e("../../_util/NotImplementedError"),a=e("./Orientation3D"),u=e("../../_util/ApplicationError"),l=e("../../_util/_util"),s=function(){function e(e){void 0===e&&(e=null),this.position=null,this._data=null,(null===e||e.length<=0)&&(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.rawData=e}return Object.defineProperty(e.prototype,"determinant",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawData",{get:function(){return this._data},set:function(e){if(e.length<16)throw new Error("Data length of Matrix3D must be no less than 16.");this._data=e.slice()},enumerable:!0,configurable:!0}),e.prototype.append=function(t){this._data=e.__dotProduct(t._data,this._data)},e.prototype.appendRotation=function(t,r,n){void 0===n&&(n=null),null!==n&&this.appendTranslation(n.x,n.y,n.z),this._data=e.__dotProduct(e.__getRotationMatrix(t*Math.PI/180,r),this._data),null!==n&&this.appendTranslation(-n.x,-n.y,-n.z)},e.prototype.appendScale=function(t,r,n){this._data=e.__dotProduct([t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1],this._data)},e.prototype.appendTranslation=function(t,r,n){this._data=e.__dotProduct([1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1],this._data)},e.prototype.clone=function(){var t=new e(this.rawData);return t.position=null!==this.position?this.position.clone():null,t},e.prototype.copyColumnFrom=function(e,t){if(0>e||e>3)throw new RangeError("Column must be 0, 1, 2 or 3.");this._data[4*e]=t.x,this._data[4*e+1]=t.y,this._data[4*e+2]=t.z,this._data[4*e+3]=t.w},e.prototype.copyColumnTo=function(e,t){if(0>e||e>3)throw new RangeError("Column must be 0, 1, 2 or 3.");t.x=this._data[4*e],t.y=this._data[4*e+1],t.z=this._data[4*e+2],t.w=this._data[4*e+3]},e.prototype.copyFrom=function(e){this.position=null!==e.position?e.position.clone():null,this.rawData=e.rawData},e.prototype.copyRawDataFrom=function(e,t,r){throw void 0===t&&(t=0),
void 0===r&&(r=!1),new o.NotImplementedError},e.prototype.copyRawDataTo=function(e,t,r){throw void 0===t&&(t=0),void 0===r&&(r=!1),new o.NotImplementedError},e.prototype.copyRowFrom=function(e,t){if(0>e||e>3)throw new RangeError("Row must be 0, 1, 2 or 3.");this._data[e]=t.x,this._data[e+4]=t.y,this._data[e+8]=t.z,this._data[e+12]=t.w},e.prototype.copyRowTo=function(e,t){if(0>e||e>3)throw new RangeError("Row must be 0, 1, 2 or 3.");t.x=this._data[e],t.y=this._data[e+4],t.z=this._data[e+8],t.w=this._data[e+12]},e.prototype.copyToMatrix3D=function(e){e.position=null!==this.position?this.position.clone():null,e.rawData=this.rawData},e.prototype.decompose=function(e){throw void 0===e&&(e=a.Orientation3D.EULER_ANGLES),new o.NotImplementedError},e.prototype.deltaTransformVector=function(e){throw new o.NotImplementedError},e.prototype.identity=function(){this._data=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.interpolate=function(t,r,n){n=l._util.limitInto(n,0,1);for(var i=[],o=0;16>o;o++)i.push(t._data[o]*(1-n)+r._data[o]*n);return new e(i)},e.prototype.interpolateTo=function(t,r){return e.interpolate(this,t,r)},e.prototype.invert=function(){throw new o.NotImplementedError},e.prototype.pointAt=function(e,t,r){void 0===t&&(t=n.Vector3D.ORIGIN),void 0===r&&(r=n.Vector3D.Z_AXIS);var i=t.x-e.x,o=t.y-e.y,a=t.z-e.z,u=1/Math.sqrt(i*i+o*o+a*a);i*=u,o*=u,a*=u;var l=o*r.z-a*r.y,s=a*r.x-i*r.z,c=i*r.y-o*r.x,h=1/Math.sqrt(l*l+s*s+c*c);l*=h,s*=h,c*=h;var p=s*a-c*o,f=c*i-l*a,d=l*o-s*i,_=this._data;_[0]=l,_[1]=s,_[2]=c,_[3]=0,_[4]=p,_[5]=f,_[6]=d,_[7]=0,_[8]=-i,_[9]=-o,_[10]=-a,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1;var m=-e.x,g=-e.y,y=-e.z;_[3]+=_[0]*m+_[1]*g+_[2]*y,_[7]+=_[4]*m+_[5]*g+_[6]*y,_[11]+=_[8]*m+_[9]*g+_[10]*y,_[15]+=_[12]*m+_[13]*g+_[14]*y},e.prototype.prepend=function(t){this._data=e.__dotProduct(this._data,t._data)},e.prototype.prependRotation=function(t,r,n){void 0===n&&(n=null),null!==n&&this.prependTranslation(n.x,n.y,n.z),this._data=e.__dotProduct(this._data,e.__getRotationMatrix(t*Math.PI/180,r)),null!==n&&this.prependTranslation(-n.x,-n.y,-n.z)},e.prototype.prependScale=function(t,r,n){this._data=e.__dotProduct(this._data,[t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1])},e.prototype.prependTranslation=function(t,r,n){this._data=e.__dotProduct(this._data,[1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1])},e.prototype.recompose=function(e,t){throw void 0===t&&(t=a.Orientation3D.EULER_ANGLES),new o.NotImplementedError},e.prototype.transformVector=function(e){var t=this._data[0]*e.x+this._data[1]*e.y+this._data[2]*e.z+this._data[3]*e.w,r=this._data[4]*e.x+this._data[5]*e.y+this._data[6]*e.z+this._data[7]*e.w,i=this._data[8]*e.x+this._data[9]*e.y+this._data[10]*e.z+this._data[11]*e.w,o=this._data[12]*e.x+this._data[13]*e.y+this._data[14]*e.z+this._data[15]*e.w;return new n.Vector3D(t,r,i,o)},e.prototype.transformVectors=function(e,t){if(e.length%3!==0)throw new u.ApplicationError("Matrix3D.transformVectors needs 2 arrays, size of the input array must be multiple of 3.");for(var r=0;r<e.length/3;r++){var n=e[3*r],i=e[3*r+1],o=e[3*r+2],a=this._data[0]*n+this._data[1]*i+this._data[2]*o,l=this._data[4]*n+this._data[5]*i+this._data[6]*o,s=this._data[8]*n+this._data[9]*i+this._data[10]*o;t.push(a,l,s)}},e.prototype.transpose=function(){var e=this._data;this._data=[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]},e.prototype.toArray=function(){var e=this._data;return new Float32Array([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]])},e.prototype.setOrthographicProjection=function(e,t,r,n,o,a){if(e===t||r===n||o===a)throw new i.ArgumentError("Null frustum");var u=1/(t-e),l=1/(r-n),s=1/(a-o),c=this._data;c[0]=2*u,c[1]=0,c[2]=0,c[3]=-(e+t)*u,c[4]=0,c[5]=2*l,c[6]=0,c[7]=-(r+n)*l,c[8]=0,c[9]=0,c[10]=-2*s,c[11]=-(o+a)*s,c[12]=0,c[13]=0,c[14]=0,c[15]=1},e.prototype.setPerspectiveProjection=function(e,t,r,n){if(r===n||0===t)throw new i.ArgumentError("Null frustum");if(0>=r)throw new i.ArgumentError("near <= 0");if(0>=n)throw new i.ArgumentError("far <= 0");e=Math.PI/2*e/180;var o=Math.sin(e);if(0===o)throw new i.ArgumentError("Null frustum");var a=1/(n-r),u=Math.cos(e)/o,l=this._data;l[0]=u/t,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=u,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=-(n+r)*a,l[11]=-2*r*n*a,l[12]=0,l[13]=0,l[14]=-1,l[15]=0},e.__dotProduct=function(e,t){if(16!==e.length||16!==t.length)throw new Error("Matrix3D dot product needs a array of 16 elements.");for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;4>n;n++)for(var i=0;4>i;i++)for(var o=0;4>o;o++)r[4*n+i]+=e[4*n+o]*t[4*o+i];return r},e.__getRotationMatrix=function(e,t){var r=Math.sin(e),n=Math.cos(e);return[n+t.x*t.x*(1-n),t.x*t.y*(1-n)-t.z*r,t.x*t.z*(1-n)+t.y*r,0,t.x*t.y*(1-n)+t.z*r,n+t.y*t.y*(1-n),t.y*t.z*(1-n)-t.x*r,0,t.z*t.x*(1-n)-t.y*r,t.z*t.y*(1-n)+t.x*r,n+t.z*t.z*(1-n),0,0,0,0,1]},e}();r.Matrix3D=s},{"../../_util/ApplicationError":2,"../../_util/ArgumentError":3,"../../_util/NotImplementedError":4,"../../_util/_util":5,"./Orientation3D":62,"./Vector3D":67}],62:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"AXIS_ANGLE",{get:function(){return"axisAngle"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EULER_ANGLES",{get:function(){return"eulerAngles"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"QUATERNION",{get:function(){return"quaternion"},enumerable:!0,configurable:!0}),e}();r.Orientation3D=n},{}],63:[function(e,t,r){var n=e("../../_util/NotImplementedError"),i=e("./Point"),o=e("../../_util/_util"),a=function(){function e(){this.focalLength=10,this.projectionCenter=null,this._fieldOfView=90,this.projectionCenter=new i.Point}return Object.defineProperty(e.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(e){this._fieldOfView=o._util.limitInto(e,0,180)},enumerable:!0,configurable:!0}),e.prototype.toMatrix3D=function(){throw new n.NotImplementedError},e}();r.PerspectiveProjection=a},{"../../_util/NotImplementedError":4,"../../_util/_util":5,"./Point":64}],64:[function(e,t,r){var n=e("../../_util/_util"),i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},e.distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},e.interpolate=function(t,r,i){return i=n._util.limitInto(i,0,1),new e(t.x*i+r.x*(1-i),t.y*i+r.y*(1-i))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),e.prototype.normalize=function(e){var t=this.length;t>0&&(this.x*=e/t,this.y*=e/t)},e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e.polar=function(t,r){return new e(t*Math.cos(r),t*Math.sin(r))},e.prototype.setTo=function(e,t){this.x=e,this.y=t},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.toString=function(){return n._util.formatString("(X={0}, y={1})",this.x,this.y)},e}();r.Point=i},{"../../_util/_util":5}],65:[function(e,t,r){var n=e("./Point"),i=e("../../_util/_util"),o=function(){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this._x=0,this._y=0,this._w=0,this._h=0,this._x=e>=0?e:0,this._y=t>=0?t:0,this._w=r>=0?r:0,this._h=n>=0?n:0}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this._y+this._h},set:function(e){e<this._y&&(e=this._y),this._h=e-this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new n.Point(this._x+this._w,this._y+this._h)},set:function(e){this.right=e.x,this.bottom=e.y},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._x,this._y,this._w,this._h)},e.prototype.contains=function(e,t){return this.left<=e&&e<=this.right&&this.top<=t&&t<=this.bottom},e.prototype.containsPoint=function(e){return this.contains(e.x,e.y)},e.prototype.containsRect=function(e){return this.containsPoint(e.topLeft)&&this.containsPoint(e.bottomRight)},e.prototype.copyFrom=function(e){this._x=e._x,this._y=e._y,this._w=e._w,this._h=e._h},e.prototype.equals=function(e){return this._x==e._x&&this._y==e._y&&this._w==e._w&&this._h==e._h},Object.defineProperty(e.prototype,"height",{get:function(){return this._h},set:function(e){this._h=e>=0?e:0},enumerable:!0,configurable:!0}),e.prototype.inflate=function(e,t){this.x-=e,this.width+=e+e,this.y-=t,this.height+=t+t},e.prototype.inflatePoint=function(e){this.inflate(e.x,e.y)},e.prototype.intersection=function(t){var r,n,i,o,a,u;return this.left<t.left?(a=this,u=t):(a=t,u=this),a.right<u.left?new e:(r=u.left,i=Math.min(a.right,u.right)-r,this.top<t.top?(a=this,u=t):(a=t,u=this),a.bottom<u.top?new e:(n=u.top,o=Math.min(a.bottom,u.bottom)-n,new e(r,n,i,o)))},e.prototype.intersects=function(e){var t,r;return this.left<e.left?(t=this,r=e):(t=e,r=this),t.right<r.left?!1:(this.top<e.top?(t=this,r=e):(t=e,r=this),t.bottom>=r.top)},e.prototype.isEmpty=function(){return this._w<=0||this._h<=0},Object.defineProperty(e.prototype,"left",{get:function(){return this._x},set:function(e){this._x=e>=0?e:0},enumerable:!0,configurable:!0}),e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e.prototype.offsetPoint=function(e){this.offset(e.x,e.y)},Object.defineProperty(e.prototype,"right",{get:function(){return this._x+this._w},set:function(e){e<this._x&&(e=this._x),this._w=e-this._x},enumerable:!0,configurable:!0}),e.prototype.setEmpty=function(){this._x=this._y=this._w=this._h=0},e.prototype.setTo=function(e,t,r,n){this.x=e,this.y=t,this.width=r,this.height=n},Object.defineProperty(e.prototype,"size",{get:function(){return new n.Point(this._w,this._h)},set:function(e){this._w=e.x,this._h=e.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._y},set:function(e){e>this._y+this._h&&(e=this._y+this._h),this._h=this._y+this._h-e,this._y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new n.Point(this._x,this._y)},set:function(e){this.left=e.x,this.top=e.y},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return i._util.formatString("{x={0}, y={1}, w={2}, h={3}}",this.x,this.y,this.width,this.height)},e.prototype.union=function(t){var r=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.right,t.right),o=Math.max(this.bottom,t.bottom);return new e(r,n,i-r,o-n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._w},set:function(e){this._w=e>=0?e:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!0,configurable:!0}),e}();r.Rectangle=o},{"../../_util/_util":5,"./Point":64}],66:[function(e,t,r){var n=e("../../_util/NotImplementedError"),i=e("./Matrix3D"),o=e("./ColorTransform"),a=e("./Matrix"),u=e("./PerspectiveProjection"),l=function(){function e(){this.colorTransform=null,this.matrix=null,this.matrix3D=null,this.perspectiveProjection=null,this._pixelBounds=null,this.matrix=new a.Matrix,this.matrix3D=new i.Matrix3D,this.colorTransform=new o.ColorTransform,this.perspectiveProjection=new u.PerspectiveProjection}return Object.defineProperty(e.prototype,"concatenatedColorTransform",{get:function(){throw new n.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"concatenatedMatrix",{get:function(){throw new n.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:!0,configurable:!0}),e.prototype.getRelativeMatrix3D=function(e){throw new n.NotImplementedError},e}();r.Transform=l},{"../../_util/NotImplementedError":4,"./ColorTransform":59,"./Matrix":60,"./Matrix3D":61,"./PerspectiveProjection":63}],67:[function(e,t,r){var n=e("../../_util/_util"),i=function(){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.w=0,this.x=0,this.y=0,this.z=0,this.x=e,this.y=t,this.z=r,this.w=n}return Object.defineProperty(e,"X_AXIS",{get:function(){return new e(1,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Y_AXIS",{get:function(){return new e(0,1,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Z_AXIS",{get:function(){return new e(0,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ORIGIN",{get:function(){return new e(0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w)},e.angleBetween=function(e,t){var r=e.x*t.x+e.y*t.y+e.z*t.z,n=e.length*t.length,i=Math.sqrt(r*r/n);return Math.acos(i)},e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)},e.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w},e.prototype.crossProduct=function(t){var r=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return new e(r,n,i,this.w)},e.prototype.decrementBy=function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z},e.distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)+(e.z-t.z)*(e.z-t.z))},e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},e.prototype.equals=function(e,t){return void 0===t&&(t=!1),this.x==e.x&&this.y==e.y&&this.z==e.y&&!(t&&this.w!=e.w)},e.prototype.incrementBy=function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},e.prototype.nearEquals=function(e,t,r){return void 0===r&&(r=!1),n._util.isValueBetweenNotEquals(this.x,e.x-t,e.x+t)&&n._util.isValueBetweenNotEquals(this.y,e.y-t,e.y+t)&&n._util.isValueBetweenNotEquals(this.z,e.z-t,e.z+t)&&!(r&&!n._util.isValueBetweenNotEquals(this.w,e.w-t,e.w+t))},e.prototype.negate=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},e.prototype.normalize=function(){var e=this.length;return e>0&&(this.x/=e,this.y/=e,this.z/=e),e},e.prototype.project=function(){null!=this.w&&0!=this.w&&(this.x/=this.w,this.y/=this.w,this.z/=this.w)},e.prototype.scaleBy=function(e){this.x*=e,this.y*=e,this.z*=e},e.prototype.setTo=function(e,t,r){this.x=e,this.y=t,this.z=r},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z,this.w)},e.prototype.toString=function(){return n._util.formatString("[x={0}, y={1}, z={2}, w={3}]",this.x,this.y,this.z,this.w)},e}();r.Vector3D=i},{"../../_util/_util":5}],68:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./ColorTransform")),n(e("./Matrix")),n(e("./Matrix3D")),n(e("./Orientation3D")),n(e("./PerspectiveProjection")),n(e("./Point")),n(e("./Rectangle")),n(e("./Transform")),n(e("./Vector3D"))},{"./ColorTransform":59,"./Matrix":60,"./Matrix3D":61,"./Orientation3D":62,"./PerspectiveProjection":63,"./Point":64,"./Rectangle":65,"./Transform":66,"./Vector3D":67}],69:[function(e,t,r){var n=e("./display/index");r.display=n;var i=e("./events/index");r.events=i;var o=e("./geom/index");r.geom=o;var a=e("./filters/index");r.filters=a;var u=e("./text/index");r.text=u;var l=e("./utils/index");r.utils=l},{"./display/index":50,"./events/index":54,"./filters/index":58,"./geom/index":68,"./text/index":80,"./utils/index":82}],70:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"ADVANCED",{get:function(){return"advanced"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),e}();r.AntiAliasType=n},{}],71:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PIXEL",{get:function(){return"pixel"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SUBPIXEL",{get:function(){return"subpixel"},enumerable:!0,configurable:!0}),e}();r.GridFitType=n},{}],72:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../_util/NotImplementedError"),o=e("../events/EventDispatcher"),a=function(e){function t(){throw e.call(this),new i.NotImplementedError}return n(t,e),t.prototype.clear=function(){throw new i.NotImplementedError},t.prototype.getStyle=function(e){throw new i.NotImplementedError},t.prototype.parseCSS=function(e){throw new i.NotImplementedError},t.prototype.setStyle=function(e,t){throw new i.NotImplementedError},t.prototype.transform=function(e){throw new i.NotImplementedError},t.prototype.dispose=function(){throw e.prototype.dispose.call(this),new i.NotImplementedError},Object.defineProperty(t.prototype,"styleNames",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),t}(o.EventDispatcher);r.StyleSheet=a},{"../../_util/NotImplementedError":4,"../events/EventDispatcher":51}],73:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../display/InteractiveObject"),o=e("./AntiAliasType"),a=e("./TextFieldAutoSize"),u=e("./TextFormat"),l=e("./GridFitType"),s=e("../../_util/NotImplementedError"),c=e("./TextInteractionMode"),h=e("./TextFieldType"),p=e("../../webgl/ShaderID"),f=e("../../webgl/RenderHelper"),d=e("../../_util/_util"),_=function(e){function t(t,r){e.call(this,t,r),this.alwaysShowSelection=!1,this.antiAliasType=o.AntiAliasType.NORMAL,this.autoSize=a.TextFieldAutoSize.NONE,this.condenseWhite=!1,this.displayAsPassword=!1,this.embedFonts=!1,this.gridFitType=l.GridFitType.PIXEL,this.htmlText=null,this.maxChars=0,this.mouseWheelEnabled=!0,this.multiline=!0,this.restrict=null,this.scrollH=0,this.scrollV=1,this.selectable=!0,this.sharpness=0,this.styleSheet=null,this.customOutlineEnabled=!1,this.textInteractionMode=c.TextInteractionMode.NORMAL,this.type=h.TextFieldType.DYNAMIC,this.useRichTextClipboard=!1,this.wordWrap=!1,this._textFormatChangedHandler=null,this._defaultTextFormat=null,this._isContentChanged=!0,this._canvasTarget=null,this._canvas=null,this._context2D=null,this._text=null,this._background=!1,this._backgroundColor=16777215,this._border=!1,this._borderColor=0,this._textColor=0,this._textOutlineColor=0,this._thickness=0,null!==t&&(this._canvasTarget=this.__createCanvasTarget(t.worldRenderer)),this._textFormatChangedHandler=this.__textFormatChanged.bind(this),this.defaultTextFormat=new u.TextFormat}return n(t,e),t.prototype.appendText=function(e){this.text+=e},Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){var t=e!==this._background;t&&(this._background=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){var t=e!==this._backgroundColor;t&&(this._backgroundColor=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._border},set:function(e){var t=e!==this._border;t&&(this._border=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderColor",{get:function(){return this._borderColor},set:function(e){var t=e!==this._borderColor;t&&(this._borderColor=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomScrollV",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caretIndex",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTextFormat",{get:function(){return this._defaultTextFormat},set:function(e){null!==this._defaultTextFormat&&this._defaultTextFormat.removeEventListener(u.TextFormat.TEXT_FORMAT_CHANGE,this._textFormatChangedHandler),this._defaultTextFormat=d._util.isUndefinedOrNull(e)?new u.TextFormat:e,this._defaultTextFormat.addEventListener(u.TextFormat.TEXT_FORMAT_CHANGE,this._textFormatChangedHandler)},enumerable:!0,configurable:!0}),t.prototype.getCharBoundaries=function(){throw new s.NotImplementedError},t.prototype.getCharIndexAtPoint=function(e,t){throw new s.NotImplementedError},t.prototype.getFirstCharInParagraph=function(e){throw new s.NotImplementedError},t.prototype.getImageReference=function(e){throw new s.NotImplementedError},t.prototype.getLineIndexAtPoint=function(e,t){throw new s.NotImplementedError},t.prototype.getLineIndexOfChar=function(e){throw new s.NotImplementedError},t.prototype.getLineLength=function(e){throw new s.NotImplementedError},t.prototype.getLineMetrics=function(e){throw new s.NotImplementedError},t.prototype.getLineOffset=function(e){throw new s.NotImplementedError},t.prototype.getLineText=function(e){throw new s.NotImplementedError},t.prototype.getParagraphLength=function(e){throw new s.NotImplementedError},t.prototype.getTextFormat=function(e,t){throw void 0===e&&(e=-1),void 0===t&&(t=-1),new s.NotImplementedError},t.prototype.isFontCompatible=function(e,t){throw new s.NotImplementedError},t.prototype.replaceSelectedText=function(e){throw new s.NotImplementedError},t.prototype.replaceText=function(e,t,r){throw new s.NotImplementedError},t.prototype.setSelection=function(e,t){throw new s.NotImplementedError},t.prototype.setTextFormat=function(e,t,r){throw void 0===t&&(t=-1),void 0===r&&(r=-1),new s.NotImplementedError},Object.defineProperty(t.prototype,"length",{get:function(){return d._util.isUndefinedOrNull(this.text)?0:this.text.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollH",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollV",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numLines",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionBeginIndex",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionEndIndex",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){var t=this._text!==e;t&&(this._text=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this.defaultTextFormat.color},set:function(e){var t=this.defaultTextFormat.color!==e;this.defaultTextFormat.color=e,t&&!this.customOutlineEnabled&&(this.textOutlineColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textOutlineColor",{get:function(){return this._textOutlineColor},set:function(e){var t=this._textOutlineColor!==e;t&&(this._textOutlineColor=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){var e=1.5*this.defaultTextFormat.size;return this.thickness>0&&(e+=2*this.thickness),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){var e=this._context2D.measureText(this.text),t=e.width;return this.thickness>0&&(t+=2*this.thickness),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(e){var t=this._thickness!==e;t&&(this._thickness=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this.root.worldRenderer;t.releaseRenderTarget(this._canvasTarget),this._canvasTarget=null,this._canvas=null,this._context2D=null},t.prototype.__update=function(){this._isContentChanged&&(this._canvasTarget.updateImageSize(),this.__updateCanvasTextStyle(this._context2D),this.__drawTextElements(this._context2D),this._isContentChanged=!1)},t.prototype.__render=function(e){this.visible&&this.alpha>0&&null!==this.text&&this.text.length>0&&(this._canvasTarget.updateImageContent(),f.RenderHelper.copyImageContent(e,this._canvasTarget,e.currentRenderTarget,!1,!0,this.transform.matrix3D,this.alpha,!1))},t.prototype.__selectShader=function(e){e.selectShader(p.ShaderID.COPY_IMAGE)},t.prototype.__createCanvasTarget=function(e){if(null===this._canvas){var t=window.document.createElement("canvas");t.width=e.view.width,t.height=e.view.height,this._canvas=t,this._context2D=t.getContext("2d")}return e.createRenderTarget(this._canvas)},t.prototype.__updateCanvasTextStyle=function(e){var t=[];this.defaultTextFormat.bold&&t.push("bold"),this.defaultTextFormat.italic&&t.push("italic"),t.push(this.defaultTextFormat.size.toString()+"pt"),t.push('"'+this.defaultTextFormat.font+'"'),e.font=t.join(" ")},t.prototype.__drawTextElements=function(e){var t=this.thickness,r=(this.thickness,1);e.clearRect(0,0,this._canvas.width,this._canvas.height),this.background&&(e.fillStyle=d._util.colorToCssSharp(this.backgroundColor),e.fillRect(0,0,this.textWidth+2*r,this.textHeight+2*r)),e.fillStyle=d._util.colorToCssSharp(this.textColor),e.fillText(this.text,t+r,.75*this.textHeight+r),this.thickness>0&&(e.lineWidth=this.thickness,e.strokeStyle=d._util.colorToCssSharp(this.textOutlineColor),e.strokeText(this.text,t+r,.75*this.textHeight+r)),this.border&&(e.lineWidth=1,e.strokeStyle=d._util.colorToCssSharp(this.borderColor),e.strokeRect(r,r,this.textWidth+2*r,this.textHeight+2*r))},t.prototype.__textFormatChanged=function(){this._isContentChanged=!0},t}(i.InteractiveObject);r.TextField=_},{"../../_util/NotImplementedError":4,"../../_util/_util":5,"../../webgl/RenderHelper":92,"../../webgl/ShaderID":95,"../display/InteractiveObject":37,"./AntiAliasType":70,"./GridFitType":71,"./TextFieldAutoSize":74,"./TextFieldType":75,"./TextFormat":76,"./TextInteractionMode":78}],74:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"CENTER",{get:function(){return"center"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LEFT",{get:function(){return"left"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RIGHT",{get:function(){return"right"},enumerable:!0,configurable:!0}),e}();r.TextFieldAutoSize=n},{}],75:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"DYNAMIC",{get:function(){return"dynamic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INPUT",{get:function(){return"input"},enumerable:!0,configurable:!0}),e}();r.TextFieldType=n},{}],76:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("os"),o=e("./TextFormatAlign"),a=e("../events/EventDispatcher"),u=e("../../_util/_util"),l=e("../events/FlashEvent"),s=function(e){function t(t,r,n,a,u,l,s,c,h,p,f,d,_){void 0===t&&(t=null),void 0===r&&(r=12),void 0===n&&(n=0),void 0===a&&(a=!1),void 0===u&&(u=!1),void 0===l&&(l=!1),void 0===s&&(s=null),void 0===c&&(c=null),void 0===h&&(h=o.TextFormatAlign.LEFT),void 0===p&&(p=0),void 0===f&&(f=0),void 0===d&&(d=0),void 0===_&&(_=0),e.call(this),this._align=o.TextFormatAlign.LEFT,this._blockIndent=0,this._bold=!1,this._bullet=!1,this._color=0,this._font=null,this._indent=0,this._italic=!1,this._kerning=!1,this._leading=0,this._leftMargin=0,this._letterSpacing=0,this._rightMargin=0,this._size=12,this._tabStops=[],this._target=null,this._underline=!1,this._url=null,null===t?this.font=i.type().toLowerCase().indexOf("osx")>=0?"Times":"Times New Roman":this.font=t,this.size=r,this.color=n,this.bold=a,this.italic=u,this.underline=l,this.url=s,this.target=c,this.align=h,this.leftMargin=p,this.rightMargin=f,this.indent=d,this.leading=_}return n(t,e),Object.defineProperty(t,"TEXT_FORMAT_CHANGE",{get:function(){return"textFormatChange"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){var t=this._align!==e;t&&(this._align=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blockIndent",{get:function(){return this._blockIndent},set:function(e){var t=this._blockIndent!==e;t&&(this._blockIndent=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bold",{get:function(){return this._bold},set:function(e){var t=this._bold!==e;t&&(this._bold=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bullet",{get:function(){return this._bullet},set:function(e){var t=this._bullet!==e;t&&(this._bullet=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){var t=this._color!==e;t&&(this._color=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){var t=this._font!==e;t&&(this._font=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indent",{get:function(){return this._indent},set:function(e){var t=this._indent!==e;t&&(this._indent=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"italic",{get:function(){return this._italic},set:function(e){var t=this._italic!==e;t&&(this._italic=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kerning",{get:function(){return this._kerning},set:function(e){var t=this._kerning!==e;t&&(this._kerning=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._indent},set:function(e){var t=this._leading!==e;t&&(this._leading=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMargin",{get:function(){return this._leftMargin},set:function(e){var t=this._leftMargin!==e;t&&(this._leftMargin=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){var t=this._letterSpacing!==e;t&&(this._letterSpacing=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMargin",{get:function(){return this._rightMargin},set:function(e){var t=this._rightMargin!==e;t&&(this._rightMargin=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){var t=this._size!==e;t&&(this._size=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabStops",{get:function(){return this._tabStops},set:function(e){u._util.isUndefinedOrNull(e)&&(e=[]);var t=!1;if(t||(t=this._tabStops.length!==e.length),!t)for(var r=0;r<e.length;++r)if(this._tabStops[r]!==e[r]){t=!0;break}t&&(this._tabStops=e.slice(),this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){var t=this._target!==e;t&&(this._target=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underline",{get:function(){
return this._underline},set:function(e){var t=this._underline!==e;t&&(this._underline=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},set:function(e){var t=this._url!==e;t&&(this._url=e,this.__raiseChange())},enumerable:!0,configurable:!0}),t.prototype.__raiseChange=function(){var e=l.FlashEvent.create(t.TEXT_FORMAT_CHANGE);this.dispatchEvent(e)},t}(a.EventDispatcher);r.TextFormat=s},{"../../_util/_util":5,"../events/EventDispatcher":51,"../events/FlashEvent":52,"./TextFormatAlign":77,os:180}],77:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"CENTER",{get:function(){return"center"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"END",{get:function(){return"end"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"JUSTIFY",{get:function(){return"justify"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LEFT",{get:function(){return"left"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RIGHT",{get:function(){return"right"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"START",{get:function(){return"start"},enumerable:!0,configurable:!0}),e}();r.TextFormatAlign=n},{}],78:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SELECTION",{get:function(){return"selection"},enumerable:!0,configurable:!0}),e}();r.TextInteractionMode=n},{}],79:[function(e,t,r){var n=function(){function e(e,t,r,n,i,o){this.ascent=0,this.descent=0,this.height=0,this.leading=0,this.width=0,this.x=0,this.x=e,this.width=t,this.height=r,this.ascent=n,this.descent=i,this.leading=o}return e}();r.TextLineMetrics=n},{}],80:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./AntiAliasType")),n(e("./GridFitType")),n(e("./StyleSheet")),n(e("./TextField")),n(e("./TextFieldAutoSize")),n(e("./TextFieldType")),n(e("./TextFormat")),n(e("./TextFormatAlign")),n(e("./TextInteractionMode")),n(e("./TextLineMetrics"))},{"./AntiAliasType":70,"./GridFitType":71,"./StyleSheet":72,"./TextField":73,"./TextFieldAutoSize":74,"./TextFieldType":75,"./TextFormat":76,"./TextFormatAlign":77,"./TextInteractionMode":78,"./TextLineMetrics":79}],81:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../events/EventDispatcher"),o=e("../events/TimerEvent"),a=function(e){function t(t,r){void 0===r&&(r=0),e.call(this),this.enabled=!0,this._currentCount=0,this._delay=1e3,this._repeatCount=0,this._running=!1,this._handle=0,this.delay=t,this.repeatCount=r,this.start()}return n(t,e),Object.defineProperty(t.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){e=Math.floor(e),this._delay=e>=0?e:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){e=Math.floor(e),this._repeatCount=e>=0?e:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.running&&(window.clearInterval(this._handle),this._handle=0,this._running=!1,this._currentCount=0)},t.prototype.start=function(){!this.running&&(this.currentCount<this.repeatCount||0===this.repeatCount)&&(this._handle=window.setInterval(this.__timerCallback.bind(this),this.delay),this._running=!0)},t.prototype.stop=function(){this.running&&(window.clearInterval(this._handle),this._handle=0,this._running=!1)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.reset()},t.prototype.__timerCallback=function(){this.enabled&&(this._currentCount++,this.repeatCount>0&&this.currentCount>this.repeatCount?(this.stop(),this.__raiseTimerCompleteEvent()):this.__raiseTimerEvent())},t.prototype.__raiseTimerEvent=function(){var e=new o.TimerEvent(o.TimerEvent.TIMER);e.timeStamp=Date.now(),this.dispatchEvent(e)},t.prototype.__raiseTimerCompleteEvent=function(){var e=new o.TimerEvent(o.TimerEvent.TIMER_COMPLETE);e.timeStamp=Date.now(),this.dispatchEvent(e)},t}(i.EventDispatcher);r.Timer=a},{"../events/EventDispatcher":51,"../events/TimerEvent":53}],82:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./Timer"))},{"./Timer":81}],83:[function(e,t,r){function n(e){e._util=o,e.flash=a,e.webgl=u,e.fl=l,e.mx=s}function i(){var e=window,t=o._util;if(!e)return!1;if(!t.isClassDefinition(e.HTMLCanvasElement))return!1;if(!t.isClassDefinition(e.WebGLRenderingContext))return!1;if(!t.isClassDefinition(e.Map))return!1;if(!t.isClassDefinition(e.Set))return!1;if("object"==typeof e.chrome){var r=/Chrome\/(\d+)(?:\.\d+)*/,n=r.exec(window.navigator.appVersion);if(n.length<2||parseInt(n[1])<40)return!1}return!0}var o=e("./_util/index");r._util=o;var a=e("./flash/index");r.flash=a;var u=e("./webgl/index");r.webgl=u;var l=e("./fl/index");r.fl=l;var s=e("./mx/index");r.mx=s;var c=e("./GLantern");r.GLantern=c.GLantern,r.injectToGlobal=n,r.isSupported=i},{"./GLantern":1,"./_util/index":6,"./fl/index":7,"./flash/index":69,"./mx/index":86,"./webgl/index":116}],84:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/display/DisplayObjectContainer"),o=e("../../_util/NotImplementedError"),a=function(e){function t(t,r){e.call(this,t,r)}return n(t,e),t.prototype.__update=function(){throw new o.NotImplementedError},t.prototype.__render=function(e){throw new o.NotImplementedError},t}(i.DisplayObjectContainer);r.Canvas=a},{"../../_util/NotImplementedError":4,"../../flash/display/DisplayObjectContainer":32}],85:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./Canvas"))},{"./Canvas":84}],86:[function(e,t,r){var n=e("./containers/index");r.containers=n},{"./containers/index":85}],87:[function(e,t,r){var n=function(){function e(){this.name=null,this.value=void 0,this.location=-1}return e}();r.AttributeCache=n},{}],88:[function(e,t,r){var n=function(){function e(e){this._filterManager=null,this._flipY=!1,this._flipX=!1,this._referenceCount=0,this._filterManager=e}return e.prototype.notifyAdded=function(){this._referenceCount<=0&&this.__initialize(),this._referenceCount++},e.prototype.notifyRemoved=function(){this._referenceCount--,this._referenceCount<=0&&this.__dispose()},e.prototype.dispose=function(){this.__dispose()},e.prototype.initialize=function(){this.__initialize()},Object.defineProperty(e.prototype,"filterManager",{get:function(){return this._filterManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipX",{get:function(){return this._flipX},set:function(e){this._flipX=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this._flipY},set:function(e){this._flipY=e},enumerable:!0,configurable:!0}),e.prototype.__initialize=function(){},e.prototype.__dispose=function(){},e}();r.FilterBase=n},{}],89:[function(e,t,r){var n=e("./RenderHelper"),i=function(){function e(e){this._tempTarget=null,this._renderer=null,this._filterGroups=null,this._renderer=e,this._filterGroups=[],this._tempTarget=e.createRenderTarget()}return e.prototype.dispose=function(){this._renderer.releaseRenderTarget(this._tempTarget),this.clearFilterGroups(),this._tempTarget=null,this._filterGroups=null,this._renderer=null},e.prototype.clearFilterGroups=function(){var e,t=this._filterGroups;if(t.length>0)for(var r=0;r<t.length;++r)for(e=t[r];e.length>0;)e.pop();for(;t.length>0;)t.pop()},e.prototype.pushFilterGroup=function(e){this._filterGroups.push(e.slice())},e.prototype.popFilterGroup=function(){return this.hasFilterGroups?this._filterGroups.pop():null},Object.defineProperty(e.prototype,"hasFilterGroups",{get:function(){return this._filterGroups.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),e.prototype.processFilters=function(e,t,r,i){if(t===r)return void console.warn("Filter alert: input and output are the same, processing aborted.");if(this.hasFilterGroups){var o,a=this._filterGroups[this._filterGroups.length-1],u=t,l=this._tempTarget;l.clear();for(var s,c=0;c<a.length;c++)o=a[c],null!==o&&(o.process(e,u,l,!0),s=u,u=l,l=s);n.RenderHelper.copyTargetContent(e,u,r,!1,!0,i)}},e}();r.FilterManager=i},{"./RenderHelper":92}],90:[function(e,t,r){var n=Object.create(null),i=function(){function e(){}return Object.defineProperty(e,"buffered",{get:function(){return n.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"blur",{get:function(){return n.blur},enumerable:!0,configurable:!0}),Object.defineProperty(e,"primitive",{get:function(){return n.primitive},enumerable:!0,configurable:!0}),Object.defineProperty(e,"colorTransform",{get:function(){return n.colorTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fxaa",{get:function(){return n.fxaa},enumerable:!0,configurable:!0}),Object.defineProperty(e,"blur2",{get:function(){return n.blur2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"copyImage",{get:function(){return n.copyImage},enumerable:!0,configurable:!0}),e}();r.FragmentShaders=i,n.buffered=["precision mediump float;","","uniform sampler2D uSampler;","","varying vec2 vTextureCoord;","","void main() {","    gl_FragColor = texture2D(uSampler, vTextureCoord);","}"].join("\n"),n.blur=["precision lowp float;","","varying vec2 vTextureCoord;","varying vec2 vBlurTexCoords[6];","","uniform sampler2D uSampler;","","void main()","{","   gl_FragColor = vec4(0.0);","   ","   gl_FragColor += texture2D(uSampler, vBlurTexCoords[0]) * 0.004431848411938341;","   gl_FragColor += texture2D(uSampler, vBlurTexCoords[1]) * 0.05399096651318985;","   gl_FragColor += texture2D(uSampler, vBlurTexCoords[2]) * 0.2419707245191454;","   gl_FragColor += texture2D(uSampler, vTextureCoord    ) * 0.3989422804014327;","   gl_FragColor += texture2D(uSampler, vBlurTexCoords[3]) * 0.2419707245191454;","   gl_FragColor += texture2D(uSampler, vBlurTexCoords[4]) * 0.05399096651318985;","   gl_FragColor += texture2D(uSampler, vBlurTexCoords[5]) * 0.004431848411938341;","}"].join("\n"),n.primitive=["precision mediump float;","","uniform float uAlpha;","","varying vec4 vVertexColor;","","void main() {","   gl_FragColor = vVertexColor * uAlpha;","}"].join("\n"),n.colorTransform=["precision mediump float;","","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform float uColorMatrix[25];","","void main(void)","{","   vec4 c = texture2D(uSampler, vTextureCoord);","   ","   gl_FragColor.r =  (uColorMatrix[0] * c.r);","   gl_FragColor.r += (uColorMatrix[1] * c.g);","   gl_FragColor.r += (uColorMatrix[2] * c.b);","   gl_FragColor.r += (uColorMatrix[3] * c.a);","   gl_FragColor.r +=  uColorMatrix[4];","   ","   gl_FragColor.g =  (uColorMatrix[5] * c.r);","   gl_FragColor.g += (uColorMatrix[6] * c.g);","   gl_FragColor.g += (uColorMatrix[7] * c.b);","   gl_FragColor.g += (uColorMatrix[8] * c.a);","   gl_FragColor.g +=  uColorMatrix[9];","   ","   gl_FragColor.b =  (uColorMatrix[10] * c.r);","   gl_FragColor.b += (uColorMatrix[11] * c.g);","   gl_FragColor.b += (uColorMatrix[12] * c.b);","   gl_FragColor.b += (uColorMatrix[13] * c.a);","   gl_FragColor.b +=  uColorMatrix[14];","   ","   gl_FragColor.a =  (uColorMatrix[15] * c.r);","   gl_FragColor.a += (uColorMatrix[16] * c.g);","   gl_FragColor.a += (uColorMatrix[17] * c.b);","   gl_FragColor.a += (uColorMatrix[18] * c.a);","   gl_FragColor.a +=  uColorMatrix[19];","}"].join("\n"),n.fxaa=["precision lowp float;","","#ifndef FXAA_REDUCE_MIN","#define FXAA_REDUCE_MIN   (1.0/ 128.0)","#endif","#ifndef FXAA_REDUCE_MUL","#define FXAA_REDUCE_MUL   (1.0 / 8.0)","#endif","#ifndef FXAA_SPAN_MAX","#define FXAA_SPAN_MAX     8.0","#endif","","vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,","vec2 v_rgbNW, vec2 v_rgbNE,","vec2 v_rgbSW, vec2 v_rgbSE,","vec2 v_rgbM) {","vec4 color;","mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);","vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;","vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;","vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;","vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;","vec4 texColor = texture2D(tex, v_rgbM);","vec3 rgbM  = texColor.xyz;","vec3 luma = vec3(0.299, 0.587, 0.114);","float lumaNW = dot(rgbNW, luma);","float lumaNE = dot(rgbNE, luma);","float lumaSW = dot(rgbSW, luma);","float lumaSE = dot(rgbSE, luma);","float lumaM  = dot(rgbM,  luma);","float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));","float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));","","mediump vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","","float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *","    (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);","","float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);","dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),","        max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","            dir * rcpDirMin)) * inverseVP;","","vec3 rgbA = 0.5 * (","    texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +","    texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);","vec3 rgbB = rgbA * 0.5 + 0.25 * (","    texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +","    texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);","","float lumaB = dot(rgbB, luma);","if ((lumaB < lumaMin) || (lumaB > lumaMax))","    color = vec4(rgbA, texColor.a);","else","    color = vec4(rgbB, texColor.a);","return color;","}","","varying vec2 vTextureCoord;","varying vec2 vResolution;","","varying vec2 v_rgbNW;","varying vec2 v_rgbNE;","varying vec2 v_rgbSW;","varying vec2 v_rgbSE;","varying vec2 v_rgbM;","","uniform sampler2D uSampler;","","void main() {","    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);","}"].join("\n"),n.blur2=["precision lowp float;","","uniform sampler2D uSampler;","","uniform float uResolution;","uniform float uStrength;","uniform vec2 uBlurDirection;","","varying vec2 vTextureCoord;","","float offset[3];","float weight[3];","","void main()","{","    offset[0] = 0.0; offset[1] = 1.3846153846; offset[2] = 3.2307692308;","    weight[0] = 0.2270270270; weight[1] = 0.3162162162; weight[2] = 0.0702702703;","    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord)) * weight[0];","    float xDir = uBlurDirection.x / sqrt(uBlurDirection.x * uBlurDirection.x + uBlurDirection.y * uBlurDirection.y);","    float yDir = uBlurDirection.y / sqrt(uBlurDirection.x * uBlurDirection.x + uBlurDirection.y * uBlurDirection.y);","    for (int i = 1; i < 3; i++)","    {","        gl_FragColor += texture2D(uSampler, (vec2(vTextureCoord) + vec2(offset[i] * xDir, offset[i] * yDir) * uStrength / uResolution)) * weight[i];","        gl_FragColor += texture2D(uSampler, (vec2(vTextureCoord) - vec2(offset[i] * xDir, offset[i] * yDir) * uStrength / uResolution)) * weight[i];","    }","}"].join("\n"),n.copyImage=["precision mediump float;","","uniform sampler2D uSampler;","uniform float uAlpha;","","varying vec2 vTextureCoord;","","void main() {","    gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;","}"].join("\n")},{}],91:[function(e,t,r){var n=e("../_util/_util"),i=this.WebGLRenderingContext||window.WebGLRenderingContext,o=function(){function e(){this._glc=null,this._isDirty=!0,this._bufferType=0,this._elementGLType=0,this._webglBuffer=null,this._array=null,this._arrayType=null,this._typedArray=null}return e.create=function(t,r,n,i){var o=e.getTypedArrayType(n);if(null===o)return console.warn("Failed to create typed array whose elements are of WebGL type 0x"+n.toString(16)),null;var a=new e;return a._glc=t,a._elementGLType=n,a._webglBuffer=t.createBuffer(),null==a._webglBuffer?(console.warn("Failed to create WebGL buffer."),null):(a._arrayType=o,a._bufferType=i,a.setNewData(r),a.becomeDirty(),a.syncBufferData(),a)},Object.defineProperty(e.prototype,"webglBuffer",{get:function(){return this._webglBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementSize",{get:function(){return this._typedArray.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementCount",{get:function(){return this._typedArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementGLType",{get:function(){return this._elementGLType},enumerable:!0,configurable:!0}),e.prototype.setNewData=function(e){n._util.isUndefinedOrNull(e)?this._array=[]:this._array=e.slice()},e.prototype.becomeDirty=function(){this._isDirty=!0},e.prototype.syncBufferData=function(){if(this._isDirty){var e=this._arrayType;this._typedArray=new e(this._array),this._isDirty=!1}this._glc.bindBuffer(this._bufferType,this._webglBuffer),this._glc.bufferData(this._bufferType,this._typedArray,i.DYNAMIC_DRAW)},e.prototype.dispose=function(){this._glc.deleteBuffer(this._webglBuffer),this._array=null,this._typedArray=null,this._webglBuffer=null,this._glc=null},e.getTypedArrayType=function(e){switch(e){case i.FLOAT:return Float32Array;case i.UNSIGNED_SHORT:return Uint16Array;case i.UNSIGNED_INT:return Uint32Array;case i.UNSIGNED_BYTE:return Uint8Array;case i.INT:return Int32Array;case i.SHORT:return Int16Array;case i.BYTE:return Int8Array;default:return null}},e}();r.PackedArrayBuffer=o},{"../_util/_util":5}],92:[function(e,t,r){function n(e,t){return u._util.isUndefinedOrNull(e)?(console.warn("Cannot render a null RenderTarget2D onto another RenderTarget2D."),!1):null===e.texture?(console.warn("Cannot use a RenderTarget2D without texture-based frame buffer to render onto another RenderTarget2D."),!1):e.isRoot?(console.warn("Cannot use a root RenderTarget2D as source."),!1):e===t?(console.warn("Source and destination must not be the same RenderTarget2D."),!1):!0}var i=e("./RenderTarget2D"),o=e("./PackedArrayBuffer"),a=e("./ShaderID"),u=e("../_util/_util"),l=this.WebGLRenderingContext||window.WebGLRenderingContext,s=function(){function e(){}return e.renderPrimitives=function(e,t,r,n,i,o){e.shaderManager.selectShader(a.ShaderID.PRIMITIVE);var u,s=e.shaderManager.currentShader,c=e.context;t.activate(),s.syncUniforms(),r.syncBufferData(),u=s.getAttributeLocation("aVertexPosition"),c.vertexAttribPointer(u,3,r.elementGLType,!1,3*r.elementSize,0),c.enableVertexAttribArray(u),n.syncBufferData(),u=s.getAttributeLocation("aVertexColor"),c.vertexAttribPointer(u,4,n.elementGLType,!1,4*n.elementSize,0),c.enableVertexAttribArray(u),i.syncBufferData(),o&&t.clear(),c.viewport(0,0,t.originalWidth,t.originalHeight),c.drawElements(l.TRIANGLES,i.elementCount,i.elementGLType,0)},e.renderPrimitives2=function(e,t,r,n,i,o,u,s){e.shaderManager.selectShader(a.ShaderID.PRIMITIVE2);var c,h=e.shaderManager.currentShader,p=e.context;t.activate(),h.setOriginalSize([t.originalWidth,t.originalHeight]),h.setFlipX(o),h.setFlipY(u),h.syncUniforms(),r.syncBufferData(),c=h.getAttributeLocation("aVertexPosition"),p.vertexAttribPointer(c,3,r.elementGLType,!1,3*r.elementSize,0),p.enableVertexAttribArray(c),n.syncBufferData(),c=h.getAttributeLocation("aVertexColor"),p.vertexAttribPointer(c,4,n.elementGLType,!1,4*n.elementSize,0),p.enableVertexAttribArray(c),i.syncBufferData(),s&&t.clear(),p.viewport(0,0,t.originalWidth,t.originalHeight),p.drawElements(l.TRIANGLES,i.elementCount,i.elementGLType,0)},e.copyTargetContent=function(t,r,n,i,o,u){e.renderBuffered(t,r,n,a.ShaderID.REPLICATE,u,function(e){var t=e.shaderManager.currentShader;t.setFlipX(i),t.setFlipY(o),(i||o)&&(t.setOriginalSize([n.originalWidth,n.originalHeight]),t.setFitSize([n.fitWidth,n.fitHeight]))})},e.copyImageContent=function(t,r,n,i,o,u,l,s){e.renderBuffered(t,r,n,a.ShaderID.COPY_IMAGE,s,function(e){var t=e.shaderManager.currentShader;t.setFlipX(i),t.setFlipY(o),t.setAlpha(l),t.setTransform(u),(i||o)&&(t.setOriginalSize([n.originalWidth,n.originalHeight]),t.setFitSize([n.fitWidth,n.fitHeight]))})},e.renderImage=function(t,r,n,i){e.renderBuffered(t,r,n,a.ShaderID.COPY_IMAGE,i,function(e){var t=e.shaderManager.currentShader;t.setFlipX(!1),t.setFlipY(!1)})},e.renderBuffered=function(t,r,a,u,s,c){if(n(r,a)){var h=t.context;t.shaderManager.selectShader(u),c(t);var p=t.shaderManager.currentShader;if(p.setTexture(r.texture),p.syncUniforms(),null===e._glVertexPositionBuffer){var f=[0,r.fitHeight,0,r.fitWidth,r.fitHeight,0,0,0,0,r.fitWidth,0,0];e._glVertexPositionBuffer=o.PackedArrayBuffer.create(h,f,l.FLOAT,l.ARRAY_BUFFER)}var d;if(d=p.getAttributeLocation("aVertexPosition"),d>=0){var _=e._glVertexPositionBuffer;_.syncBufferData(),h.vertexAttribPointer(d,3,_.elementGLType,!1,3*_.elementSize,0),h.enableVertexAttribArray(d)}if(d=p.getAttributeLocation("aTextureCoord"),d>=0){var m=i.RenderTarget2D.textureCoords;m.syncBufferData(),h.vertexAttribPointer(d,2,m.elementGLType,!1,2*m.elementSize,0),h.enableVertexAttribArray(d)}var g=i.RenderTarget2D.textureIndices;g.syncBufferData(),a.activate(),s&&a.clear(),h.viewport(0,0,a.originalWidth,a.originalHeight),h.enable(l.SCISSOR_TEST),h.scissor(0,0,r.originalWidth,r.originalHeight),h.drawElements(l.TRIANGLES,g.elementCount,g.elementGLType,0),h.disable(l.SCISSOR_TEST)}},e._glVertexPositionBuffer=null,e}();r.RenderHelper=s},{"../_util/_util":5,"./PackedArrayBuffer":91,"./RenderTarget2D":93,"./ShaderID":95}],93:[function(e,t,r){function n(e){if(!u){var t=[0,1,1,1,0,0,1,0],r=[0,1,2,1,2,3];l.textureCoords=o.PackedArrayBuffer.create(e,t,a.FLOAT,a.ARRAY_BUFFER),l.textureIndices=o.PackedArrayBuffer.create(e,r,a.UNSIGNED_SHORT,a.ELEMENT_ARRAY_BUFFER),u=!0}}var i=e("../_util/_util"),o=e("./PackedArrayBuffer"),a=this.WebGLRenderingContext||window.WebGLRenderingContext,u=!1,l=function(){function e(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!1),this._glc=null,this._renderer=null,this._frameBuffer=null,this._depthBuffer=null,this._texture=null,this._originalWidth=0,this._originalHeight=0,this._fitWidth=0,this._fitHeight=0,this._image=null,this._isRoot=!1,u||n(e.context),this._renderer=e,this.__initialize(e.context,e.view.width,e.view.height,t,r)}return e.prototype.dispose=function(){var e=this._glc;e.deleteTexture(this._texture),e.deleteFramebuffer(this._frameBuffer),e.deleteRenderbuffer(this._depthBuffer),this._texture=null,this._frameBuffer=null,this._depthBuffer=null,this._glc=null,this._renderer=null},Object.defineProperty(e.prototype,"originalWidth",{get:function(){return this._originalWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalHeight",{get:function(){return this._originalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitWidth",{get:function(){return this._fitWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitHeight",{get:function(){return this._fitHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this._isRoot},enumerable:!0,configurable:!0}),e.prototype.activate=function(){var e=this._glc;e.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer)},e.prototype.clear=function(){this.activate();var e=this._glc;e.viewport(0,0,this._fitWidth,this._fitHeight),e.clearColor(0,0,0,0),e.clearDepth(0),e.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},e.prototype.resize=function(e,t){this.__resize(e,t,!0)},e.prototype.updateImageContent=function(){var e=this._image;if(null!==this._texture&&null!==e){var t=this._glc;t.bindTexture(a.TEXTURE_2D,this._texture),t.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e),t.bindTexture(a.TEXTURE_2D,null)}},e.prototype.updateImageSize=function(){var e=this._image;if(null!==this._texture&&null!==e){try{e.width=i._util.power2Roundup(e.width),e.height=i._util.power2Roundup(e.height)}catch(t){}this._originalWidth=this._fitWidth=e.width,this._originalHeight=this._fitHeight=e.height}},e.prototype.__initialize=function(e,t,r,n,i){function o(t){e.deleteFramebuffer(this._frameBuffer),e.deleteRenderbuffer(this._depthBuffer),e.deleteTexture(this._texture),console.warn(t)}if(this._glc=e,this._isRoot=i,this._image=n,!i){if(this._frameBuffer=e.createFramebuffer(),null===this._frameBuffer)return o("Failed to create the frame buffer.");if(this._depthBuffer=e.createRenderbuffer(),null===this._depthBuffer)return o("Failed to create the depth buffer.");if(this._texture=e.createTexture(),null===this._texture)return o("Failed to create the underlying texture.")}if(this.__resize(t,r,!1),!i){e.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer),e.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._texture,0),e.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,this._depthBuffer);var u=e.checkFramebufferStatus(a.FRAMEBUFFER);if(u!==a.FRAMEBUFFER_COMPLETE)return o("Frame buffer is not complete: code 0x"+u.toString(16))}e.bindRenderbuffer(a.RENDERBUFFER,null),e.bindTexture(a.TEXTURE_2D,null),e.bindFramebuffer(a.FRAMEBUFFER,null)},e.prototype.__resize=function(e,t,r){var n=this._glc,o=this._image,u=this._isRoot,l=this._texture;null===o?(e|=0,t|=0,this._originalWidth=e,this._originalHeight=t,i._util.isPowerOfTwo(e)||(e=i._util.power2Roundup(e)),i._util.isPowerOfTwo(t)||(t=i._util.power2Roundup(t)),this._fitWidth=e,this._fitHeight=t):(e=this._originalWidth=this._fitWidth=o.width,t=this._originalHeight=this._fitHeight=o.height),null!==l&&(n.bindTexture(a.TEXTURE_2D,this._texture),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)),null!==o?null!==l&&n.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,o):(n.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,0),null!==l&&n.texImage2D(a.TEXTURE_2D,0,a.RGBA,e,t,0,a.RGBA,a.UNSIGNED_BYTE,null)),u||(n.bindRenderbuffer(a.RENDERBUFFER,this._depthBuffer),n.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,e,t)),r&&(n.bindRenderbuffer(a.RENDERBUFFER,null),n.bindTexture(a.TEXTURE_2D,null))},e.textureCoords=null,e.textureIndices=null,e}();r.RenderTarget2D=l},{"../_util/_util":5,"./PackedArrayBuffer":91}],94:[function(e,t,r){function n(e,t,r){var n=e.createShader(r);if(null===n)return console.warn("Cannot create shader."),null;e.shaderSource(n,t),e.compileShader(n);var i=e.getShaderParameter(n,l.COMPILE_STATUS);if(!i){var o=e.getShaderInfoLog(n);return console.warn("Failed to load shader: "+o),e.deleteShader(n),null}return n}var i=e("./VertexShaders"),o=e("./FragmentShaders"),a=e("./WebGLDataType"),u=e("../_util/_util"),l=this.WebGLRenderingContext||window.WebGLRenderingContext,s=function(){function e(e,t,r,n,i){this._shaderManager=null,this._vertexSource=null,this._fragmentSource=null,this._vertexShader=null,this._fragmentShader=null,this._program=null,this._uniforms=null,this._attributes=null,this._id=-1,this._glc=null,this._shaderManager=e,this._vertexSource=t,this._fragmentSource=r,this._id=e.getNextAvailableID(),this.__initialize(e.context,t,r),this.select(),u._util.isUndefinedOrNull(n)||u._util.isUndefinedOrNull(i)?(this._uniforms=new Map,this._attributes=new Map,this.__localInit(e,this._uniforms,this._attributes)):(this._uniforms=n,this._attributes=i),this.__cacheUniformLocations(),this.__cacheAttributeLocations(),this.syncUniforms()}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this._glc;e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._glc=null,this._uniforms=null,this._attributes=null,this._vertexShader=null,this._fragmentShader=null,this._vertexSource=null,this._fragmentSource=null,this._shaderManager=null},e.prototype.syncUniforms=function(){var e=this;this._uniforms.forEach(function(t){e.__syncUniform(t)})},e.prototype.changeValue=function(e,t){var r=this._uniforms.get(e);void 0!==r&&null!==r&&t(r)},e.prototype.select=function(){this._glc.useProgram(this._program)},e.prototype.getUniformLocation=function(e){return null!==this._program?this._glc.getUniformLocation(this._program,e):null},e.prototype.getAttributeLocation=function(e){return null!==this._program?this._glc.getAttribLocation(this._program,e):-1},Object.defineProperty(e.prototype,"vertexSource",{get:function(){return this._vertexSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fragmentSource",{get:function(){return this._fragmentSource},enumerable:!0,configurable:!0}),e.prototype.__initialize=function(e,t,r){function i(t,r){null!==this._vertexShader&&e.deleteShader(this._vertexShader),null!==this._fragmentShader&&e.deleteShader(this._fragmentShader),null!==this._program&&e.deleteProgram(this._program),this._vertexShader=this._fragmentShader=this._program=null,void 0!==t&&null!==t&&(void 0!==r?console.warn(t,r):console.warn(t))}if(this._glc=e,this._vertexShader=n(e,t,l.VERTEX_SHADER),this._fragmentShader=n(e,r,l.FRAGMENT_SHADER),null===this._vertexShader||null===this._fragmentShader)return i("Vertex shader or fragment shader is null.");if(this._program=e.createProgram(),null===this._program)return i("Failed to create program.");e.attachShader(this._program,this._vertexShader),e.attachShader(this._program,this._fragmentShader),e.linkProgram(this._program);var o=e.getProgramParameter(this._program,l.LINK_STATUS);if(!o){var a=e.getProgramInfoLog(this._program);return i("Failed to link program: ",a)}},e.prototype.__syncUniform=function(e){var t=e.location,r=e.value,n=this._glc,i=0,o=0;switch(e.type){case a.WebGLDataType.UBool:n.uniform1i(t,r?1:0);break;case a.WebGLDataType.U1I:n.uniform1i(t,r);break;case a.WebGLDataType.U1F:n.uniform1f(t,r);break;case a.WebGLDataType.U2F:n.uniform2f(t,r[0],r[1]);break;case a.WebGLDataType.U3F:n.uniform3f(t,r[0],r[1],r[2]);break;case a.WebGLDataType.U4F:n.uniform4f(t,r[0],r[1],r[2],r[3]);break;case a.WebGLDataType.UV2:n.uniform2f(t,r.x,r.y);break;case a.WebGLDataType.UV3:n.uniform3f(t,r.x,r.y,r.z);break;case a.WebGLDataType.UV4:n.uniform4f(t,r.x,r.y,r.z,r.w);break;case a.WebGLDataType.U1IV:n.uniform1iv(t,r);break;case a.WebGLDataType.U2IV:n.uniform2iv(t,r);break;case a.WebGLDataType.U3IV:n.uniform3iv(t,r);break;case a.WebGLDataType.U4IV:n.uniform4iv(t,r);break;case a.WebGLDataType.U1FV:n.uniform1fv(t,r);break;case a.WebGLDataType.U2FV:n.uniform2fv(t,r);break;case a.WebGLDataType.U3FV:n.uniform3fv(t,r);break;case a.WebGLDataType.U4FV:n.uniform4fv(t,r);break;case a.WebGLDataType.UMat2:n.uniformMatrix2fv(t,e.transpose,r);break;case a.WebGLDataType.UMat3:n.uniformMatrix3fv(t,e.transpose,r);break;case a.WebGLDataType.UMat4:n.uniformMatrix4fv(t,e.transpose,r);break;case a.WebGLDataType.UIV:n.uniform3iv(t,r);break;case a.WebGLDataType.UFV:n.uniform3fv(t,r);break;case a.WebGLDataType.UV2V:for(e.array||(e.array=new Float32Array(2*r.length)),i=0,o=r.length;o>i;i++)e.array[2*i]=r[i].x,e.array[2*i+1]=r[i].y;n.uniform2fv(t,e.array);break;case a.WebGLDataType.UV3V:for(e.array||(e.array=new Float32Array(3*r.length)),i=0,o=r.length;o>i;i++)e.array[3*i]=r[i].x,e.array[3*i+1]=r[i].y,e.array[3*i+2]=r[i].z;n.uniform2fv(t,e.array);break;case a.WebGLDataType.UV4V:for(e.array||(e.array=new Float32Array(4*r.length)),i=0,o=r.length;o>i;i++)e.array[4*i]=r[i].x,e.array[4*i+1]=r[i].y,e.array[4*i+2]=r[i].z,
e.array[4*i+3]=r[i].w;n.uniform2fv(t,e.array);break;case a.WebGLDataType.USampler2D:n.activeTexture(l["TEXTURE"+r.toString()]),n.bindTexture(l.TEXTURE_2D,e.texture),n.uniform1i(t,r);break;default:console.warn("Uniform ["+e.name+"]: unknown format "+e.type)}},e.prototype.__cacheUniformLocations=function(){var e=this._glc,t=this._program;this._uniforms.forEach(function(r,n){r.location=e.getUniformLocation(t,n)})},e.prototype.__cacheAttributeLocations=function(){var e=this._glc,t=this._program;this._attributes.forEach(function(r,n){r.location=e.getAttribLocation(t,n)})},e.prototype.__localInit=function(e,t,r){},e.SHADER_CLASS_NAME="ShaderBase",e.FRAGMENT_SOURCE=o.FragmentShaders.buffered,e.VERTEX_SOURCE=i.VertexShaders.buffered,e}();r.ShaderBase=s},{"../_util/_util":5,"./FragmentShaders":90,"./VertexShaders":98,"./WebGLDataType":99}],95:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"PRIMITIVE",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BLUR_X",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BLUR_Y",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REPLICATE",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"COLOR_TRANSFORM",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FXAA",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BLUR2",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(e,"COPY_IMAGE",{get:function(){return 7},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PRIMITIVE2",{get:function(){return 8},enumerable:!0,configurable:!0}),e}();r.ShaderID=n},{}],96:[function(e,t,r){var n=e("./shaders/PrimitiveShader"),i=e("./shaders/BlurXShader"),o=e("./shaders/BlurYShader"),a=e("./shaders/ReplicateShader"),u=e("./shaders/ColorTransformShader"),l=e("./shaders/FxaaShader"),s=e("./shaders/Blur2Shader"),c=e("./shaders/CopyImageShader"),h=e("./shaders/Primitive2Shader"),p=function(){function t(e){this._renderer=null,this._shaders=null,this._currentShader=null,this._renderer=e,this._shaders=[],this.__insertShaders()}return t.prototype.dispose=function(){for(var e=0;e<this._shaders.length;++e)this._shaders[e].dispose();this._currentShader=null,this._renderer=null,this._shaders=null},t.prototype.getNextAvailableID=function(){return this._shaders.length},t.prototype.loadShader=function(t,r,n){var i=-1;try{var o=e("./shaders/"+t+"Shader"),a=(o.SHADER_CLASS_NAME,null);a=new o(this,o.VERTEX_SOURCE,o.FRAGMENT_SOURCE,r,n),this._shaders.push(a),i=a.id}catch(u){}return i},t.prototype.selectShader=function(e){var t=this.__getShader(e);null!==t&&(t.select(),this._currentShader=t)},Object.defineProperty(t.prototype,"currentShader",{get:function(){return this._currentShader},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._renderer.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),t.prototype.__getShader=function(e){var t=null;try{t=this._shaders[e]}catch(r){}return t},t.prototype.__insertShaders=function(){var e=this._shaders;e.push(new n.PrimitiveShader(this)),e.push(new i.BlurXShader(this)),e.push(new o.BlurYShader(this)),e.push(new a.ReplicateShader(this)),e.push(new u.ColorTransformShader(this)),e.push(new l.FxaaShader(this)),e.push(new s.Blur2Shader(this)),e.push(new c.CopyImageShader(this)),e.push(new h.Primitive2Shader(this))},t}();r.ShaderManager=p},{"./shaders/Blur2Shader":117,"./shaders/BlurXShader":118,"./shaders/BlurYShader":119,"./shaders/ColorTransformShader":121,"./shaders/CopyImageShader":122,"./shaders/FxaaShader":123,"./shaders/Primitive2Shader":124,"./shaders/PrimitiveShader":125,"./shaders/ReplicateShader":126}],97:[function(e,t,r){var n=e("./WebGLDataType"),i=function(){function e(){this.name=null,this.type=n.WebGLDataType.UUnknown,this.location=null,this.value=void 0,this.transpose=!1,this.array=null,this.texture=null}return e}();r.UniformCache=i},{"./WebGLDataType":99}],98:[function(e,t,r){var n=Object.create(null),i=function(){function e(){}return Object.defineProperty(e,"buffered",{get:function(){return n.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"blurX",{get:function(){return n.blurX},enumerable:!0,configurable:!0}),Object.defineProperty(e,"blurY",{get:function(){return n.blurY},enumerable:!0,configurable:!0}),Object.defineProperty(e,"primitive",{get:function(){return n.primitive},enumerable:!0,configurable:!0}),Object.defineProperty(e,"replicate",{get:function(){return n.replicate},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fxaa",{get:function(){return n.fxaa},enumerable:!0,configurable:!0}),Object.defineProperty(e,"blur2",{get:function(){return n.blur2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"copyImage",{get:function(){return n.copyImage},enumerable:!0,configurable:!0}),Object.defineProperty(e,"primitive2",{get:function(){return n.primitive2},enumerable:!0,configurable:!0}),e}();r.VertexShaders=i,n.buffered=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","","uniform mat4 uProjectionMatrix;","","varying vec2 vTextureCoord;","","void main() {","   gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),n.blurX=["precision mediump float;","","attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","","uniform float uStrength;","uniform mat4 uProjectionMatrix;","","varying vec2 vTextureCoord;","varying vec2 vBlurTexCoords[6];","","void main()","{","    gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);","    vTextureCoord = aTextureCoord;","","    vBlurTexCoords[0] = aTextureCoord + vec2(-0.012 * uStrength, 0.0);","    vBlurTexCoords[1] = aTextureCoord + vec2(-0.008 * uStrength, 0.0);","    vBlurTexCoords[2] = aTextureCoord + vec2(-0.004 * uStrength, 0.0);","    vBlurTexCoords[3] = aTextureCoord + vec2( 0.004 * uStrength, 0.0);","    vBlurTexCoords[4] = aTextureCoord + vec2( 0.008 * uStrength, 0.0);","    vBlurTexCoords[5] = aTextureCoord + vec2( 0.012 * uStrength, 0.0);","}"].join("\n"),n.blurY=["precision mediump float;","","attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","","uniform float uStrength;","uniform mat4 uProjectionMatrix;","","varying vec2 vTextureCoord;","varying vec2 vBlurTexCoords[6];","","void main()","{","    gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);","    vTextureCoord = aTextureCoord;","","    vBlurTexCoords[0] = aTextureCoord + vec2(0.0, -0.012 * uStrength);","    vBlurTexCoords[1] = aTextureCoord + vec2(0.0, -0.008 * uStrength);","    vBlurTexCoords[2] = aTextureCoord + vec2(0.0, -0.004 * uStrength);","    vBlurTexCoords[3] = aTextureCoord + vec2(0.0,  0.004 * uStrength);","    vBlurTexCoords[4] = aTextureCoord + vec2(0.0,  0.008 * uStrength);","    vBlurTexCoords[5] = aTextureCoord + vec2(0.0,  0.012 * uStrength);","}"].join("\n"),n.primitive=["precision mediump float;","","attribute vec3 aVertexPosition;","attribute vec4 aVertexColor;","","uniform mat4 uProjectionMatrix;","uniform mat4 uTransformMatrix;","","varying vec4 vVertexColor;","","void main() {","   gl_Position = uProjectionMatrix * uTransformMatrix * vec4(aVertexPosition.xyz, 1.0);","   vVertexColor = aVertexColor;","}"].join("\n"),n.replicate=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","","uniform mat4 uProjectionMatrix;","uniform vec2 uOriginalSize;","uniform vec2 uFitSize;","uniform bool uFlipX;","uniform bool uFlipY;","","varying vec2 vTextureCoord;","","void main() {","    vec3 newVertexPostion = aVertexPosition;","   vec2 newTextureCoord = aTextureCoord;","   if (uFlipX) {","       newTextureCoord.x = 1.0 - newTextureCoord.x;","       newVertexPostion.x -= (uFitSize - uOriginalSize).x;","   }","   if (uFlipY) {","       newTextureCoord.y = 1.0 - newTextureCoord.y;","       newVertexPostion.y -= (uFitSize - uOriginalSize).y;","   }","   gl_Position = uProjectionMatrix * vec4(newVertexPostion.xyz, 1.0);","   vTextureCoord = newTextureCoord;","}"].join("\n"),n.fxaa=["precision mediump float;","","attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","","varying vec2 vTextureCoord;","varying vec2 vResolution;","","varying vec2 v_rgbNW;","varying vec2 v_rgbNE;","varying vec2 v_rgbSW;","varying vec2 v_rgbSE;","varying vec2 v_rgbM;","","void texcoords(vec2 fragCoord, vec2 resolution,","   out vec2 v_rgbNW, out vec2 v_rgbNE,","   out vec2 v_rgbSW, out vec2 v_rgbSE,","   out vec2 v_rgbM) {","   vec2 inverseVP = 1.0 / resolution.xy;","   v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;","   v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;","   v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;","   v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;","   v_rgbM = vec2(fragCoord * inverseVP);","}","","void main() {","   gl_Position = uProjectionMatrix * vec4(aVertexPosition, 1.0);","   vTextureCoord = aTextureCoord;","   vResolution = uResolution;","   ","   texcoords(aTextureCoord * uResolution, uResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);","}"].join("\n"),n.blur2=["precision mediump float;","","attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","","uniform mat4 uProjectionMatrix;","","varying vec2 vTextureCoord;","","void main()","{","    gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);","    vTextureCoord = aTextureCoord;","}"].join("\n"),n.copyImage=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","","uniform mat4 uProjectionMatrix;","uniform mat4 uTransformMatrix;","uniform vec2 uOriginalSize;","uniform vec2 uFitSize;","uniform bool uFlipX;","uniform bool uFlipY;","","varying vec2 vTextureCoord;","","void main() {","    vec3 newVertexPostion = aVertexPosition;","    vec2 newTextureCoord = aTextureCoord;","    if (uFlipX) {","        newTextureCoord.x = 1.0 - newTextureCoord.x;","        newVertexPostion.x -= (uFitSize - uOriginalSize).x;","    }","    if (uFlipY) {","        newTextureCoord.y = 1.0 - newTextureCoord.y;","        newVertexPostion.y -= (uFitSize - uOriginalSize).y;","    }","    gl_Position = uProjectionMatrix * uTransformMatrix * vec4(newVertexPostion.xyz, 1.0);","    vTextureCoord = newTextureCoord;","}"].join("\n"),n.primitive2=["precision mediump float;","","attribute vec3 aVertexPosition;","attribute vec4 aVertexColor;","","uniform mat4 uProjectionMatrix;","uniform mat4 uTransformMatrix;","uniform vec2 uOriginalSize;","uniform bool uFlipX;","uniform bool uFlipY;","","varying vec4 vVertexColor;","","void main() {","    vec3 newVertexPostion = aVertexPosition;","    if (uFlipX) {","        newVertexPostion.x = uOriginalSize.x - newVertexPostion.x;","    }","    if (uFlipY) {","        newVertexPostion.y = uOriginalSize.y - newVertexPostion.y;","    }","    gl_Position = uProjectionMatrix * uTransformMatrix * vec4(newVertexPostion.xyz, 1.0);","    vVertexColor = aVertexColor;","}"].join("\n")},{}],99:[function(e,t,r){!function(e){e[e.UUnknown=0]="UUnknown",e[e.UBool=1]="UBool",e[e.U1I=2]="U1I",e[e.U1F=3]="U1F",e[e.U2F=4]="U2F",e[e.U3F=5]="U3F",e[e.U4F=6]="U4F",e[e.UV2=7]="UV2",e[e.UV3=8]="UV3",e[e.UV4=9]="UV4",e[e.U1IV=10]="U1IV",e[e.U2IV=11]="U2IV",e[e.U3IV=12]="U3IV",e[e.U4IV=13]="U4IV",e[e.U1FV=14]="U1FV",e[e.U2FV=15]="U2FV",e[e.U3FV=16]="U3FV",e[e.U4FV=17]="U4FV",e[e.UMat2=18]="UMat2",e[e.UMat3=19]="UMat3",e[e.UMat4=20]="UMat4",e[e.UIV=21]="UIV",e[e.UFV=22]="UFV",e[e.UV2V=23]="UV2V",e[e.UV3V=24]="UV3V",e[e.UV4V=25]="UV4V",e[e.USampler2D=26]="USampler2D"}(r.WebGLDataType||(r.WebGLDataType={}));r.WebGLDataType},{}],100:[function(e,t,r){var n=e("libtess"),i=e("./ShaderManager"),o=e("./FilterManager"),a=e("./RenderTarget2D"),u=e("./WebGLUtils"),l=e("../_util/_util"),s=e("../flash/display/BlendMode"),c=this.WebGLRenderingContext||window.WebGLRenderingContext,h=function(){function e(e,t,r){this._currentRenderTarget=null,this._currentBlendMode=null,this._screenTarget=null,this._filterManager=null,this._shaderManager=null,this._tessellator=null,this._context=null,this._options=null,this._isInitialized=!1,this.__initialize(e,t,r)}return e.prototype.clear=function(){null!==this._screenTarget&&this._screenTarget.clear()},e.prototype.dispose=function(){this._isInitialized&&(this._screenTarget.dispose(),this._filterManager.dispose(),this._shaderManager.dispose(),this._filterManager=null,this._shaderManager=null,this._screenTarget=null,this._context=null,null!==this._view.parentNode&&void 0!==this._view.parentNode&&this._view.parentNode.removeChild(this._view),this._view=null)},e.prototype.setRenderTarget=function(e){void 0===e&&(e=null),(e!==this._currentRenderTarget||null===e)&&(l._util.isUndefinedOrNull(e)?this._currentRenderTarget=this._screenTarget:this._currentRenderTarget=e,this._currentRenderTarget.activate())},Object.defineProperty(e.prototype,"currentRenderTarget",{get:function(){return this._currentRenderTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaderManager",{get:function(){return this._shaderManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterManager",{get:function(){return this._filterManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tessellator",{get:function(){return this._tessellator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenTarget",{get:function(){return this._screenTarget},enumerable:!0,configurable:!0}),e.prototype.createRenderTarget=function(e){return void 0===e&&(e=null),new a.RenderTarget2D(this,e,!1)},e.prototype.createRootRenderTarget=function(e){return void 0===e&&(e=null),new a.RenderTarget2D(this,e,!0)},e.prototype.releaseRenderTarget=function(e){null!==e&&void 0!==e&&e.dispose()},e.prototype.setBlendMode=function(e){if(this._isInitialized&&this._currentBlendMode!==e){var t=p[e]||p[s.BlendMode.NORMAL],r=this._context;t[0]>=0?r.blendEquation(c.FUNC_ADD):r.blendEquation(c.FUNC_SUBTRACT),r.blendFunc(t[1],t[2]),this._currentBlendMode=e}},e.prototype.__initialize=function(e,t,r){if(!this._isInitialized){this._isInitialized=!0,this._options=l._util.deepClone(r);var a=window.document.createElement("canvas");a.className="glantern-view",a.width=e,a.height=t;var h=Object.create(null);h.alpha=r.transparent,h.antialias=r.antialias,h.premultipliedAlpha=!0,h.depth=!1,this._context=u.WebGLUtils.setupWebGL(a,h),this._view=a;var p=this._context;p.disable(c.DEPTH_TEST),p.disable(c.CULL_FACE),p.enable(c.BLEND),this.setBlendMode(s.BlendMode.NORMAL),this._screenTarget=this.createRootRenderTarget(),a.addEventListener("webglcontextlost",this.onContextLost.bind(this)),a.addEventListener("webglcontextrestored",this.onContextRestored.bind(this)),this._tessellator=new n.GluTesselator,this._shaderManager=new i.ShaderManager(this),this._filterManager=new o.FilterManager(this),this.setRenderTarget(null),this.__initializeTessellator()}},e.prototype.__initializeTessellator=function(){var e=this._tessellator;e.gluTessCallback(n.gluEnum.GLU_TESS_VERTEX_DATA,function(e,t){t[t.length-1].push(e[0],e[1],e[2])}),e.gluTessCallback(n.gluEnum.GLU_TESS_BEGIN_DATA,function(e,t){e!==n.primitiveType.GL_TRIANGLES&&console.warn("{TESS} expected TRIANGLES but got type: "+e),t.push([])}),e.gluTessCallback(n.gluEnum.GLU_TESS_ERROR,function(e){console.warn("{TESS} error number: ",e)}),e.gluTessCallback(n.gluEnum.GLU_TESS_COMBINE,function(e,t,r){return[e[0],e[1],e[2]]}),e.gluTessCallback(n.gluEnum.GLU_TESS_EDGE_FLAG,function(e){})},e.prototype.onContextLost=function(e){},e.prototype.onContextRestored=function(e){},e.DEFAULT_OPTIONS={antialias:!0,depth:!1,transparent:!0},e}();r.WebGLRenderer=h;var p=Object.create(null);p[s.BlendMode.ADD]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.ALPHA]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.DARKEN]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.DIFFERENCE]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.ERASE]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.HARDLIGHT]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.INVERT]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.LAYER]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.LIGHTEN]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.MULTIPLY]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.NORMAL]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.OVERLAY]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.SCREEN]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.SHADER]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[s.BlendMode.SUBTRACT]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA]},{"../_util/_util":5,"../flash/display/BlendMode":27,"./FilterManager":89,"./RenderTarget2D":93,"./ShaderManager":96,"./WebGLUtils":101,libtess:179}],101:[function(e,t,r){function n(e){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>"}function i(e,t){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,i=0;i<r.length;++i){try{n=e.getContext(r[i],t)}catch(o){}if(n)break}return n}var o=this.WebGLRenderingContext||window.WebGLRenderingContext,a=function(){function e(){}return e.setupWebGL=function(e,t){function r(t){var r=n(t);console.error(r);var i=e.parentElement;i&&(i.innerHTML=r)}if(void 0===o)return r(u),null;var a=i(e,t);return null==a&&r(l),a},e}();r.WebGLUtils=a;var u='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',l='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},{}],102:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../_util/_util"),o=e("../FilterBase"),a=e("../RenderHelper"),u=e("../ShaderID"),l=function(e){function t(t){e.call(this,t),this._tempTarget=null,this._strengthX=5,this._strengthY=5,this._pass=1,this._tempTarget=t.renderer.createRenderTarget()}return n(t,e),Object.defineProperty(t.prototype,"strengthX",{get:function(){return this._strengthX},set:function(e){0>e&&(e=1),this._strengthX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strengthY",{get:function(){return this._strengthY},set:function(e){0>e&&(e=1),this._strengthY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|i._util.limitInto(e,1,3),this._pass=e},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){var i=this,o=3,l=t,s=this._tempTarget;s.clear();for(var c,h=0;h<this.pass*o;++h)a.RenderHelper.renderBuffered(e,l,s,u.ShaderID.BLUR2,!0,function(e){var r=e.shaderManager.currentShader;r.setStrength(i.strengthX/4/i.pass/(l.fitWidth/l.originalWidth)),r.setResolution(t.fitWidth),r.setBlurDirection([1,0])}),c=l,l=s,s=c;for(var h=0;h<this.pass*o;++h)a.RenderHelper.renderBuffered(e,l,s,u.ShaderID.BLUR2,!0,function(e){var r=e.shaderManager.currentShader;r.setStrength(i.strengthY/4/i.pass/(l.fitWidth/l.originalWidth)),r.setResolution(t.fitHeight),r.setBlurDirection([0,1])}),c=l,l=s,s=c;a.RenderHelper.copyTargetContent(e,l,r,this.flipX,this.flipY,n)},t.prototype.__initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},t.prototype.__dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},t}(o.FilterBase);r.Blur2Filter=l},{"../../_util/_util":5,"../FilterBase":88,"../RenderHelper":92,"../ShaderID":95}],103:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BlurYFilter"),o=e("./BlurXFilter"),a=e("../../_util/_util"),u=e("../FilterBase"),l=function(e){function t(t){e.call(this,t),this._tempTarget=null,this._strengthX=5,this._strengthY=5,this._pass=1,this._blurXFilter=null,this._blurYFilter=null}return n(t,e),Object.defineProperty(t.prototype,"strengthX",{get:function(){return this._strengthX},set:function(e){0>e&&(e=1),this._strengthX=e,null!==this._blurXFilter&&(this._blurXFilter.strength=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strengthY",{get:function(){return this._strengthY},set:function(e){0>e&&(e=1),this._strengthY=e,null!==this._blurYFilter&&(this._blurYFilter.strength=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|a._util.limitInto(e,1,3),this._pass=e,null!==this._blurXFilter&&(this._blurXFilter.pass=e),null!==this._blurYFilter&&(this._blurYFilter.pass=e)},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){this._blurXFilter.process(e,t,this._tempTarget,!0),this._blurYFilter.process(e,this._tempTarget,r,n)},t.prototype.__initialize=function(){this._blurXFilter=new o.BlurXFilter(this.filterManager),this._blurYFilter=new i.BlurYFilter(this.filterManager),this._blurXFilter.initialize(),this._blurYFilter.initialize(),this._blurXFilter.strength=this.strengthX,this._blurYFilter.strength=this.strengthY,this._blurXFilter.pass=this.pass,this._blurYFilter.pass=this.pass,this._blurXFilter.flipY=!1,this._tempTarget=this.filterManager.renderer.createRenderTarget()},t.prototype.__dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null,this._blurXFilter.dispose(),this._blurYFilter.dispose(),this._blurXFilter=this._blurYFilter=null},t}(u.FilterBase);r.BlurFilter=l},{"../../_util/_util":5,"../FilterBase":88,"./BlurXFilter":104,"./BlurYFilter":105}],104:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../_util/_util"),o=e("../FilterBase"),a=e("../ShaderID"),u=e("../RenderHelper"),l=function(e){function t(t){e.call(this,t),this._strength=5,this._pass=1,this._tempTarget=null}return n(t,e),Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},set:function(e){0>e&&(e=1),this._strength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|i._util.limitInto(e,1,3),this._pass=e},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){var i=this,o=3,l=t,s=this._tempTarget;s.clear();for(var c,h=0;h<o*this.pass;++h)u.RenderHelper.renderBuffered(e,l,s,a.ShaderID.BLUR_X,!0,function(e){var t=e.shaderManager.currentShader;t.setStrength(i.strength/4/i.pass/(l.fitWidth/l.originalWidth))}),c=l,l=s,s=c;u.RenderHelper.copyTargetContent(e,l,r,this.flipX,this.flipY,n)},t.prototype.__initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},t.prototype.__dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},t}(o.FilterBase);r.BlurXFilter=l},{"../../_util/_util":5,"../FilterBase":88,"../RenderHelper":92,"../ShaderID":95}],105:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../_util/_util"),o=e("../FilterBase"),a=e("../ShaderID"),u=e("../RenderHelper"),l=function(e){function t(t){e.call(this,t),this._strength=5,this._pass=1,this._tempTarget=null}return n(t,e),Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},set:function(e){0>e&&(e=1),this._strength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|i._util.limitInto(e,1,3),this._pass=e},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){var i=this,o=3,l=t,s=this._tempTarget;s.clear();for(var c,h=0;h<o*this.pass;++h)u.RenderHelper.renderBuffered(e,l,s,a.ShaderID.BLUR_Y,!0,function(e){var t=e.shaderManager.currentShader;t.setStrength(i.strength/4/i.pass/(l.fitWidth/l.originalWidth))}),c=l,l=s,s=c;u.RenderHelper.copyTargetContent(e,l,r,this.flipX,this.flipY,n)},t.prototype.__initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},t.prototype.__dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},t}(o.FilterBase);r.BlurYFilter=l},{"../../_util/_util":5,"../FilterBase":88,"../RenderHelper":92,"../ShaderID":95}],106:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../FilterBase"),o=e("../RenderHelper"),a=e("../ShaderID"),u=function(e){function t(t){e.call(this,t),this._colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this._tempTarget=null}return n(t,e),t.prototype.setColorMatrix=function(e){this._colorMatrix=e.slice()},t.prototype.process=function(e,t,r,n){var i=this;o.RenderHelper.renderBuffered(e,t,this._tempTarget,a.ShaderID.COLOR_TRANSFORM,!0,function(e){var t=e.shaderManager.currentShader;t.setColorMatrix(i._colorMatrix)}),o.RenderHelper.copyTargetContent(e,this._tempTarget,r,this.flipX,this.flipY,n)},t.prototype.__initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},t.prototype.__dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},t}(i.FilterBase);r.ColorTransformFilter=u},{"../FilterBase":88,"../RenderHelper":92,"../ShaderID":95}],107:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./ColorTransformFilter"),o=e("../../_util/_util"),a=e("../FilterBase"),u=e("./Blur2Filter"),l=e("../RenderHelper"),s=function(e){function t(t){e.call(this,t),this._strengthX=5,this._strengthY=5,this._pass=1,this._colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this._blurFilter=null,this._colorTransformFilter=null,this._tempOriginalTarget=null,this._tempColorTransformedTarget=null}return n(t,e),Object.defineProperty(t.prototype,"strengthX",{get:function(){return this._strengthX},set:function(e){0>e&&(e=1),this._strengthX=e,null!==this._blurFilter&&(this._blurFilter.strengthX=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strengthY",{get:function(){return this._strengthY},set:function(e){0>e&&(e=1),this._strengthY=e,null!==this._blurFilter&&(this._blurFilter.strengthY=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|o._util.limitInto(e,1,3),this._pass=e,null!==this._blurFilter&&(this._blurFilter.pass=e)},enumerable:!0,configurable:!0}),t.prototype.setColorMatrix=function(e){null!==this._colorTransformFilter&&this._colorTransformFilter.setColorMatrix(e),this._colorMatrix=e.slice()},t.prototype.process=function(e,t,r,n){l.RenderHelper.copyTargetContent(e,t,this._tempOriginalTarget,!1,!1,!0),this._colorTransformFilter.process(e,t,this._tempColorTransformedTarget,!0),this._blurFilter.process(e,this._tempColorTransformedTarget,r,!1),l.RenderHelper.copyTargetContent(e,this._tempOriginalTarget,r,this.flipX,this.flipY,!1)},t.prototype.__initialize=function(){this._blurFilter=new u.Blur2Filter(this.filterManager),this._colorTransformFilter=new i.ColorTransformFilter(this.filterManager),this._blurFilter.initialize(),this._colorTransformFilter.initialize(),this._blurFilter.strengthX=this.strengthX,this._blurFilter.strengthY=this.strengthY,this._blurFilter.pass=this.pass,this._colorTransformFilter.setColorMatrix(this._colorMatrix),this._tempOriginalTarget=this.filterManager.renderer.createRenderTarget(),this._tempColorTransformedTarget=this.filterManager.renderer.createRenderTarget()},t.prototype.__dispose=function(){this._blurFilter.dispose(),this._colorTransformFilter.dispose(),this._blurFilter=this._colorTransformFilter=null,this.filterManager.renderer.releaseRenderTarget(this._tempOriginalTarget),this.filterManager.renderer.releaseRenderTarget(this._tempColorTransformedTarget),this._tempOriginalTarget=this._tempColorTransformedTarget=null},t}(a.FilterBase);r.GlowFilter=s},{"../../_util/_util":5,"../FilterBase":88,"../RenderHelper":92,"./Blur2Filter":102,"./ColorTransformFilter":106}],108:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./BlurFilter")),n(e("./BlurXFilter")),n(e("./BlurYFilter")),n(e("./ColorTransformFilter")),n(e("./GlowFilter")),n(e("./Blur2Filter"))},{"./Blur2Filter":102,"./BlurFilter":103,"./BlurXFilter":104,"./BlurYFilter":105,"./ColorTransformFilter":106,"./GlowFilter":107}],109:[function(e,t,r){!function(e){e[e.SOLID=0]="SOLID",e[e.GRADIENT=1]="GRADIENT",e[e.BITMAP=2]="BITMAP",e[e.SHADER=3]="SHADER"}(r.BrushType||(r.BrushType={}));r.BrushType},{}],110:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./GraphicsDataRendererBase"),o=function(e){function t(t,r,n){e.call(this,t,r,n,r,n),this.beginIndex=-1,this.endIndex=-1,this._contours=null,this._startingNewContour=!0,this._contours=[[]],this.beginIndex=-1,this.endIndex=-1,this._hasDrawnAnything=!1,this._startingNewContour=!0}return n(t,e),t.prototype.moveTo=function(e,t){this.closePath(),this._hasDrawnAnything?(this._currentX!==e||this._currentY!==t)&&(this._startingNewContour=!0):this._startingNewContour=!0,this._currentX=e,this._currentY=t,this._lastPathStartX=e,this._lastPathStartY=t},t.prototype.getContourForClosedShapes=function(){var e;return this._hasDrawnAnything?(e=[],this._contours.push(e),this._startingNewContour=!1):e=this._contours[0],e},t.prototype.getContourForLines=function(){var e;return this._hasDrawnAnything?this._startingNewContour?(e=[],this._contours.push(e),this._startingNewContour=!1):e=this._contours[this._contours.length-1]:e=this._contours[0],e},t}(i.GraphicsDataRendererBase);r.FillRendererBase=o},{"./GraphicsDataRendererBase":112}],111:[function(e,t,r){r.CURVE_ACCURACY=20,r.STD_Z=0},{}],112:[function(e,t,r){var n=e("../../_util/NotImplementedError"),i=e("../PackedArrayBuffer"),o=this.WebGLRenderingContext||window.WebGLRenderingContext,a=function(){function e(e,t,r,n,i){this._graphics=null,this._glc=null,this._isDirty=!0,this._vertices=null,this._colors=null,this._indices=null,this._vertexBuffer=null,this._colorBuffer=null,this._indexBuffer=null,this._currentX=0,this._currentY=0,this._hasDrawnAnything=!1,this._lastPathStartX=0,this._lastPathStartY=0,this._graphics=e,this._glc=e.renderer.context,this.__initializeBuffers(),this._hasDrawnAnything=!1,this._lastPathStartX=t,this._lastPathStartY=r,this.moveTo(n,i),this._isDirty=!0}return e.prototype.bezierCurveTo=function(e,t,r,i,o,a){throw new n.NotImplementedError},e.prototype.closePath=function(){!this._hasDrawnAnything||this._currentX==this._lastPathStartX&&this._currentY==this._lastPathStartY||this.lineTo(this._lastPathStartX,this._lastPathStartY)},e.prototype.curveTo=function(e,t,r,i){throw new n.NotImplementedError},e.prototype.drawCircle=function(e,t,r){throw new n.NotImplementedError},e.prototype.drawEllipse=function(e,t,r,i){
throw new n.NotImplementedError},e.prototype.drawRect=function(e,t,r,i){throw new n.NotImplementedError},e.prototype.drawRoundRect=function(e,t,r,i,o,a){throw void 0===a&&(a=NaN),new n.NotImplementedError},e.prototype.lineTo=function(e,t){throw new n.NotImplementedError},e.prototype.moveTo=function(e,t){throw new n.NotImplementedError},e.prototype.update=function(){this.__syncBuffers()},e.prototype.render=function(e){console.warn("Do not call GraphicsDataRendererBase.render().")},e.prototype.dispose=function(){this._vertexBuffer.dispose(),this._colorBuffer.dispose(),this._indexBuffer.dispose(),this._vertexBuffer=this._colorBuffer=this._indexBuffer=null,this._vertices=this._colors=this._indices=null,this._glc=null},e.prototype.becomeDirty=function(){this._isDirty=!0},Object.defineProperty(e.prototype,"hasDrawnAnything",{get:function(){return this._hasDrawnAnything},enumerable:!0,configurable:!0}),e.prototype.__initializeBuffers=function(){this._vertices=[],this._colors=[],this._indices=[],this._vertexBuffer=i.PackedArrayBuffer.create(this._glc,this._vertices,o.FLOAT,o.ARRAY_BUFFER),this._colorBuffer=i.PackedArrayBuffer.create(this._glc,this._colors,o.FLOAT,o.ARRAY_BUFFER),this._indexBuffer=i.PackedArrayBuffer.create(this._glc,this._indices,o.UNSIGNED_SHORT,o.ELEMENT_ARRAY_BUFFER)},e.prototype.__syncBuffers=function(){this._isDirty&&(this._vertexBuffer.setNewData(this._vertices),this._vertexBuffer.becomeDirty(),this._colorBuffer.setNewData(this._colors),this._colorBuffer.becomeDirty(),this._indexBuffer.setNewData(this._indices),this._indexBuffer.becomeDirty(),this._isDirty=!1)},e}();r.GraphicsDataRendererBase=a},{"../../_util/NotImplementedError":4,"../PackedArrayBuffer":91}],113:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("libtess"),o=e("./FillRendererBase"),a=e("../../_util/_util"),u=e("./GRAPHICS_CONST"),l=e("../../_util/NotImplementedError"),s=e("../RenderHelper"),c=function(e){function t(t,r,n,i,o){e.call(this,t,r,n),this._r=0,this._g=0,this._b=0,this._a=1,this._a=a._util.limitInto(o,0,1),this._r=(i>>>16&255)/255,this._g=(i>>>8&255)/255,this._b=(255&i)/255}return n(t,e),t.prototype.bezierCurveTo=function(e,t,r,n,i,o){this._isDirty=!0;var a=this.getContourForLines();(!this._hasDrawnAnything||this._startingNewContour)&&a.push(this._currentX,this._currentY,u.STD_Z);for(var l,s,c,h,p,f,d,_,m=this._currentX,g=this._currentY,y=1;y<=u.CURVE_ACCURACY;y++)_=y/u.CURVE_ACCURACY,l=1-_,s=l*l,c=s*l,h=_*_,p=h*_,f=c*m+3*s*_*e+3*l*h*r+p*i,d=c*g+3*s*_*t+3*l*h*n+p*o,a.push(f,d,u.STD_Z);this._currentX=i,this._currentY=o,this._hasDrawnAnything=!0,this._startingNewContour=!1},t.prototype.curveTo=function(e,t,r,n){this._isDirty=!0;var i=this.getContourForLines();(!this._hasDrawnAnything||this._startingNewContour)&&i.push(this._currentX,this._currentY,u.STD_Z);for(var o,a,l,s=this._currentX,c=this._currentY,h=1;h<=u.CURVE_ACCURACY;h++)o=h/u.CURVE_ACCURACY,a=s+(e-s)*o,l=c+(t-c)*o,a+=(e+(r-e)*o-a)*o,l+=(t+(n-t)*o-l)*o,i.push(a,l,u.STD_Z);this._currentX=r,this._currentY=n,this._hasDrawnAnything=!0,this._startingNewContour=!1},t.prototype.drawCircle=function(e,t,r){this._isDirty=!0,this.moveTo(e,t);var n,i,o,a,l=this.getContourForClosedShapes(),s=Math.PI/2;l.push(this._currentX+r,this._currentY,u.STD_Z),i=0;for(var c=0;4>c;c++){for(var h=1;h<=u.CURVE_ACCURACY;h++)n=i-h/u.CURVE_ACCURACY*s,o=e+r*Math.cos(n),a=t+r*Math.sin(n),l.push(o,a,u.STD_Z);i-=s}this._currentX=e+r,this._currentY=t,this._lastPathStartX=e+r,this._lastPathStartY=t,this._hasDrawnAnything=!0,this._startingNewContour=!1},t.prototype.drawEllipse=function(e,t,r,n){this._isDirty=!0,this.moveTo(e,t+n/2);var i,o,a,l,s=this.getContourForClosedShapes(),c=e+r/2,h=t+n/2,p=Math.PI/2;s.push(this._currentX,this._currentY,u.STD_Z),o=Math.PI;for(var f=0;4>f;f++){for(var d=1;d<=u.CURVE_ACCURACY;d++)i=o-d/u.CURVE_ACCURACY*p,a=c+r/2*Math.cos(i),l=h+n/2*Math.sin(i),s.push(a,l,u.STD_Z);o-=p}this._currentX=e+r,this._currentY=t+n/2,this._lastPathStartX=e+r,this._lastPathStartY=t+n/2,this._hasDrawnAnything=!0,this._startingNewContour=!1},t.prototype.drawRect=function(e,t,r,n){this._isDirty=!0,this.moveTo(e,t);var i=this.getContourForClosedShapes();i.push(e,t,u.STD_Z),i.push(e+r,t,u.STD_Z),i.push(e+r,t+n,u.STD_Z),i.push(e,t+n,u.STD_Z),this._currentX=e,this._currentY=t,this._hasDrawnAnything=!0,this._startingNewContour=!1},t.prototype.drawRoundRect=function(e,t,r,n,i,o){throw void 0===o&&(o=NaN),new l.NotImplementedError},t.prototype.lineTo=function(e,t){this._isDirty=!0;var r=this.getContourForLines();(!this._hasDrawnAnything||this._startingNewContour)&&r.push(this._currentX,this._currentY,u.STD_Z),r.push(e,t,u.STD_Z),this._currentX=e,this._currentY=t,this._hasDrawnAnything=!0,this._startingNewContour=!1},t.prototype.update=function(){if(this._isDirty){var t=this._graphics.renderer.tessellator;t.gluTessProperty(i.gluEnum.GLU_TESS_WINDING_RULE,i.windingRule.GLU_TESS_WINDING_ODD),t.gluTessNormal(0,0,1);var r=[];t.gluTessBeginPolygon(r);for(var n,o=0;o<this._contours.length;o++)if(n=this._contours[o],n.length>0){t.gluTessBeginContour();for(var a=0;a<n.length;a+=3){var u=[n[a],n[a+1],n[a+2]];t.gluTessVertex(u,u)}t.gluTessEndContour()}t.gluTessEndPolygon(),this._vertices=[],this._colors=[],this._indices=[];var l=this._colors,s=this._indices,c=this._vertices;a=0;for(var h,o=0;o<r.length;o++){h=r[o];for(var a=0;a<h.length;a++)c.push(h[a])}a=0;for(var o=0;o<c.length;o+=3)l.push(this._r*this._a,this._g*this._a,this._b*this._a,this._a),s.push(a),a++}e.prototype.update.call(this)},t.prototype.render=function(e){if(this._vertices.length>0){var t=e.currentRenderTarget;s.RenderHelper.renderPrimitives2(e,t,this._vertexBuffer,this._colorBuffer,this._indexBuffer,!1,t.isRoot,!1)}},t}(o.FillRendererBase);r.SolidFillRenderer=c},{"../../_util/NotImplementedError":4,"../../_util/_util":5,"../RenderHelper":92,"./FillRendererBase":110,"./GRAPHICS_CONST":111,libtess:179}],114:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../_util/NotImplementedError"),o=e("../../_util/_util"),a=e("./StrokeRendererBase"),u=e("./GRAPHICS_CONST"),l=e("../RenderHelper"),s=function(e){function t(t,r,n,i,a,u,l,s){e.call(this,t,r,n,i,a),this._r=0,this._g=0,this._b=0,this._a=1,this._w=1,this._a=o._util.limitInto(s,0,1),this._r=(l>>>16&255)/255,this._g=(l>>>8&255)/255,this._b=(255&l)/255,this._w=u}return n(t,e),t.prototype.bezierCurveTo=function(e,t,r,n,i,o){if(this._w>0){this._isDirty=!0;for(var a,l,s,c,h,p,f,d,_=this._currentX,m=this._currentY,g=1;g<=u.CURVE_ACCURACY;g++)d=g/u.CURVE_ACCURACY,a=1-d,l=a*a,s=l*a,c=d*d,h=c*d,p=s*_+3*l*d*e+3*a*c*r+h*i,f=s*m+3*l*d*t+3*a*c*n+h*o,this.lineTo(p,f)}this._currentX=i,this._currentY=o},t.prototype.curveTo=function(e,t,r,n){if(this._w>0){this._isDirty=!0;for(var i,o,a,l=this._currentX,s=this._currentY,c=1;c<=u.CURVE_ACCURACY;c++)i=c/u.CURVE_ACCURACY,o=l+(e-l)*i,a=s+(t-s)*i,o+=(e+(r-e)*i-o)*i,a+=(t+(n-t)*i-a)*i,this.lineTo(o,a)}this._currentX=r,this._currentY=n},t.prototype.drawCircle=function(e,t,r){if(this.moveTo(e-r,t),this._w>0){this._isDirty=!0;var n,i,o,a,l=Math.PI/2;i=Math.PI;for(var s=0;4>s;s++){for(var c=1;c<=u.CURVE_ACCURACY;c++)n=i-c/u.CURVE_ACCURACY*l,o=e+r*Math.cos(n),a=t+r*Math.sin(n),this.lineTo(o,a);i-=l}}this._currentX=e+r,this._currentY=t,this._lastPathStartX=e+r,this._lastPathStartY=t},t.prototype.drawEllipse=function(e,t,r,n){if(this.moveTo(e,t+n/2),this._w>0){this._isDirty=!0;var i,o,a,l,s=e+r/2,c=t+n/2,h=Math.PI/2;o=Math.PI;for(var p=0;4>p;p++){for(var f=1;f<=u.CURVE_ACCURACY;f++)i=o-f/u.CURVE_ACCURACY*h,a=s+r/2*Math.cos(i),l=c+n/2*Math.sin(i),this.lineTo(a,l);o-=h}}this._currentX=e+r,this._currentY=t+n/2,this._lastPathStartX=e+r,this._lastPathStartY=t+n/2},t.prototype.drawRect=function(e,t,r,n){this._isDirty=!0,this.moveTo(e,t),this.lineTo(e,t+n),this.lineTo(e+r,t+n),this.lineTo(e+r,t),this.lineTo(e,t)},t.prototype.drawRoundRect=function(e,t,r,n,o,a){throw void 0===a&&(a=NaN),new i.NotImplementedError},t.prototype.lineTo=function(e,t){if(this._w>0){this._isDirty=!0;var r=this.__getSimLineVertices(this._currentX,this._currentY,e,t,u.STD_Z,this._w);if(r.length>0){for(var n=this._vertices.length/3,i=0;12>i;i++)this._vertices.push(r[i]);for(var i=0;4>i;i++)this._colors.push(this._r*this._a,this._g*this._a,this._b*this._a,this._a);this._indices.push(n,n+1,n+2,n+1,n+2,n+3),this._hasDrawnAnything=!0}}this._currentX=e,this._currentY=t},t.prototype.render=function(e){if(this._vertices.length>0){var t=e.currentRenderTarget;l.RenderHelper.renderPrimitives2(e,t,this._vertexBuffer,this._colorBuffer,this._indexBuffer,!1,t.isRoot,!1)}},t}(a.StrokeRendererBase);r.SolidStrokeRenderer=s},{"../../_util/NotImplementedError":4,"../../_util/_util":5,"../RenderHelper":92,"./GRAPHICS_CONST":111,"./StrokeRendererBase":115}],115:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./GraphicsDataRendererBase"),o=function(e){function t(t,r,n,i,o){e.call(this,t,r,n,i,o),this._lineVerticesStorage=null,this._lineVerticesStorage=[[0,0],[0,0],[0,0],[0,0]]}return n(t,e),t.prototype.moveTo=function(e,t){this._graphics.isFilling&&this.closePath(),this._currentX=e,this._currentY=t,this._lastPathStartX=e,this._lastPathStartY=t},t.prototype.__getSimLineVertices=function(e,t,r,n,i,o){if(0>o)return[];var a=o/2,u=this._lineVerticesStorage[0],l=this._lineVerticesStorage[1],s=this._lineVerticesStorage[2],c=this._lineVerticesStorage[3];if(e===r)u[0]=e-a,u[1]=t>n?t+a:t-a,l[0]=e+a,l[1]=t>n?t+a:t-a,s[0]=r-a,s[1]=t>n?n-a:n+a,c[0]=r+a,c[1]=t>n?n-a:n+a;else{var h=(n-t)/(r-e),p=1/Math.sqrt(1+h*h),f=Math.sqrt(1-p*p),d=a*f,_=a*p,m=_,g=d;e>r?(e+=m,r-=m):(e-=m,r+=m),t>n?(t+=g,n-=g):(t-=g,n+=g),u[0]=e-d,l[0]=e+d,s[0]=r-d,c[0]=r+d,h>=0?(u[1]=t+_,l[1]=t-_,s[1]=n+_,c[1]=n-_):(u[1]=t-_,l[1]=t+_,s[1]=n-_,c[1]=n+_)}return[u[0],u[1],i,l[0],l[1],i,s[0],s[1],i,c[0],c[1],i]},t}(i.GraphicsDataRendererBase);r.StrokeRendererBase=o},{"./GraphicsDataRendererBase":112}],116:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./AttributeCache")),n(e("./FilterBase")),n(e("./FilterManager")),n(e("./FragmentShaders")),n(e("./PackedArrayBuffer")),n(e("./RenderHelper")),n(e("./RenderTarget2D")),n(e("./ShaderBase")),n(e("./ShaderID")),n(e("./ShaderManager")),n(e("./UniformCache")),n(e("./VertexShaders")),n(e("./WebGLDataType")),n(e("./WebGLRenderer")),n(e("./WebGLUtils"));var i=e("./filters/index");r.filters=i;var o=e("./shaders/index");r.shaders=o},{"./AttributeCache":87,"./FilterBase":88,"./FilterManager":89,"./FragmentShaders":90,"./PackedArrayBuffer":91,"./RenderHelper":92,"./RenderTarget2D":93,"./ShaderBase":94,"./ShaderID":95,"./ShaderManager":96,"./UniformCache":97,"./VertexShaders":98,"./WebGLDataType":99,"./WebGLRenderer":100,"./WebGLUtils":101,"./filters/index":108,"./shaders/index":127}],117:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../UniformCache"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("./BufferedShader"),l=e("../WebGLDataType"),s=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)}return n(t,e),t.prototype.setStrength=function(e){0>e&&(e=1),this._uniforms.get("uStrength").value=e},t.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},t.prototype.setResolution=function(e){0>e&&(e=1),this._uniforms.get("uResolution").value=e},t.prototype.setBlurDirection=function(e){this._uniforms.get("uBlurDirection").value=[e[0],e[1]]},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var o;o=new i.UniformCache,o.name="uStrength",o.type=l.WebGLDataType.U1F,o.value=5,r.set(o.name,o),o=new i.UniformCache,o.name="uResolution",o.type=l.WebGLDataType.U1F,o.value=1,r.set(o.name,o),o=new i.UniformCache,o.name="uBlurDirection",o.type=l.WebGLDataType.U2F,o.value=[1,0],r.set(o.name,o)},t.SHADER_CLASS_NAME="Blur2Shader",t.FRAGMENT_SOURCE=a.FragmentShaders.blur2,t.VERTEX_SOURCE=o.VertexShaders.blur2,t}(u.BufferedShader);r.Blur2Shader=s},{"../FragmentShaders":90,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99,"./BufferedShader":120}],118:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../UniformCache"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("./BufferedShader"),l=e("../WebGLDataType"),s=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)}return n(t,e),t.prototype.setStrength=function(e){0>e&&(e=1),this._uniforms.get("uStrength").value=e},t.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var o;o=new i.UniformCache,o.name="uStrength",o.type=l.WebGLDataType.U1F,o.value=5,r.set(o.name,o)},t.SHADER_CLASS_NAME="BlurXShader",t.FRAGMENT_SOURCE=a.FragmentShaders.blur,t.VERTEX_SOURCE=o.VertexShaders.blurX,t}(u.BufferedShader);r.BlurXShader=s},{"../FragmentShaders":90,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99,"./BufferedShader":120}],119:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../UniformCache"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("./BufferedShader"),l=e("../WebGLDataType"),s=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)}return n(t,e),t.prototype.setStrength=function(e){0>e&&(e=1),this._uniforms.get("uStrength").value=e},t.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var o;o=new i.UniformCache,o.name="uStrength",o.type=l.WebGLDataType.U1F,o.value=5,r.set(o.name,o)},t.SHADER_CLASS_NAME="BlurYShader",t.FRAGMENT_SOURCE=a.FragmentShaders.blur,t.VERTEX_SOURCE=o.VertexShaders.blurY,t}(u.BufferedShader);r.BlurYShader=s},{"../FragmentShaders":90,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99,"./BufferedShader":120}],120:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/geom/Matrix3D"),o=e("../UniformCache"),a=e("../VertexShaders"),u=e("../FragmentShaders"),l=e("../ShaderBase"),s=e("../WebGLDataType"),c=function(e){function t(t,r,n){e.call(this,t,r,n,null,null)}return n(t,e),t.prototype.setTexture=function(e){this._uniforms.get("uSampler").texture=e},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var a,u=new i.Matrix3D,l=t.renderer.view.width,c=t.renderer.view.height;u.setOrthographicProjection(0,l,c,0,-1e3,1e3),a=new o.UniformCache,a.name="uSampler",a.type=s.WebGLDataType.USampler2D,a.value=0,a.texture=null,r.set(a.name,a),a=new o.UniformCache,a.name="uProjectionMatrix",a.type=s.WebGLDataType.UMat4,a.value=u.toArray(),a.transpose=!1,r.set(a.name,a)},t.SHADER_CLASS_NAME="BufferedShader",t.FRAGMENT_SOURCE=u.FragmentShaders.buffered,t.VERTEX_SOURCE=a.VertexShaders.buffered,t}(l.ShaderBase);r.BufferedShader=c},{"../../flash/geom/Matrix3D":61,"../FragmentShaders":90,"../ShaderBase":94,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99}],121:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../UniformCache"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("./BufferedShader"),l=e("../WebGLDataType"),s=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)}return n(t,e),t.prototype.setColorMatrix=function(e){return e.length<20?void console.warn("ColorTransformShader.setColorMatrix needs a 4x5 matrix."):void(this._uniforms.get("uColorMatrix").value=e.slice())},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var o,a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];o=new i.UniformCache,o.name="uColorMatrix",o.type=l.WebGLDataType.U1FV,o.value=a,r.set(o.name,o)},t.SHADER_CLASS_NAME="ColorTransformShader",t.FRAGMENT_SOURCE=a.FragmentShaders.colorTransform,t.VERTEX_SOURCE=o.VertexShaders.buffered,t}(u.BufferedShader);r.ColorTransformShader=s},{"../FragmentShaders":90,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99,"./BufferedShader":120}],122:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../UniformCache"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("./BufferedShader"),l=e("../WebGLDataType"),s=e("../../flash/geom/Matrix3D"),c=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)}return n(t,e),t.prototype.setFlipX=function(e){this._uniforms.get("uFlipX").value=e},t.prototype.setFlipY=function(e){this._uniforms.get("uFlipY").value=e},t.prototype.setOriginalSize=function(e){this._uniforms.get("uOriginalSize").value=e.slice()},t.prototype.setFitSize=function(e){this._uniforms.get("uFitSize").value=e.slice()},t.prototype.setAlpha=function(e){this._uniforms.get("uAlpha").value=e},t.prototype.setTransform=function(e){this._uniforms.get("uTransformMatrix").value=e.toArray()},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var o,a=new s.Matrix3D;a.identity(),o=new i.UniformCache,o.name="uFlipX",o.type=l.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uFlipY",o.type=l.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uOriginalSize",o.type=l.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o),o=new i.UniformCache,o.name="uFitSize",o.type=l.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o),o=new i.UniformCache,o.name="uTransformMatrix",o.type=l.WebGLDataType.UMat4,o.value=a.toArray(),o.transpose=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uAlpha",o.type=l.WebGLDataType.U1F,o.value=1,r.set(o.name,o)},t.SHADER_CLASS_NAME="CopyImageShader",t.FRAGMENT_SOURCE=a.FragmentShaders.copyImage,t.VERTEX_SOURCE=o.VertexShaders.copyImage,t}(u.BufferedShader);r.CopyImageShader=c},{"../../flash/geom/Matrix3D":61,"../FragmentShaders":90,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99,"./BufferedShader":120}],123:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../UniformCache"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("./BufferedShader"),l=e("../WebGLDataType"),s=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)}return n(t,e),t.prototype.setResolutionXY=function(e){this._uniforms.get("uResolution").value=e.slice()},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var o;o=new i.UniformCache,o.name="uResolution",o.type=l.WebGLDataType.U2F,o.value=[1,1],r.set(o.name,o)},t.SHADER_CLASS_NAME="FxaaShader",t.FRAGMENT_SOURCE=a.FragmentShaders.fxaa,t.VERTEX_SOURCE=o.VertexShaders.fxaa,t}(u.BufferedShader);r.FxaaShader=s},{"../FragmentShaders":90,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99,"./BufferedShader":120}],124:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/geom/Matrix3D"),o=e("../UniformCache"),a=e("../VertexShaders"),u=e("../FragmentShaders"),l=e("../ShaderBase"),s=e("../WebGLDataType"),c=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE,null,null)}return n(t,e),t.prototype.setProjection=function(e){this._uniforms.get("uProjectionMatrix").value=e.toArray()},t.prototype.setTransform=function(e){this._uniforms.get("uTransformMatrix").value=e.toArray()},t.prototype.setAlpha=function(e){this._uniforms.get("uAlpha").value=e},t.prototype.setFlipX=function(e){this._uniforms.get("uFlipX").value=e},t.prototype.setFlipY=function(e){this._uniforms.get("uFlipY").value=e},t.prototype.setOriginalSize=function(e){this._uniforms.get("uOriginalSize").value=e.slice()},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var a,u=new i.Matrix3D,l=new i.Matrix3D,c=t.renderer.view.width,h=t.renderer.view.height;l.setOrthographicProjection(0,c,h,0,-1e3,1e3),a=new o.UniformCache,a.name="uProjectionMatrix",a.type=s.WebGLDataType.UMat4,a.value=l.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uTransformMatrix",a.type=s.WebGLDataType.UMat4,a.value=u.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uAlpha",a.type=s.WebGLDataType.U1F,a.value=1,r.set(a.name,a),a=new o.UniformCache,a.name="uFlipX",a.type=s.WebGLDataType.UBool,a.value=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uFlipY",a.type=s.WebGLDataType.UBool,a.value=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uOriginalSize",a.type=s.WebGLDataType.U2F,a.value=[0,0],r.set(a.name,a)},t.SHADER_CLASS_NAME="Primitive2Shader",t.FRAGMENT_SOURCE=u.FragmentShaders.primitive,t.VERTEX_SOURCE=a.VertexShaders.primitive2,t}(l.ShaderBase);r.Primitive2Shader=c},{"../../flash/geom/Matrix3D":61,"../FragmentShaders":90,"../ShaderBase":94,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99}],125:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/geom/Matrix3D"),o=e("../UniformCache"),a=e("../VertexShaders"),u=e("../FragmentShaders"),l=e("../ShaderBase"),s=e("../WebGLDataType"),c=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE,null,null)}return n(t,e),t.prototype.setProjection=function(e){this._uniforms.get("uProjectionMatrix").value=e.toArray()},t.prototype.setTransform=function(e){this._uniforms.get("uTransformMatrix").value=e.toArray()},t.prototype.setAlpha=function(e){this._uniforms.get("uAlpha").value=e},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var a,u=new i.Matrix3D,l=new i.Matrix3D,c=t.renderer.view.width,h=t.renderer.view.height;l.setOrthographicProjection(0,c,h,0,-1e3,1e3),a=new o.UniformCache,a.name="uProjectionMatrix",a.type=s.WebGLDataType.UMat4,a.value=l.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uTransformMatrix",a.type=s.WebGLDataType.UMat4,a.value=u.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uAlpha",a.type=s.WebGLDataType.U1F,a.value=1,r.set(a.name,a)},t.SHADER_CLASS_NAME="PrimitiveShader",t.FRAGMENT_SOURCE=u.FragmentShaders.primitive,t.VERTEX_SOURCE=a.VertexShaders.primitive,t}(l.ShaderBase);r.PrimitiveShader=c},{"../../flash/geom/Matrix3D":61,"../FragmentShaders":90,"../ShaderBase":94,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99}],126:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../UniformCache"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("./BufferedShader"),l=e("../WebGLDataType"),s=function(e){function t(r){e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)}return n(t,e),t.prototype.setFlipX=function(e){this._uniforms.get("uFlipX").value=e},t.prototype.setFlipY=function(e){this._uniforms.get("uFlipY").value=e},t.prototype.setOriginalSize=function(e){this._uniforms.get("uOriginalSize").value=e.slice()},t.prototype.setFitSize=function(e){this._uniforms.get("uFitSize").value=e.slice()},t.prototype.__localInit=function(t,r,n){e.prototype.__localInit.call(this,t,r,n);var o;o=new i.UniformCache,o.name="uFlipX",o.type=l.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uFlipY",o.type=l.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uOriginalSize",o.type=l.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o),o=new i.UniformCache,o.name="uFitSize",o.type=l.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o)},t.SHADER_CLASS_NAME="ReplicateShader",t.FRAGMENT_SOURCE=a.FragmentShaders.buffered,t.VERTEX_SOURCE=o.VertexShaders.replicate,t}(u.BufferedShader);r.ReplicateShader=s},{"../FragmentShaders":90,"../UniformCache":97,"../VertexShaders":98,"../WebGLDataType":99,"./BufferedShader":120}],127:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./BlurXShader")),n(e("./BlurYShader")),n(e("./BufferedShader")),n(e("./ColorTransformShader")),n(e("./FxaaShader")),n(e("./PrimitiveShader")),n(e("./ReplicateShader")),n(e("./Blur2Shader")),n(e("./CopyImageShader"))},{"./Blur2Shader":117,"./BlurXShader":118,"./BlurYShader":119,"./BufferedShader":120,"./ColorTransformShader":121,"./CopyImageShader":122,"./FxaaShader":123,"./PrimitiveShader":125,"./ReplicateShader":126}],128:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../lib/glantern/src/GLantern"),o=e("./danmaku/DanmakuCoordinator"),a=e("./danmaku/code/CodeDanmakuProvider"),u=e("./danmaku/simple/SimpleDanmakuProvider"),l=e("./BulletproofConfig"),s=e("../lib/glantern/src/_util/_util"),c=e("./interactive/video/html5/Html5VideoPlayer"),h=function(e){function t(){e.call(this),this._lastUpdatedTime=-1,this._totalElapsedTime=0,this._fps=0,this._fpsCounter=0,this._lastFpsUpdateElapsedTime=0,this._coordinator=null,this._videoPlayer=null,this._config=null,this._config=s._util.deepClone(l.BulletproofConfig)}return n(t,e),t.prototype.initialize=function(t,r){if(!this._isInitialized){e.prototype.initialize.call(this,t,r);var n=this.config;this.attachUpdateFunction(this.__updateComponents.bind(this));var i=new o.DanmakuCoordinator(this);this._coordinator=i;var l;n.codeDanmakuEnabled&&(l=new a.CodeDanmakuProvider(i),i.addDanmakuProvider(l)),n.simpleDanmakuEnabled&&(l=new u.SimpleDanmakuProvider(i),i.addDanmakuProvider(l)),n.videoPlayerEnabled&&(n.useWebChimeraForVideoPlayback||(this._videoPlayer=new c.Html5VideoPlayer),null!==this._videoPlayer&&this._videoPlayer.initialize(t,r))}},t.prototype.startAnimation=function(){this.isAnimationRunning||(this._lastUpdatedTime=Date.now()),e.prototype.startAnimation.call(this)},t.prototype.stopAnimation=function(){this.__updateComponents(),e.prototype.stopAnimation.call(this)},t.prototype.dispose=function(){this._coordinator.dispose(),this._coordinator=null,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"danmakuCoordinator",{get:function(){return this._coordinator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimationRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeElapsed",{get:function(){return this._totalElapsedTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoPlayer",{get:function(){return this._videoPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoView",{get:function(){return s._util.isUndefinedOrNull(this._videoPlayer)?null:this._videoPlayer.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.prototype.__updateComponents=function(){if(this._lastUpdatedTime>0){var e=Date.now();this._totalElapsedTime+=e-this._lastUpdatedTime,this._lastUpdatedTime=e}++this._fpsCounter,this.timeElapsed-this._lastFpsUpdateElapsedTime>1e3&&(this._fps=this._fpsCounter/(this.timeElapsed-this._lastFpsUpdateElapsedTime)*1e3,this._fpsCounter=0,this._lastFpsUpdateElapsedTime=this.timeElapsed),this._coordinator.update()},t}(i.GLantern);r.Bulletproof=h},{"../lib/glantern/src/GLantern":1,"../lib/glantern/src/_util/_util":5,"./BulletproofConfig":129,"./danmaku/DanmakuCoordinator":149,"./danmaku/code/CodeDanmakuProvider":158,"./danmaku/simple/SimpleDanmakuProvider":170,"./interactive/video/html5/Html5VideoPlayer":176}],129:[function(e,t,r){var n=e("./danmaku/simple/SimpleDanamkuType");r.BulletproofConfig=Object.create(null),r.BulletproofConfig.simpleDanmakuLifeTimeSecs=10,r.BulletproofConfig.codeDanmakuLifeTimeSecs=Number.MAX_VALUE,r.BulletproofConfig.defaultSimpleDanmakuCreateParams={bornTime:void 0,fontName:"SimHei",fontStyle:"bold",fontSize:18,type:n.SimpleDanmakuType.Flying,border:!1,borderColor:0,borderThickness:1,background:!1,backgroundColor:0,textColor:16777215,outline:!0,outlineColor:0,outlineThickness:1},r.BulletproofConfig.globalDanmakuCountThreshold=3e3,r.BulletproofConfig.simpleDanmakuPartCountThreshold=1500,r.BulletproofConfig.codeDanmakuEnabled=!0,r.BulletproofConfig.simpleDanmakuEnabled=!0,r.BulletproofConfig.videoPlayerEnabled=!0,r.BulletproofConfig.useWebChimeraForVideoPlayback=!1},{"./danmaku/simple/SimpleDanamkuType":165}],130:[function(e,t,r){var n=e("./danmaku_api/Display"),i=e("./danmaku_api/Global"),o=e("./danmaku_api/Functions"),a=e("./danmaku_api/Utils"),u=e("./danmaku_api/Bitmap"),l=e("./danmaku_api/Player"),s=e("./danmaku_api/ScriptManager"),c=e("./danmaku_api/Storage"),h=e("./danmaku_api/Tween"),p=function(){function e(e){this._codeDanmaku=null,this._bulletproof=null,this._api=null,this._codeDanmaku=e,this._bulletproof=e.layoutManager.danmakuProvider.danmakuCoordinator.bulletproof,this.__initializeApi()}return Object.defineProperty(e.prototype,"bulletproof",{get:function(){return this._bulletproof},enumerable:!0,configurable:!0}),e.prototype.__initializeApi=function(){var e=Object.create(null);e.$=e.Display=new n.Display(this),e.$G=e.Global=new i.Global(this),e.Bitmap=new u.Bitmap(this),e.Player=new l.Player(this),e.ScriptManager=new s.ScriptManager(this),e.Storage=new c.Storage(this),e.Tween=new h.Tween(this),e.Utils=new a.Utils(this);var t=new o.Functions(this);e.trace=t.trace.bind(t),e.clear=t.clear.bind(t),e.getTimer=t.getTimer.bind(t),e.timer=t.timer.bind(t),e.interval=t.interval.bind(t),e.foreach=t.foreach.bind(t),e.clone=t.clone.bind(t),e.load=t.load.bind(t),this._api=e},Object.defineProperty(e.prototype,"api",{get:function(){return this._api},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmaku",{get:function(){return this._codeDanmaku},enumerable:!0,configurable:!0}),e}();r.BiliBiliDanmakuApiContainer=p},{"./danmaku_api/Bitmap":132,"./danmaku_api/Display":135,"./danmaku_api/Functions":136,"./danmaku_api/Global":137,"./danmaku_api/Player":139,"./danmaku_api/ScriptManager":141,"./danmaku_api/Storage":142,"./danmaku_api/Tween":143,"./danmaku_api/Utils":145}],131:[function(e,t,r){var n=function(){function e(e){this._apiContainer=null,this._apiContainer=e}return Object.defineProperty(e.prototype,"apiContainer",{get:function(){return this._apiContainer},enumerable:!0,configurable:!0}),e.prototype.__getExtraCreateParams=function(){var e=Object.create(null);return e.bulletproof=this.apiContainer.bulletproof,e.bornTime=this.apiContainer.bulletproof.timeElapsed,
e.creator=this.apiContainer.danmaku,e},e}();r.BiliBiliDamakuApiObject=n},{}],132:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BiliBiliDamakuApiObject"),o=e("../../../lib/glantern/src/_util/NotImplementedError"),a=e("../../../lib/glantern/src/flash/geom/Rectangle"),u=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.createBitmapData=function(e,t,r,n){throw void 0===r&&(r=!0),void 0===n&&(n=4294967295),new o.NotImplementedError},t.prototype.createRectangle=function(e,t,r,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),new a.Rectangle(e,t,r,n)},t.prototype.createBitmap=function(e){throw new o.NotImplementedError},t}(i.BiliBiliDamakuApiObject);r.Bitmap=u},{"../../../lib/glantern/src/_util/NotImplementedError":4,"../../../lib/glantern/src/flash/geom/Rectangle":65,"./BiliBiliDamakuApiObject":131}],133:[function(e,t,r){var n=function(){function e(){}return e}();r.CommentBitmap=n},{}],134:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../danmaku/code/dco/DCOHelper"),o=e("../../../lib/glantern/src/flash/text/TextField"),a=function(e){function t(t,r,n,o){e.call(this,t,r),this._extraCreateParams=null,this._createParams=null,this._createParams=i.DCOHelper.fillInCreateParams(o.bulletproof,this,n),this._extraCreateParams=o,i.DCOHelper.applyGeneralCreateParams(this,this._createParams)}return n(t,e),Object.defineProperty(t.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraCreateParams",{get:function(){return this._extraCreateParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCreatedByDanmaku",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(o.TextField);r.CommentField=a},{"../../../lib/glantern/src/flash/text/TextField":73,"../../danmaku/code/dco/DCOHelper":159}],135:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../lib/glantern/src/_util/NotImplementedError"),o=e("../../../lib/glantern/src/flash/geom/Matrix"),a=e("../../../lib/glantern/src/flash/geom/Point"),u=e("../../../lib/glantern/src/flash/filters/BitmapFilterQuality"),l=e("../../../lib/glantern/src/flash/filters/GlowFilter"),s=e("../../../lib/glantern/src/flash/filters/BlurFilter"),c=e("../../../lib/glantern/src/flash/geom/Vector3D"),h=e("../../../lib/glantern/src/flash/geom/Matrix3D"),p=e("../../../lib/glantern/src/flash/geom/ColorTransform"),f=e("../../../lib/glantern/src/flash/text/TextFormat"),d=e("../../../lib/glantern/src/_util/_util"),_=e("./BiliBiliDamakuApiObject"),m=e("../../danmaku/code/dco/DCShape"),g=e("./CommentField"),y=function(e){function t(t){e.call(this,t)}return n(t,e),Object.defineProperty(t.prototype,"fullScreenWidth",{get:function(){return window.screen.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreenHeight",{get:function(){return window.screen.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.apiContainer.bulletproof.view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.apiContainer.bulletproof.view.height},enumerable:!0,configurable:!0}),t.prototype.createMatrix=function(e,t,r,n,i,a){return void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===a&&(a=0),new o.Matrix(e,t,r,n,i,a)},t.prototype.createPoint=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),new a.Point(e,t)},t.prototype.createComment=function(e,t){var r=this.apiContainer.danmaku,n=new g.CommentField(r.stage,r,t,this.__getExtraCreateParams());return n.text=e,n.textColor=16777215,n.defaultTextFormat.font="SimHei",r.addChild(n),n},t.prototype.createShape=function(e){var t=this.apiContainer.danmaku,r=new m.DCShape(t.stage,t,e,this.__getExtraCreateParams());return t.addChild(r),r},t.prototype.createCanvas=function(e){throw new i.NotImplementedError},t.prototype.createButton=function(e,t){throw new i.NotImplementedError},t.prototype.createGlowFilter=function(e,t,r,n,i,o,a,s){void 0===e&&(e=16711680),void 0===t&&(t=1),void 0===r&&(r=6),void 0===n&&(n=6),void 0===i&&(i=2),void 0===o&&(o=u.BitmapFilterQuality.LOW),void 0===a&&(a=!1),void 0===s&&(s=!1);var c=this.apiContainer.danmaku.stage.worldRenderer;return new l.GlowFilter(c.filterManager,e,t,r,n,i,o,a,s)},t.prototype.createBlurFilter=function(e,t,r){void 0===e&&(e=4),void 0===t&&(t=4),void 0===r&&(r=u.BitmapFilterQuality.LOW);var n=this.apiContainer.danmaku.stage.worldRenderer;return new s.BlurFilter(n.filterManager,e,t,r)},t.prototype.toIntVector=function(e){return Object.defineProperty(e,"as3Type",{get:function(){return"Vector.<int>"}}),e},t.prototype.toUIntVector=function(e){return Object.defineProperty(e,"as3Type",{get:function(){return"Vector.<uint>"}}),e},t.prototype.toNumberVector=function(e){return Object.defineProperty(e,"as3Type",{get:function(){return"Vector.<number>"}}),e},t.prototype.createVector3D=function(e,t,r,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),new c.Vector3D(e,t,r,n)},t.prototype.createMatrix3D=function(e){return void 0===e&&(e=null),new h.Matrix3D(e)},t.prototype.createColorTransform=function(){return new p.ColorTransform},t.prototype.createTextFormat=function(){return new f.TextFormat},t.prototype.createGraphic=function(){throw new i.NotImplementedError},t.prototype.projectVector=function(e,t){return e.transformVector(t)},t.prototype.projectVectors=function(e,t,r,n){for(;r.length>0;)r.pop();if(t.length%3!=0)return void d._util.trace("Display.projectVectors input vertex Vector must be a multiple of 3.");var i=[];e.transformVectors(t,i);for(var o=0;o<i.length/3;o++){var a=i[3*o],u=i[3*o+1];r.push(a,u)}},t}(_.BiliBiliDamakuApiObject);r.Display=y},{"../../../lib/glantern/src/_util/NotImplementedError":4,"../../../lib/glantern/src/_util/_util":5,"../../../lib/glantern/src/flash/filters/BitmapFilterQuality":55,"../../../lib/glantern/src/flash/filters/BlurFilter":56,"../../../lib/glantern/src/flash/filters/GlowFilter":57,"../../../lib/glantern/src/flash/geom/ColorTransform":59,"../../../lib/glantern/src/flash/geom/Matrix":60,"../../../lib/glantern/src/flash/geom/Matrix3D":61,"../../../lib/glantern/src/flash/geom/Point":64,"../../../lib/glantern/src/flash/geom/Vector3D":67,"../../../lib/glantern/src/flash/text/TextFormat":76,"../../danmaku/code/dco/DCShape":160,"./BiliBiliDamakuApiObject":131,"./CommentField":134}],136:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BiliBiliDamakuApiObject"),o=e("../../../lib/glantern/src/_util/NotImplementedError"),a=e("../../../lib/glantern/src/_util/_util"),u=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.trace=function(e){console.debug(e)},t.prototype.clear=function(){throw new o.NotImplementedError},t.prototype.getTimer=function(){return this.apiContainer.bulletproof.timeElapsed},t.prototype.timer=function(e,t){return this.apiContainer.api.Utils.delay(e,t)},t.prototype.interval=function(e,t,r){return void 0===r&&(r=1),this.apiContainer.api.Utils.interval(e,t,r)},t.prototype.foreach=function(e,t){if(!a._util.isUndefinedOrNull(e))for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])},t.prototype.clone=function(e){return a._util.deepClone(e)},t.prototype.load=function(e,t){var r=["libBitmap","libStorage"],n=r.indexOf(e);if(n>=0)switch(n){case 0:break;case 1:}},t}(i.BiliBiliDamakuApiObject);r.Functions=u},{"../../../lib/glantern/src/_util/NotImplementedError":4,"../../../lib/glantern/src/_util/_util":5,"./BiliBiliDamakuApiObject":131}],137:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BiliBiliDamakuApiObject"),o=function(e){function t(t){e.call(this,t),this._map=null,this._map=new Map}return n(t,e),t.prototype._set=function(e,t){this._map.set(e,t)},t.prototype._get=function(e){return this._map.get(e)},t}(i.BiliBiliDamakuApiObject);r.Global=o},{"./BiliBiliDamakuApiObject":131}],138:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"NONE",{get:function(){return"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BACK",{get:function(){return"Back"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BOUNCE",{get:function(){return"Bounce"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CIRCULAR",{get:function(){return"Circular"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CUBIC",{get:function(){return"Cubic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ELASTIC",{get:function(){return"Elastic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EXPONENTIAL",{get:function(){return"Exponential"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SINE",{get:function(){return"Sine"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"QUINTIC",{get:function(){return"Quintic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LINEAR",{get:function(){return"Linear"},enumerable:!0,configurable:!0}),e}();r.MotionEasing=n},{}],139:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BiliBiliDamakuApiObject"),o=e("../../../lib/glantern/src/_util/NotImplementedError"),a=e("../../../lib/glantern/src/_util/_util"),u=e("../../interactive/video/VideoPlayerState"),l=e("./PlayerState"),s=function(e){function t(t){e.call(this,t),this._videoPlayer=null,this._videoPlayer=this.apiContainer.bulletproof.videoPlayer}return n(t,e),t.prototype.play=function(){null!==this._videoPlayer&&this._videoPlayer.play()},t.prototype.pause=function(){null!==this._videoPlayer&&this._videoPlayer.pause()},t.prototype.seek=function(e){null!==this._videoPlayer&&(this._videoPlayer.currentTime=e)},t.prototype.jump=function(e,t,r){void 0===t&&(t=1),void 0===r&&(r=!1);var n=a._util.formatString("http://www.bilibili.com/video/{0}/index_{1}.html",e,t);r?window.open(n,"_blank"):window.location.assign(n)},Object.defineProperty(t.prototype,"state",{get:function(){var e=this._videoPlayer.state;switch(e){case u.VideoPlayerState.Playing:case u.VideoPlayerState.Seeking:return l.PlayerState.PLAYING;case u.VideoPlayerState.Paused:return l.PlayerState.PAUSE;case u.VideoPlayerState.Created:case u.VideoPlayerState.Initialized:case u.VideoPlayerState.Loaded:case u.VideoPlayerState.Stopped:return l.PlayerState.STOP;default:return l.PlayerState.INVALID}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.apiContainer.bulletproof.timeElapsed},enumerable:!0,configurable:!0}),t.prototype.commentTrigger=function(e,t){throw void 0===t&&(t=1e3),new o.NotImplementedError},t.prototype.keyTrigger=function(e,t,r){throw void 0===t&&(t=1e3),void 0===r&&(r=!1),new o.NotImplementedError},t.prototype.setMask=function(e){throw new o.NotImplementedError},t.prototype.createSound=function(e,t){throw void 0===t&&(t=null),new o.NotImplementedError},Object.defineProperty(t.prototype,"commentList",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"refreshRate",{get:function(){return 1/this.apiContainer.bulletproof.fps},set:function(e){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.apiContainer.bulletproof.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.apiContainer.bulletproof.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),t}(i.BiliBiliDamakuApiObject);r.Player=s},{"../../../lib/glantern/src/_util/NotImplementedError":4,"../../../lib/glantern/src/_util/_util":5,"../../interactive/video/VideoPlayerState":175,"./BiliBiliDamakuApiObject":131,"./PlayerState":140}],140:[function(e,t,r){var n=function(){function e(){}return Object.defineProperty(e,"PLAYING",{get:function(){return"playing"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STOP",{get:function(){return"stop"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PAUSE",{get:function(){return"pause"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INVALID",{get:function(){return"invalid"},enumerable:!0,configurable:!0}),e}();r.PlayerState=n},{}],141:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BiliBiliDamakuApiObject"),o=e("../../../lib/glantern/src/_util/NotImplementedError"),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.clearTimer=function(){throw new o.NotImplementedError},t.prototype.clearEl=function(){throw new o.NotImplementedError},t.prototype.clearTrigger=function(){throw new o.NotImplementedError},t}(i.BiliBiliDamakuApiObject);r.ScriptManager=a},{"../../../lib/glantern/src/_util/NotImplementedError":4,"./BiliBiliDamakuApiObject":131}],142:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BiliBiliDamakuApiObject"),o=e("../../../lib/glantern/src/_util/NotImplementedError"),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.loadRank=function(e,t){throw void 0===t&&(t=null),new o.NotImplementedError},t.prototype.uploadScore=function(e,t,r,n){throw void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),new o.NotImplementedError},t.prototype.saveData=function(e,t,r){throw void 0===t&&(t=null),void 0===r&&(r=null),new o.NotImplementedError},t.prototype.loadData=function(e,t){throw void 0===e&&(e=null),void 0===t&&(t=null),new o.NotImplementedError},t}(i.BiliBiliDamakuApiObject);r.Storage=a},{"../../../lib/glantern/src/_util/NotImplementedError":4,"./BiliBiliDamakuApiObject":131}],143:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../lib/glantern/src/_util/NotImplementedError"),o=e("./BiliBiliDamakuApiObject"),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.tween=function(e,t,r,n,o){throw new i.NotImplementedError},t.prototype.to=function(e,t,r,n){throw new i.NotImplementedError},t.prototype.bezier=function(e,t,r,n){throw new i.NotImplementedError},t.prototype.scale=function(e,t){throw new i.NotImplementedError},t.prototype.delay=function(e,t){throw new i.NotImplementedError},t.prototype.reverse=function(e){throw new i.NotImplementedError},t.prototype.repeat=function(e,t){throw new i.NotImplementedError},t.prototype.slice=function(e,t,r){throw new i.NotImplementedError},t.prototype.serial=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];throw new i.NotImplementedError},t.prototype.parallel=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];throw new i.NotImplementedError},t}(o.BiliBiliDamakuApiObject);r.Tween=a},{"../../../lib/glantern/src/_util/NotImplementedError":4,"./BiliBiliDamakuApiObject":131}],144:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../lib/glantern/src/_util/NotImplementedError"),o=e("../../../lib/glantern/src/fl/transitions/Tween"),a=function(e){function t(t,r,n,i,o,a,u){void 0===u&&(u=!1),e.call(this,t,r,n,i,o,a,u),this.stopOnComplete=!0}return n(t,e),t.prototype.play=function(){throw new i.NotImplementedError},t.prototype.stop=function(){throw new i.NotImplementedError},t.prototype.gotoAndPlay=function(e){throw new i.NotImplementedError},t.prototype.gotoAndStop=function(e){throw new i.NotImplementedError},t.prototype.togglePause=function(){throw new i.NotImplementedError},t}(o.Tween);r.TweenImpl=a},{"../../../lib/glantern/src/_util/NotImplementedError":4,"../../../lib/glantern/src/fl/transitions/Tween":8}],145:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BiliBiliDamakuApiObject"),o=e("../../../lib/glantern/src/_util/_util"),a=e("../../danmaku/code/dco/FiniteTimer"),u=function(e){function t(t){e.call(this,t),this._date=null,this._date=new Date}return n(t,e),t.prototype.hue=function(e){e%=360;var t=e/60*255,r=o._util.limitInto(510-t,0,255),n=o._util.limitInto(180>e?t:t-510,0,255),i=o._util.limitInto(180>e?t-510:t,0,255);return 255<<24|r<<16|n<<8|i},t.prototype.rgb=function(e,t,r){return e=o._util.limitInto(e,0,255),t=o._util.limitInto(t,0,255),r=o._util.limitInto(r,0,255),255<<24|e<<16|t<<8|r},t.prototype.formatTimes=function(e){return this._date.setTime(1e3*e),this._date.toLocaleString()},t.prototype.delay=function(e,t){return window.setTimeout(e,t)},t.prototype.interval=function(e,t,r){return new a.FiniteTimer(e,t,r)},t.prototype.distance=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},t.prototype.rand=function(e,t){return console.assert(t>e,"'max' must be bigger than 'min'."),Math.random()*(t-e)+e},t}(i.BiliBiliDamakuApiObject);r.Utils=u},{"../../../lib/glantern/src/_util/_util":5,"../../danmaku/code/dco/FiniteTimer":161,"./BiliBiliDamakuApiObject":131}],146:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./BiliBiliDamakuApiObject")),n(e("./Display")),n(e("./Global")),n(e("./Functions")),n(e("./Utils")),n(e("./Storage")),n(e("./CommentBitmap")),n(e("./Bitmap")),n(e("./ScriptManager")),n(e("./Tween")),n(e("./TweenImpl")),n(e("./Player")),n(e("./PlayerState")),n(e("./MotionEasing")),n(e("./CommentField"))},{"./BiliBiliDamakuApiObject":131,"./Bitmap":132,"./CommentBitmap":133,"./CommentField":134,"./Display":135,"./Functions":136,"./Global":137,"./MotionEasing":138,"./Player":139,"./PlayerState":140,"./ScriptManager":141,"./Storage":142,"./Tween":143,"./TweenImpl":144,"./Utils":145}],147:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./BiliBiliDanmakuApiContainer"));var i=e("./danmaku_api/index");r.danmaku_api=i},{"./BiliBiliDanmakuApiContainer":130,"./danmaku_api/index":146}],148:[function(e,t,r){(function(t){!function(t){t.Bulletproof=e("./index")}(window||self||t||{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./index":172}],149:[function(e,t,r){var n=e("../../lib/glantern/src/_util/_util"),i=e("./DanmakuProviderFlag"),o=function(){function e(e){this._danmakuProviders=null,this._bulletproof=null,this._bulletproof=e,this._danmakuProviders=new Map}return e.prototype.dispose=function(){this._danmakuProviders.forEach(function(e){e.dispose()}),this._danmakuProviders.clear(),this._danmakuProviders=null},e.prototype.shouldCreateDanmaku=function(e){var t=!0,r=0,n=this.bulletproof.config.globalDanmakuCountThreshold;return this._danmakuProviders.forEach(function(o){t&&0===(e.flags&i.DanmakuProviderFlag.UnlimitedCreation)&&(r+=o.displayingDanmakuList.length,r>n&&(t=!1))}),t},e.prototype.addDanmakuProvider=function(e){n._util.isUndefinedOrNull(e)||this._danmakuProviders.has(e.danmakuKind)||(this._danmakuProviders.set(e.danmakuKind,e),e.initialize())},e.prototype.removeDanmakuProvider=function(e){!n._util.isUndefinedOrNull(e)&&this._danmakuProviders.has(e.danmakuKind)&&this._danmakuProviders["delete"](e.danmakuKind)},e.prototype.getDanmakuProvider=function(e){var t=this._danmakuProviders.get(e);return n._util.isUndefinedOrNull(t)?null:t},e.prototype.update=function(){this._danmakuProviders.forEach(function(e){e.update()})},e.prototype.render=function(e){},Object.defineProperty(e.prototype,"bulletproof",{get:function(){return this._bulletproof},enumerable:!0,configurable:!0}),e}();r.DanmakuCoordinator=o},{"../../lib/glantern/src/_util/_util":5,"./DanmakuProviderFlag":153}],150:[function(e,t,r){!function(e){e[e.Simple=0]="Simple",e[e.Mode7=7]="Mode7",e[e.Code=8]="Code"}(r.DanmakuKind||(r.DanmakuKind={}));r.DanmakuKind},{}],151:[function(e,t,r){var n=e("../../lib/glantern/src/_util/NotImplementedError"),i=function(){function e(e){this._danmakuProvider=null,this._bulletproof=null,this._danmakuProvider=e,this._bulletproof=e.bulletproof}return Object.defineProperty(e.prototype,"danmakuKind",{get:function(){throw new n.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bulletproof",{get:function(){return this._bulletproof},enumerable:!0,configurable:!0}),e}();r.DanmakuLayoutManagerBase=i},{"../../lib/glantern/src/_util/NotImplementedError":4}],152:[function(e,t,r){var n=e("../../lib/glantern/src/_util/NotImplementedError"),i=e("./DanmakuProviderFlag"),o=function(){function e(e){this._displayingDanmakuList=null,this._coordinator=null,this._layoutManager=null,this._danmakuLayer=null,this._bulletproof=null,this._coordinator=e,this._displayingDanmakuList=[],this._bulletproof=e.bulletproof}return Object.defineProperty(e.prototype,"danmakuKind",{get:function(){throw new n.NotImplementedError},enumerable:!0,configurable:!0}),e.prototype.update=function(){this.updateDisplayDanmakuList(),this.layoutManager.performLayout()},e.prototype.addDanmaku=function(e,t){return this.danmakuCoordinator.shouldCreateDanmaku(this)?this.__addDanmaku(e,t):null},Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayingDanmakuList",{get:function(){return this._displayingDanmakuList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmakuLayer",{get:function(){return this._danmakuLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmakuCoordinator",{get:function(){return this._coordinator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bulletproof",{get:function(){return this._bulletproof},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return i.DanmakuProviderFlag.None},enumerable:!0,configurable:!0}),e}();r.DanmakuProviderBase=o},{"../../lib/glantern/src/_util/NotImplementedError":4,"./DanmakuProviderFlag":153}],153:[function(e,t,r){!function(e){e[e.None=0]="None",e[e.UnlimitedCreation=1]="UnlimitedCreation"}(r.DanmakuProviderFlag||(r.DanmakuProviderFlag={}));r.DanmakuProviderFlag},{}],154:[function(e,t,r){var n=function(){function e(e,t){this._width=0,this._height=0,this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e}();r.StageResizedEventArgs=n},{}],155:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../DanmakuKind"),o=e("../../../lib/glantern/src/flash/display/DisplayObjectContainer"),a=e("../../bilibili/BiliBiliDanmakuApiContainer"),u=e("../../../lib/glantern/src/_util/_util"),l=function(e){function t(t,r,n){e.call(this,t,r),this._apiNames=null,this._apiContainer=null,this._lambda=null,this._content=null,this._bornTime=0,this._bulletproof=null,this._layoutManager=n,this._danmakuProvider=n.danmakuProvider,this._bulletproof=n.bulletproof}return n(t,e),t.prototype.dispose=function(){this.parent.removeChild(this),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"danmakuKind",{get:function(){return i.DanmakuKind.Code},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),t.prototype.getContent=function(){return this._content},t.prototype.getText=function(){return""},t.prototype.initialize=function(e,t){this._content=e,this._bornTime=t,this._apiContainer=new a.BiliBiliDanmakuApiContainer(this)},t.prototype.execute=function(){this.__censor()&&(this._lambda=this.__buildFunction(),this.__applyFunction())},Object.defineProperty(t.prototype,"bulletproof",{get:function(){return this._bulletproof},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bornTime",{get:function(){return this._bornTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lifeTime",{get:function(){return this.bulletproof.config.codeDanmakuLifeTimeSecs},enumerable:!0,configurable:!0}),t.prototype.__censor=function(){return!0},t.prototype.__update=function(){this.__removeDeadDCObjects(),this.__applyMotionGroups()},t.prototype.__render=function(e){},t.prototype.__buildFunction=function(){var e=this._apiContainer.api;this._apiNames=[];for(var t in e)this._apiNames.push(t);var r=this._apiNames.concat(this._content);return Function.prototype.constructor.apply(Object.create(null),r)},t.prototype.__applyFunction=function(){for(var e=this._apiContainer,t=[],r=0;r<this._apiNames.length;++r)t.push(e.api[this._apiNames[r]]);this._lambda.apply(null,t)},t.prototype.__applyMotionGroups=function(){for(var e,r=this.bulletproof.timeElapsed,n=0;n<this._children.length;++n)e=this._children[n],e.isCreatedByDanmaku&&(u._util.isUndefinedOrNull(e.createParams.motion)?u._util.isUndefinedOrNull(e.createParams.motionGroup)||t.__applyMotionGroup(e.createParams.motionGroup,r):t.__applyMotion(e.createParams.motion,r))},t.__applyMotionGroup=function(e,r){var n;if(!u._util.isUndefinedOrNull(e))for(var i=0;i<e.length;++i)n=e[i],t.__applyMotion(n,r)},t.__applyMotion=function(e,t){var r,n,i,o=["x","y","alpha","rotationZ","rotationY"];if(e.createdTime<=t&&t<=e.createdTime+e.maximumLifeTime)for(var a=0;a<o.length;++a)r=e[o[a]],u._util.isUndefinedOrNull(r)||(n=t-e.createdTime,u._util.isUndefinedOrNull(r.startDelay)||(n-=r.startDelay),n<=1e3*r.lifeTime&&(i=r.fromValue+(r.toValue-r.fromValue)/(1e3*r.lifeTime)*n,e.sourceObject[o[a]]=i))},t.prototype.__removeDeadDCObjects=function(){for(var e,t=this._bulletproof,r=0;r<this._children.length;++r)e=this._children[r],e.isCreatedByDanmaku&&e.extraCreateParams.bornTime+1e3*e.createParams.lifeTime<t.timeElapsed&&(this.removeChild(e),e.dispose(),--r)},t}(o.DisplayObjectContainer);r.CodeDanmaku=l},{"../../../lib/glantern/src/_util/_util":5,"../../../lib/glantern/src/flash/display/DisplayObjectContainer":32,"../../bilibili/BiliBiliDanmakuApiContainer":130,"../DanmakuKind":150}],156:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../lib/glantern/src/flash/display/DisplayObjectContainer"),o=function(e){function t(t,r){e.call(this,t,r)}return n(t,e),t.prototype.__update=function(){},t.prototype.__render=function(e){},t}(i.DisplayObjectContainer);r.CodeDanmakuLayer=o},{"../../../lib/glantern/src/flash/display/DisplayObjectContainer":32}],157:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../DanmakuLayoutManagerBase"),o=e("../DanmakuKind"),a=function(e){function t(t){e.call(this,t),this._danmakuProvider=t}return n(t,e),t.prototype.dispose=function(){},t.prototype.performLayout=function(){},t.prototype.onStageResize=function(e,t){},Object.defineProperty(t.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danmakuKind",{get:function(){return o.DanmakuKind.Code},enumerable:!0,configurable:!0}),t}(i.DanmakuLayoutManagerBase);r.CodeDanmakuLayoutManager=a},{"../DanmakuKind":150,"../DanmakuLayoutManagerBase":151}],158:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../DanmakuProviderBase"),o=e("../DanmakuKind"),a=e("./CodeDanmakuLayoutManager"),u=e("./CodeDanmaku"),l=e("../DanmakuProviderFlag"),s=e("./CodeDanmakuLayer"),c=function(e){function t(t){e.call(this,t),this._layoutManager=new a.CodeDanmakuLayoutManager(this)}return n(t,e),Object.defineProperty(t.prototype,"danmakuKind",{get:function(){return o.DanmakuKind.Code},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._danmakuLayer.parent.removeChild(this._danmakuLayer),this._danmakuLayer.dispose(),this._layoutManager.dispose(),this._layoutManager=null;for(var e=0;e<this.displayingDanmakuList.length;++e)this.displayingDanmakuList[e].dispose();for(;this.displayingDanmakuList.length>0;)this.displayingDanmakuList.pop();this._danmakuLayer=null,this._displayingDanmakuList=null},t.prototype.initialize=function(){var e=this.bulletproof.stage;this._danmakuLayer=new s.CodeDanmakuLayer(e,e),e.addChild(this._danmakuLayer)},t.prototype.canCreateDanmaku=function(e){return!0},t.prototype.removeDanmaku=function(e){var t=this.displayingDanmakuList.indexOf(e);return 0>t?!1:(this.bulletproof.stage.removeChild(e),this.displayingDanmakuList.splice(t,1),e.dispose(),!0)},t.prototype.isDanmakuDead=function(e){var t=this.bulletproof.timeElapsed;return t<e.bornTime||e.bornTime+1e3*e.lifeTime<t},t.prototype.updateDisplayDanmakuList=function(){for(var e,t=0;t<this.displayingDanmakuList.length;++t)e=this.displayingDanmakuList[t],this.isDanmakuDead(e)&&(this.removeDanmaku(e),--t)},Object.defineProperty(t.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayingDanmakuList",{get:function(){return this._displayingDanmakuList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danmakuLayer",{get:function(){return this._danmakuLayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return l.DanmakuProviderFlag.UnlimitedCreation},enumerable:!0,configurable:!0}),t.prototype.__addDanmaku=function(e,t){var r=new u.CodeDanmaku(this.bulletproof.stage,this.danmakuLayer,this.layoutManager);return this.danmakuLayer.addChild(r),r.initialize(e,this.bulletproof.timeElapsed),r.execute(),this.displayingDanmakuList.push(r),r},t}(i.DanmakuProviderBase);r.CodeDanmakuProvider=c},{"../DanmakuKind":150,"../DanmakuProviderBase":152,"../DanmakuProviderFlag":153,"./CodeDanmaku":155,"./CodeDanmakuLayer":156,
"./CodeDanmakuLayoutManager":157}],159:[function(e,t,r){var n=e("../../../../lib/glantern/src/_util/_util"),i=function(){function e(){}return e.fillInCreateParams=function(e,t,r){function i(e){for(var r,i=["x","y","alpha","rotationZ","rotationY"],o=0,a=0,u=0;u<i.length;++u)r=e[i[u]],n._util.isUndefinedOrNull(r)||(n._util.isUndefinedOrNull(r.lifeTime)&&(r.lifeTime=t.extraCreateParams.creator.lifeTime),o=n._util.isUndefinedOrNull(r.startDelay)?Math.max(o,1e3*r.lifeTime):Math.max(o,1e3*r.lifeTime+r.startDelay),a=Math.max(a,1e3*r.lifeTime));return{maxLife:o,literalMaxLife:a}}var o=Object.create(null);o.color=r.color,o.alpha=r.alpha,o.fontsize=r.fontsize,o.lifeTime=void 0!==r.lifeTime?r.lifeTime:Number.MAX_VALUE,o.parent=r.parent,o.x=r.x,o.y=r.y,n._util.isUndefinedOrNull(r.motion)||n._util.isUndefinedOrNull(r.motionGroup)||console.warn("'motion' and 'motionGroup' are both set!");var a,u,l=e.timeElapsed;if(n._util.isUndefinedOrNull(r.motion)||(u=r.motion,u.sourceObject=t,u.createdTime=l,a=i(u),u.maximumLifeTime=a.maxLife),!n._util.isUndefinedOrNull(r.motionGroup))for(var s=0;s<r.motionGroup.length;++s)u=r.motionGroup[s],u.sourceObject=t,u.createdTime=l,a=i(u),u.maximumLifeTime=a.maxLife,l+=a.literalMaxLife;return o.motion=r.motion,o.motionGroup=r.motionGroup,o},e.applyGeneralCreateParams=function(e,t){n._util.isUndefinedOrNull(t.alpha)||(e.alpha=t.alpha),n._util.isUndefinedOrNull(t.x)||(e.x=t.x),n._util.isUndefinedOrNull(t.y)||(e.y=t.y)},e.applyButtonCreateParams=function(t,r){e.applyGeneralCreateParams(t,r)},e}();r.DCOHelper=i},{"../../../../lib/glantern/src/_util/_util":5}],160:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../lib/glantern/src/flash/display/Shape"),o=e("./DCOHelper"),a=function(e){function t(t,r,n,i){e.call(this,t,r),this._extraCreateParams=null,this._createParams=null,this._createParams=o.DCOHelper.fillInCreateParams(i.bulletproof,this,n),this._extraCreateParams=i,o.DCOHelper.applyGeneralCreateParams(this,this._createParams)}return n(t,e),Object.defineProperty(t.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraCreateParams",{get:function(){return this._extraCreateParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCreatedByDanmaku",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(i.Shape);r.DCShape=a},{"../../../../lib/glantern/src/flash/display/Shape":42,"./DCOHelper":159}],161:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../lib/glantern/src/flash/utils/Timer"),o=e("../../../../lib/glantern/src/flash/events/TimerEvent"),a=function(e){function t(t,r,n){void 0===n&&(n=1),e.call(this,r,n),this._closure=null,this._funcSource=null,this._closureIsFunction=!1,"string"==typeof t?(this._funcSource=t,this._closure=new Function(this._funcSource),this._closureIsFunction=!1):(this._closure=t,this._closureIsFunction=!0),this.addEventListener(o.TimerEvent.TIMER,this.__closureTimerHandler.bind(this)),this.addEventListener(o.TimerEvent.TIMER_COMPLETE,this.__closureTimerCompleteHandler.bind(this))}return n(t,e),t.prototype.__closureTimerHandler=function(){this._closure.call(null)},t.prototype.__closureTimerCompleteHandler=function(){},t}(i.Timer);r.FiniteTimer=a},{"../../../../lib/glantern/src/flash/events/TimerEvent":53,"../../../../lib/glantern/src/flash/utils/Timer":81}],162:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./DCOHelper")),n(e("./DCShape"))},{"./DCOHelper":159,"./DCShape":160}],163:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./CodeDanmaku")),n(e("./CodeDanmakuLayoutManager")),n(e("./CodeDanmakuProvider")),n(e("./CodeDanmakuLayer"));var i=e("./dco/index");r.dco=i},{"./CodeDanmaku":155,"./CodeDanmakuLayer":156,"./CodeDanmakuLayoutManager":157,"./CodeDanmakuProvider":158,"./dco/index":162}],164:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./DanmakuCoordinator")),n(e("./DanmakuKind")),n(e("./DanmakuLayoutManagerBase")),n(e("./DanmakuProviderBase")),n(e("./StageResizedEventArgs"));var i=e("./code/index");r.code=i;var o=e("./simple/index");r.simple=o},{"./DanmakuCoordinator":149,"./DanmakuKind":150,"./DanmakuLayoutManagerBase":151,"./DanmakuProviderBase":152,"./StageResizedEventArgs":154,"./code/index":163,"./simple/index":171}],165:[function(e,t,r){!function(e){e[e.Flying=0]="Flying",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom",e[e.TopLeft=3]="TopLeft",e[e.TopRight=4]="TopRight",e[e.BottomLeft=5]="BottomLeft",e[e.BottomRight=6]="BottomRight"}(r.SimpleDanmakuType||(r.SimpleDanmakuType={}));r.SimpleDanmakuType},{}],166:[function(e,t,r){var n=e("../DanmakuKind"),i=function(){function e(e,t){this.isYPositionSet=!1,this.x=0,this.y=0,this.visible=!1,this.displaying=!1,this._content=null,this._bornTime=0,this._bulletproof=null,this._createParams=null,this._textWidth=-1,this._textHeight=-1,this._layoutManager=e,this._danmakuProvider=e.danmakuProvider,this._bulletproof=e.bulletproof,this._createParams=t}return e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"danmakuKind",{get:function(){return n.DanmakuKind.Simple},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),e.prototype.getContent=function(){return this._content},e.prototype.getText=function(){return this._content},e.prototype.initialize=function(e,t){this._content=e,this._bornTime="number"==typeof this.createParams.bornTime?this.createParams.bornTime:t},Object.defineProperty(e.prototype,"bulletproof",{get:function(){return this._bulletproof},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bornTime",{get:function(){return this._bornTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lifeTime",{get:function(){return this.bulletproof.config.simpleDanmakuLifeTimeSecs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._textHeight<0&&(this._textHeight=1.5*this.createParams.fontSize),this._textHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){if(this._textWidth<0){var e=this.danmakuProvider.danmakuLayer.context2D;e.font=this.createParams.fontSize.toString()+'pt "'+this.createParams.fontName+'"',this._textWidth=e.measureText(this.getText()).width}return this._textWidth},enumerable:!0,configurable:!0}),e}();r.SimpleDanmaku=i},{"../DanmakuKind":150}],167:[function(e,t,r){var n=e("../../../lib/glantern/src/_util/_util"),i=function(){function e(){}return e.getDefaultParams=function(e){return n._util.deepClone(e.defaultSimpleDanmakuCreateParams)},e.fillInCreateParams=function(e,t){function r(r){n._util.isUndefinedOrNull(t[r])&&(t[r]=e.defaultSimpleDanmakuCreateParams[r])}r("fontName"),r("fontStyle"),r("fontSize"),r("type"),r("border"),r("borderColor"),r("borderThickness"),r("background"),r("backgroundColor"),r("textColor"),r("outline"),r("outlineColor"),r("outlineThickness")},e}();r.SimpleDanmakuHelper=i},{"../../../lib/glantern/src/_util/_util":5}],168:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../lib/glantern/src/flash/text/TextField"),o=e("../../../lib/glantern/src/webgl/RenderHelper"),a=e("../../../lib/glantern/src/_util/_util"),u=function(e){function t(t,r,n){e.call(this,t,r),this._provider=null,this._provider=n}return n(t,e),Object.defineProperty(t.prototype,"danmakuProvider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context2D",{get:function(){return this._context2D},enumerable:!0,configurable:!0}),t.prototype.__update=function(){this.danmakuProvider.displayingDanmakuList.length>0&&(this._canvasTarget.updateImageSize(),this.__drawTextElements(this.context2D))},t.prototype.__render=function(e){this.visible&&this.alpha>0&&this.danmakuProvider.displayingDanmakuList.length>0&&(this._canvasTarget.updateImageContent(),o.RenderHelper.copyImageContent(e,this._canvasTarget,e.currentRenderTarget,!1,!0,this.transform.matrix3D,this.alpha,!1))},t.prototype.__drawTextElements=function(e){var t,r=null,n=this.danmakuProvider.displayingDanmakuList;e.clearRect(0,0,e.canvas.width,e.canvas.height);for(var i=0;i<n.length;++i)t=n[i],this.__drawSimpleDanmaku(e,t,r),r=t},t.prototype.__drawSimpleDanmaku=function(e,t,r){if(t.visible){var n=t.x,i=t.y,o=t.createParams,u=o.outline&&o.outlineThickness>0?o.outlineThickness:0,l=o.border&&o.borderThickness>0?o.borderThickness:0;(a._util.isUndefinedOrNull(r)||o.fontName!==r.createParams.fontName||o.fontSize!==r.createParams.fontSize)&&(e.font=o.fontStyle.toString()+" "+o.fontSize.toString()+'pt "'+o.fontName+'"');var s=t.textWidth,c=t.textHeight;o.background&&(e.fillStyle=a._util.colorToCssSharp(o.backgroundColor),e.fillRect(n,i,s+2*l,c+2*l)),e.fillStyle=a._util.colorToCssSharp(o.textColor),e.fillText(t.getText(),n+u+l,i+.75*c+l),o.outline&&o.outlineThickness>0&&(e.lineWidth=o.outlineThickness,e.strokeStyle=a._util.colorToCssSharp(o.outlineColor),e.strokeText(t.getText(),n+u+l,i+.75*c+l)),o.border&&o.borderThickness>0&&(e.lineWidth=o.borderThickness,e.strokeStyle=a._util.colorToCssSharp(o.borderColor),e.strokeRect(n+l,i+l,s+2*l,this.textHeight+2*l))}},t}(i.TextField);r.SimpleDanmakuLayer=u},{"../../../lib/glantern/src/_util/_util":5,"../../../lib/glantern/src/flash/text/TextField":73,"../../../lib/glantern/src/webgl/RenderHelper":92}],169:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../DanmakuLayoutManagerBase"),o=e("../DanmakuKind"),a=e("./SimpleDanamkuType"),u=function(e){function t(t){e.call(this,t),this._stageWidth=0,this._stageHeight=0,this._danmakuProvider=t}return n(t,e),t.prototype.dispose=function(){},t.prototype.performLayout=function(){function e(e){return e.bornTime<=s&&s<=e.bornTime+1e3*e.lifeTime}function t(e){var t=p.flying,r=c.stageWidth,n=c.stageHeight,i=(s-e.bornTime)/(1e3*e.lifeTime);e.x=r-i*(r+e.textWidth+5),t.nextYPosition>n-e.textHeight&&(t.nextYPosition=0),e.isYPositionSet?e.x<r-e.textWidth?e.y<=t.nextYPosition&&(t.nextYPosition=e.y):e.y<=t.nextYPosition&&(t.nextYPosition+=e.textHeight):(t.lowestYPosition+e.textHeight<n&&(t.nextYPosition=t.lowestYPosition),e.y=t.nextYPosition,t.nextYPosition+=e.textHeight,e.isYPositionSet=!0),t.lowestYPosition<e.y+e.textHeight&&(t.lowestYPosition=e.y+e.textHeight)}function r(e){}function n(e){}function i(e){}function o(e){}function u(e){}function l(e){}var s=this.bulletproof.timeElapsed,c=this.bulletproof.stage,h=this.danmakuProvider.displayingDanmakuList,p={bulletproof:this.bulletproof,flying:{nextYPosition:0,lowestYPosition:0}};if(h.length>0)for(var f=0;f<h.length;++f){var d=h[f];if(e(d))switch(d.visible||(d.visible=!0),d.createParams.type){case a.SimpleDanmakuType.Flying:t(d);break;case a.SimpleDanmakuType.Top:r(d);break;case a.SimpleDanmakuType.Bottom:n(d);break;case a.SimpleDanmakuType.TopLeft:i(d);break;case a.SimpleDanmakuType.TopRight:o(d);break;case a.SimpleDanmakuType.BottomLeft:u(d);break;case a.SimpleDanmakuType.BottomRight:l(d);break;default:console.warn("What type is this?")}else d.visible=!1}},Object.defineProperty(t.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danmakuKind",{get:function(){return o.DanmakuKind.Simple},enumerable:!0,configurable:!0}),t.prototype.onStageResize=function(e,t){this._stageWidth=t.width,this._stageHeight=t.height},t}(i.DanmakuLayoutManagerBase);r.SimpleDanmakuLayoutManager=u},{"../DanmakuKind":150,"../DanmakuLayoutManagerBase":151,"./SimpleDanamkuType":165}],170:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../DanmakuProviderBase"),o=e("../DanmakuKind"),a=e("./SimpleDanmakuLayoutManager"),u=e("./SimpleDanmaku"),l=e("../DanmakuProviderFlag"),s=e("./SimpleDanmakuLayer"),c=e("./SimpleDanmakuHelper"),h=e("../StageResizedEventArgs"),p=e("../../../lib/glantern/src/_util/_util"),f=function(e){function t(t){e.call(this,t),this._shouldSortDanmakuList=!1,this._summaryDanmakuList=null,this._partialDanmakuCounts=null,this._partialDisplayingDanmakuCounts=null,this._layoutManager=new a.SimpleDanmakuLayoutManager(this),this._partialDanmakuCounts=[0,0,0,0,0,0,0],this._partialDisplayingDanmakuCounts=[0,0,0,0,0,0,0],this._summaryDanmakuList=[]}return n(t,e),Object.defineProperty(t.prototype,"danmakuKind",{get:function(){return o.DanmakuKind.Simple},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var e=this.bulletproof.stage;this._danmakuLayer=new s.SimpleDanmakuLayer(e,e,this),e.addChild(this.danmakuLayer),this.layoutManager.onStageResize(this,new h.StageResizedEventArgs(e.stageWidth,e.stageHeight))},t.prototype.dispose=function(){this._danmakuLayer.parent.removeChild(this._danmakuLayer),this._danmakuLayer.dispose(),this._danmakuLayer=null,this._layoutManager.dispose(),this._layoutManager=null;for(var e=0;e<this.summaryDanmakuList.length;++e)for(var e=0;e<this.summaryDanmakuList.length;++e)this.summaryDanmakuList[e].dispose();for(;this.summaryDanmakuList.length>0;)this.summaryDanmakuList.pop();for(;this.displayingDanmakuList.length>0;)this.displayingDanmakuList.pop();this._summaryDanmakuList=null,this._displayingDanmakuList=null},t.prototype.canCreateDanmaku=function(e){var t=this.bulletproof.config,r=p._util.isUndefinedOrNull(e)?t.defaultSimpleDanmakuCreateParams.type:e.type,n=this.partialDanmakuCounts[r];return p._util.isUndefined(n)?!1:n<t.simpleDanmakuPartCountThreshold},t.prototype.addDanmaku=function(t,r){return e.prototype.addDanmaku.call(this,t,r)},t.prototype.removeDanmaku=function(e){var t,r=!1;return t=this.summaryDanmakuList.indexOf(e),t>=0&&(this.summaryDanmakuList.splice(t,1),--this.partialDanmakuCounts[e.createParams.type],r=!0),t=this.displayingDanmakuList.indexOf(e),t>=0&&(this.displayingDanmakuList.splice(t,1),--this.partialDisplayingDanmakuCounts[e.createParams.type]),r},t.prototype.updateDisplayDanmakuList=function(){var e,t=this.partialDisplayingDanmakuCounts,r=this.summaryDanmakuList,n=this.displayingDanmakuList,i=this.bulletproof.timeElapsed,o=this.bulletproof.config;if(n.length>0){for(var a=null,u=0;u<n.length&&(e=n[u],this.isDanmakuDead(e));++u){a=e;var l=e.createParams.type;--t[l],n.splice(u,1),--u}var s=n.length>0?n[n.length-1]:a;if(u=r.indexOf(s)+1,u<r.length)for(;u<r.length&&(e=r[u],!(e.bornTime>i));++u){var l=e.createParams.type;t[l]<o.simpleDanmakuPartCountThreshold&&(n.push(e),++t[l])}}else for(var u=0;u<r.length&&(e=r[u],!(e.bornTime>i));++u)if(!this.isDanmakuDead(e)){var l=e.createParams.type;t[l]<o.simpleDanmakuPartCountThreshold&&(n.push(r[u]),++t[l])}},t.prototype.isDanmakuDead=function(e){var t=this.bulletproof.timeElapsed;return t<e.bornTime||e.bornTime+1e3*e.lifeTime<t},Object.defineProperty(t.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayingDanmakuList",{get:function(){return this._displayingDanmakuList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"partialDanmakuCounts",{get:function(){return this._partialDanmakuCounts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"partialDisplayingDanmakuCounts",{get:function(){return this._partialDisplayingDanmakuCounts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"summaryDanmakuList",{get:function(){return this._summaryDanmakuList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return l.DanmakuProviderFlag.None},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danmakuLayer",{get:function(){return this._danmakuLayer},enumerable:!0,configurable:!0}),t.prototype.update=function(){this._shouldSortDanmakuList&&(this.summaryDanmakuList.sort(function(e,t){return e.bornTime-t.bornTime}),this._shouldSortDanmakuList=!1),e.prototype.update.call(this)},t.prototype.__addDanmaku=function(e,t){var r=this.bulletproof.config;p._util.isUndefined(t)?t=c.SimpleDanmakuHelper.getDefaultParams(r):c.SimpleDanmakuHelper.fillInCreateParams(r,t);var n=new u.SimpleDanmaku(this.layoutManager,t);return n.initialize(e,this.bulletproof.timeElapsed),this.summaryDanmakuList.push(n),++this.partialDanmakuCounts[t.type],this._shouldSortDanmakuList=!0,n},t}(i.DanmakuProviderBase);r.SimpleDanmakuProvider=f},{"../../../lib/glantern/src/_util/_util":5,"../DanmakuKind":150,"../DanmakuProviderBase":152,"../DanmakuProviderFlag":153,"../StageResizedEventArgs":154,"./SimpleDanmaku":166,"./SimpleDanmakuHelper":167,"./SimpleDanmakuLayer":168,"./SimpleDanmakuLayoutManager":169}],171:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./SimpleDanmaku")),n(e("./SimpleDanmakuLayoutManager")),n(e("./SimpleDanmakuProvider")),n(e("./SimpleDanamkuType")),n(e("./SimpleDanmakuHelper")),n(e("./SimpleDanmakuLayer"))},{"./SimpleDanamkuType":165,"./SimpleDanmaku":166,"./SimpleDanmakuHelper":167,"./SimpleDanmakuLayer":168,"./SimpleDanmakuLayoutManager":169,"./SimpleDanmakuProvider":170}],172:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}var i="Bulletproof/0.6.0-alpha (BiliBili, like BSE, like CCL, like Flash) HTML5/*";r.version=i,n(e("./Bulletproof"));var o=e("./bilibili/index");r.bilibili=o;var a=e("./danmaku/index");r.danmaku=a;var u=e("./interactive/index");r.interactive=u;var l=e("./BulletproofConfig");r.configuration=l.BulletproofConfig,n(e("../lib/glantern/src/index"))},{"../lib/glantern/src/index":83,"./Bulletproof":128,"./BulletproofConfig":129,"./bilibili/index":147,"./danmaku/index":164,"./interactive/index":173}],173:[function(e,t,r){var n=e("./video/index");r.video=n},{"./video/index":178}],174:[function(e,t,r){var n=e("./VideoPlayerState"),i=e("../../../lib/glantern/src/_util/NotImplementedError"),o=function(){function e(){}return Object.defineProperty(e.prototype,"currentTime",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRatio",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoPlay",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultMuted",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultPlaybackRate",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){throw new i.NotImplementedError},set:function(e){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateText",{get:function(){return n.VideoPlayerState[this.state]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seeking",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoWidth",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoHeight",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileURL",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasVideo",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){throw new i.NotImplementedError},enumerable:!0,configurable:!0}),e}();r.VideoPlayerBase=o},{"../../../lib/glantern/src/_util/NotImplementedError":4,"./VideoPlayerState":175}],175:[function(e,t,r){!function(e){e[e.Invalid=-1]="Invalid",e[e.Created=0]="Created",e[e.Initialized=1]="Initialized",e[e.Loaded=2]="Loaded",e[e.Playing=3]="Playing",e[e.Paused=4]="Paused",e[e.Stopped=5]="Stopped",e[e.Seeking=6]="Seeking"}(r.VideoPlayerState||(r.VideoPlayerState={}));r.VideoPlayerState},{}],176:[function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VideoPlayerBase"),o=e("../VideoPlayerState"),a=e("../../../../lib/glantern/src/_util/_util"),u=function(e){function t(){e.call(this),this._videoElement=null,this._state=o.VideoPlayerState.Invalid,this._originalStateBeforeSeeking=o.VideoPlayerState.Invalid,this._eventHandlers=null,this._videoElement=window.document.createElement("video"),this._eventHandlers=[],this._state=o.VideoPlayerState.Created}return n(t,e),t.prototype.initialize=function(e,t){function r(e,t){var r=t.bind(this);i.push({name:e,handler:r}),n.addEventListener(e,r)}var n=this._videoElement,i=this._eventHandlers;n.width=e,n.height=t,r("ended",this.__onEnded),r("play",this.__onPlay),r("playing",this.__onPlaying),r("pause",this.__onPause),r("loadeddata",this.__onLoadedData),r("seeked",this.__onSeeked),r("seeking",this.__onSeeking)},t.prototype.dispose=function(){for(var e=this._videoElement,t=e.parentElement,r=this._eventHandlers,n=0;n<r.length;++n)e.removeEventListener(r[n].name,r[n].handler);for(a._util.isUndefinedOrNull(t)||t.removeChild(e);r.length>0;)r.pop();this._state=o.VideoPlayerState.Invalid,this._videoElement=null,this._eventHandlers=null},t.prototype.load=function(e){if(this._state!==o.VideoPlayerState.Invalid){this.unload();try{return this._videoElement.src=e,this._state=o.VideoPlayerState.Loaded,!0}catch(t){return!1}}},t.prototype.unload=function(){this.hasVideo&&(this.stop(),this._videoElement.src=null,this._state=o.VideoPlayerState.Initialized)},t.prototype.play=function(){this.hasVideo&&(this._videoElement.play(),this._state=o.VideoPlayerState.Playing)},t.prototype.pause=function(){this.hasVideo&&(this._videoElement.pause(),this._state=o.VideoPlayerState.Paused)},t.prototype.resume=function(){this.hasVideo&&this._state===o.VideoPlayerState.Paused&&this.play()},t.prototype.stop=function(){this.hasVideo&&(this._videoElement.pause(),this._videoElement.currentTime=0,this._state=o.VideoPlayerState.Stopped)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.hasVideo?this._videoElement.currentTime:0},set:function(e){this.hasVideo&&(this._videoElement.currentTime=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentRatio",{get:function(){return this.hasVideo?this.currentTime/this.duration:0},set:function(e){this.hasVideo&&(e=a._util.limitInto(e,0,1),this.currentTime=e*this.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.hasVideo?this._videoElement.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoPlay",{get:function(){return null!==this._videoElement?this._videoElement.autoplay:!1},set:function(e){null!==this._videoElement&&(this._videoElement.autoplay=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return null!==this._videoElement?this._videoElement.loop:!1},set:function(e){null!==this._videoElement&&(this._videoElement.loop=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return null!==this._videoElement?this._videoElement.muted:!1},set:function(e){null!==this._videoElement&&(this._videoElement.muted=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultMuted",{get:function(){return null!==this._videoElement?this._videoElement.defaultMuted:!1},set:function(e){null!==this._videoElement&&(this._videoElement.defaultMuted=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return null!==this._videoElement?this._videoElement.playbackRate:0},set:function(e){null!==this._videoElement&&(this._videoElement.playbackRate=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPlaybackRate",{get:function(){return null!==this._videoElement?this._videoElement.defaultPlaybackRate:0},set:function(e){null!==this._videoElement&&(this._videoElement.defaultPlaybackRate=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return null!==this._videoElement?this._videoElement.volume/200:0},set:function(e){null!==this._videoElement&&(e=a._util.limitInto(e,0,1),this._videoElement.volume=200*e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this.state===o.VideoPlayerState.Playing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.state===o.VideoPlayerState.Paused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seeking",{get:function(){return null!==this._videoElement?this._videoElement.seeking:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){return null!==this._videoElement?this._videoElement.videoWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){return null!==this._videoElement?this._videoElement.videoHeight:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileURL",{get:function(){return null!==this._videoElement?this._videoElement.currentSrc:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasVideo",{get:function(){return this.state>o.VideoPlayerState.Initialized},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._videoElement},enumerable:!0,configurable:!0}),t.prototype.__onEnded=function(e){this._state=o.VideoPlayerState.Stopped},t.prototype.__onPlay=function(e){this._state=o.VideoPlayerState.Playing},t.prototype.__onPause=function(e){this._state=o.VideoPlayerState.Paused},t.prototype.__onPlaying=function(e){this._state=o.VideoPlayerState.Playing},t.prototype.__onSeeked=function(e){this._state=this._originalStateBeforeSeeking},t.prototype.__onSeeking=function(e){this._originalStateBeforeSeeking=this._state,this._state=o.VideoPlayerState.Seeking},t.prototype.__onLoadedData=function(e){this._state===o.VideoPlayerState.Initialized&&(this._state=o.VideoPlayerState.Loaded)},t}(i.VideoPlayerBase);r.Html5VideoPlayer=u},{"../../../../lib/glantern/src/_util/_util":5,"../VideoPlayerBase":174,"../VideoPlayerState":175}],177:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./Html5VideoPlayer"))},{"./Html5VideoPlayer":176}],178:[function(e,t,r){function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./VideoPlayerBase")),n(e("./VideoPlayerState"));var i=e("./html5/index");r.html5=i},{"./VideoPlayerBase":174,"./VideoPlayerState":175,"./html5/index":177}],179:[function(e,t,r){"use strict";function n(e,t){return e.b===t.b&&e.a===t.a}function i(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function o(e,t,r){var n=t.b-e.b,i=r.b-t.b;return n+i>0?i>n?t.a-e.a+n/(n+i)*(e.a-r.a):t.a-r.a+i/(n+i)*(r.a-e.a):0}function a(e,t,r){var n=t.b-e.b,i=r.b-t.b;return n+i>0?(t.a-r.a)*n+(t.a-e.a)*i:0}function u(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function l(e,t,r){var n=t.a-e.a,i=r.a-t.a;return n+i>0?i>n?t.b-e.b+n/(n+i)*(e.b-r.b):t.b-r.b+i/(n+i)*(r.b-e.b):0}function s(e,t,r){var n=t.a-e.a,i=r.a-t.a;return n+i>0?(t.b-r.b)*n+(t.b-e.b)*i:0}function c(e){return i(e.b.a,e.a)}function h(e){return i(e.a,e.b.a)}function p(e,t,r,n){return e=0>e?0:e,r=0>r?0:r,r>=e?0===r?(t+n)/2:t+e/(e+r)*(n-t):n+r/(e+r)*(t-n)}function f(e){var t=y(e.b);return v(t,e.c),v(t.b,e.c),T(t,e.a),t}function d(e,t){var r=!1,n=!1;e!==t&&(t.a!==e.a&&(n=!0,w(t.a,e.a)),t.d!==e.d&&(r=!0,S(t.d,e.d)),b(t,e),n||(v(t,e.a),e.a.c=e),r||(T(t,e.d),e.d.a=e))}function _(e){var t=e.b,r=!1;e.d!==e.b.d&&(r=!0,S(e.d,e.b.d)),e.c===e?w(e.a,null):(e.b.d.a=J(e),e.a.c=e.c,b(e,J(e)),r||T(e,e.d)),t.c===t?(w(t.a,null),S(t.d,null)):(e.d.a=J(t),t.a.c=t.c,b(t,J(t))),P(e)}function m(e){var t=y(e),r=t.b;return b(t,e.e),t.a=e.b.a,v(r,t.a),t.d=r.d=e.d,t=t.b,b(e.b,J(e.b)),b(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function g(e,t){var r=!1,n=y(e),i=n.b;return t.d!==e.d&&(r=!0,S(t.d,e.d)),b(n,e.e),b(i,t),n.a=e.b.a,i.a=t.a,n.d=i.d=e.d,e.d.a=i,r||T(n,e.d),n}function y(e){var t=new Z,r=new Z,n=e.b.h;return r.h=n,n.b.h=t,t.h=e,e.b.h=r,t.b=r,t.c=t,t.e=r,r.b=t,r.c=r,r.e=t}function b(e,t){var r=e.c,n=t.c;r.b.e=t,n.b.e=e,e.c=n,t.c=r}function v(e,t){var r=t.f,n=new ee(t,r);r.e=n,t.f=n,r=n.c=e;do r.a=n,r=r.c;while(r!==e)}function T(e,t){var r=t.d,n=new Q(t,r);r.b=n,t.d=n,n.a=e,n.c=t.c,r=e;do r.d=n,r=r.e;while(r!==e)}function P(e){var t=e.h;e=e.b.h,t.b.h=e,e.b.h=t}function w(e,t){var r=e.c,n=r;do n.a=t,n=n.c;while(n!==r);r=e.f,n=e.e,n.f=r,r.e=n}function S(e,t){var r=e.a,n=r;do n.d=t,n=n.e;while(n!==r);r=e.d,n=e.b,n.d=r,r.b=n}function E(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}function x(e,t){e.f+=t.f,e.b.f+=t.b.f}function O(e,t,r){return e=e.a,t=t.a,r=r.a,t.b.a===e?r.b.a===e?i(t.a,r.a)?0>=a(r.b.a,t.a,r.a):0<=a(t.b.a,r.a,t.a):0>=a(r.b.a,e,r.a):r.b.a===e?0<=a(t.b.a,e,t.a):(t=o(t.b.a,e,t.a),e=o(r.b.a,e,r.a),t>=e)}function C(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function D(e,t){_(e.a),e.c=!1,e.a=t,t.i=e}function R(e){var t=e.a.a;do e=de(e);while(e.a.a===t);return e.c&&(t=g(fe(e).a.b,e.a.e),D(e,t),e=de(e)),e}function I(e,t,r){var n=new pe;return n.a=r,n.e=X(e.f,t.e,n),r.i=n}function F(e,t){switch(e.s){case 100130:return 0!==(1&t);case 100131:return 0!==t;case 100132:return t>0;case 100133:return 0>t;case 100134:
return t>=2||-2>=t}return!1}function N(e){var t=e.a,r=t.d;r.c=e.d,r.a=t,C(e)}function M(e,t,r){for(e=t,t=t.a;e!==r;){e.c=!1;var n=fe(e),i=n.a;if(i.a!==t.a){if(!n.c){N(e);break}i=g(t.c.b,i.b),D(n,i)}t.c!==i&&(d(J(i),i),d(t,i)),N(e),t=n.a,e=n}return t}function k(e,t,r,n,i,o){var a=!0;do I(e,t,r.b),r=r.c;while(r!==n);for(null===i&&(i=fe(t).a.b.c);n=fe(t),r=n.a.b,r.a===i.a;)r.c!==i&&(d(J(r),r),d(J(i),r)),n.f=t.f-r.f,n.d=F(e,n.f),t.b=!0,!a&&L(e,t)&&(x(r,i),C(t),_(i)),a=!1,t=n,i=r;t.b=!0,o&&G(e,t)}function j(e,t,r,n,i){var o=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o?e.o(o,r,n,e.c)||null:null,null===t.d&&(i?e.n||(K(e,100156),e.n=!0):t.d=r[0])}function A(e,t,r){var n=[null,null,null,null];n[0]=t.a.d,n[1]=r.a.d,j(e,t.a,n,[.5,.5,0,0],!1),d(t,r)}function B(e,t,r,n,i){var o=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),a=Math.abs(r.b-e.b)+Math.abs(r.a-e.a),u=i+1;n[i]=.5*a/(o+a),n[u]=.5*o/(o+a),e.g[0]+=n[i]*t.g[0]+n[u]*r.g[0],e.g[1]+=n[i]*t.g[1]+n[u]*r.g[1],e.g[2]+=n[i]*t.g[2]+n[u]*r.g[2]}function L(e,t){var r=fe(t),o=t.a,u=r.a;if(i(o.a,u.a)){if(0<a(u.b.a,o.a,u.a))return!1;if(n(o.a,u.a)){if(o.a!==u.a){var r=e.e,l=o.a.h;if(l>=0){var r=r.b,s=r.d,c=r.e,h=r.c,p=h[l];s[p]=s[r.a],h[s[p]]=p,p<=--r.a&&(1>=p?ce(r,p):i(c[s[p>>1]],c[s[p]])?ce(r,p):he(r,p)),c[l]=null,h[l]=r.b,r.b=l}else for(r.c[-(l+1)]=null;0<r.a&&null===r.c[r.d[r.a-1]];)--r.a;A(e,J(u),o)}}else m(u.b),d(o,J(u)),t.b=r.b=!0}else{if(0>a(o.b.a,u.a,o.a))return!1;de(t).b=t.b=!0,m(o.b),d(J(u),o)}return!0}function U(e,t){var r=fe(t),c=t.a,h=r.a,f=c.a,_=h.a,g=c.b.a,y=h.b.a,b=new ee;if(a(g,e.a,f),a(y,e.a,_),f===_||Math.min(f.a,g.a)>Math.max(_.a,y.a))return!1;if(i(f,_)){if(0<a(y,f,_))return!1}else if(0>a(g,_,f))return!1;var v,T,P=g,w=f,S=y,E=_;if(i(P,w)||(v=P,P=w,w=v),i(S,E)||(v=S,S=E,E=v),i(P,S)||(v=P,P=S,S=v,v=w,w=E,E=v),i(S,w)?i(w,E)?(v=o(P,S,w),T=o(S,w,E),0>v+T&&(v=-v,T=-T),b.b=p(v,S.b,T,w.b)):(v=a(P,S,w),T=-a(P,E,w),0>v+T&&(v=-v,T=-T),b.b=p(v,S.b,T,E.b)):b.b=(S.b+w.b)/2,u(P,w)||(v=P,P=w,w=v),u(S,E)||(v=S,S=E,E=v),u(P,S)||(v=P,P=S,S=v,v=w,w=E,E=v),u(S,w)?u(w,E)?(v=l(P,S,w),T=l(S,w,E),0>v+T&&(v=-v,T=-T),b.a=p(v,S.a,T,w.a)):(v=s(P,S,w),T=-s(P,E,w),0>v+T&&(v=-v,T=-T),b.a=p(v,S.a,T,E.a)):b.a=(S.a+w.a)/2,i(b,e.a)&&(b.b=e.a.b,b.a=e.a.a),P=i(f,_)?f:_,i(P,b)&&(b.b=P.b,b.a=P.a),n(b,f)||n(b,_))return L(e,t),!1;if(!n(g,e.a)&&0<=a(g,e.a,b)||!n(y,e.a)&&0>=a(y,e.a,b)){if(y===e.a)return m(c.b),d(h.b,c),t=R(t),c=fe(t).a,M(e,fe(t),r),k(e,t,J(c),c,c,!0),!0;if(g===e.a){m(h.b),d(c.e,J(h)),f=r=t,_=f.a.b.a;do f=de(f);while(f.a.b.a===_);return t=f,f=fe(t).a.b.c,r.a=J(h),h=M(e,r,null),k(e,t,h.c,c.b.c,f,!0),!0}return 0<=a(g,e.a,b)&&(de(t).b=t.b=!0,m(c.b),c.a.b=e.a.b,c.a.a=e.a.a),0>=a(y,e.a,b)&&(t.b=r.b=!0,m(h.b),h.a.b=e.a.b,h.a.a=e.a.a),!1}return m(c.b),m(h.b),d(J(h),c),c.a.b=b.b,c.a.a=b.a,c.a.h=ne(e.e,c.a),c=c.a,h=[0,0,0,0],b=[f.d,g.d,_.d,y.d],c.g[0]=c.g[1]=c.g[2]=0,B(c,f,g,h,0),B(c,_,y,h,2),j(e,c,b,h,!0),de(t).b=t.b=r.b=!0,!1}function G(e,t){for(var r=fe(t);;){for(;r.b;)t=r,r=fe(r);if(!t.b&&(r=t,t=de(t),null===t||!t.b))break;t.b=!1;var n,o=t.a,u=r.a;if(n=o.b.a!==u.b.a)e:{n=t;var l=fe(n),s=n.a,c=l.a,h=void 0;if(i(s.b.a,c.b.a)){if(0>a(s.b.a,c.b.a,s.a)){n=!1;break e}de(n).b=n.b=!0,h=m(s),d(c.b,h),h.d.c=n.d}else{if(0<a(c.b.a,s.b.a,c.a)){n=!1;break e}n.b=l.b=!0,h=m(c),d(s.e,c.b),h.b.d.c=n.d}n=!0}if(n&&(r.c?(C(r),_(u),r=fe(t),u=r.a):t.c&&(C(t),_(o),t=de(r),o=t.a)),o.a!==u.a)if(o.b.a===u.b.a||t.c||r.c||o.b.a!==e.a&&u.b.a!==e.a)L(e,t);else if(U(e,t))break;o.a===u.a&&o.b.a===u.b.a&&(x(u,o),C(t),_(o),t=de(r))}}function V(e,t){e.a=t;for(var r=t.c;null===r.i;)if(r=r.c,r===t.c){var r=e,o=t,u=new pe;u.a=o.c.b;var l=r.f,s=l.a;do s=s.a;while(null!==s.b&&!l.c(l.b,u,s.b));var l=s.b,c=fe(l),u=l.a,s=c.a;if(0===a(u.b.a,o,u.a))u=l.a,n(u.a,o)||n(u.b.a,o)||(m(u.b),l.c&&(_(u.c),l.c=!1),d(o.c,u),V(r,o));else{var h=i(s.b.a,u.b.a)?l:c,c=void 0;l.d||h.c?(c=h===l?g(o.c.b,u.e):g(s.b.c.b,o.c).b,h.c?D(h,c):(u=r,l=I(r,l,c),l.f=de(l).f+l.a.f,l.d=F(u,l.f)),V(r,o)):k(r,l,o.c,o.c,null,!0)}return}if(r=R(r.i),u=fe(r),l=u.a,u=M(e,u,null),u.c===l){var l=u,u=l.c,s=fe(r),c=r.a,h=s.a,p=!1;c.b.a!==h.b.a&&U(e,r),n(c.a,e.a)&&(d(J(u),c),r=R(r),u=fe(r).a,M(e,fe(r),s),p=!0),n(h.a,e.a)&&(d(l,J(h)),l=M(e,s,null),p=!0),p?k(e,r,l.c,u,u,!0):(o=i(h.a,c.a)?J(h):c,o=g(l.c.b,o),k(e,r,o,o.c,o.c,!1),o.b.i.c=!0,G(e,r))}else k(e,r,u.c,l,l,!0)}function W(e,t){var r=new pe,n=f(e.b);n.a.b=me,n.a.a=t,n.b.a.b=-me,n.b.a.a=t,e.a=n.b.a,r.a=n,r.f=0,r.d=!1,r.c=!1,r.h=!0,r.b=!1,n=e.f,n=X(n,n.a,r),r.e=n}function z(e){this.a=new H,this.b=e,this.c=O}function X(e,t,r){do t=t.c;while(null!==t.b&&!e.c(e.b,t.b,r));return e=new H(r,t.a,t),t.a.c=e,t.a=e}function H(e,t,r){this.b=e||null,this.a=t||this,this.c=r||this}function Y(){this.d=ge,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function q(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case ge:K(e,100151),e.u(null);break;case 1:K(e,100152),e.t()}else switch(e.d){case 2:K(e,100154),e.v();break;case 1:K(e,100153),e.w()}}function K(e,t){e.p&&e.p(t,e.c)}function Q(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function Z(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function J(e){return e.b.e}function $(){this.c=new ee,this.a=new Q,this.b=new Z,this.d=new Z,this.b.b=this.d,this.d.b=this.b}function ee(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new oe}function re(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;e.d.sort(function(e){return function(t,r){return i(e[t],e[r])?1:-1}}(e.c)),e.e=!0,ue(e.b)}function ne(e,t){if(e.e){var r=e.b,n=++r.a;2*n>r.f&&(r.f*=2,r.c=ae(r.c,r.f+1));var i;return 0===r.b?i=n:(i=r.b,r.b=r.c[r.b]),r.e[i]=t,r.c[i]=n,r.d[n]=i,r.h&&he(r,n),i}return r=e.a++,e.c[r]=t,-(r+1)}function ie(e){if(0===e.a)return se(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&i(le(e.b),t))return se(e.b);do--e.a;while(0<e.a&&null===e.c[e.d[e.a-1]]);return t}function oe(){this.d=ae([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ae(e,t){for(var r=Array(t),n=0;n<e.length;n++)r[n]=e[n];for(;t>n;n++)r[n]=0;return r}function ue(e){for(var t=e.a;t>=1;--t)ce(e,t);e.h=!0}function le(e){return e.e[e.d[1]]}function se(e){var t=e.d,r=e.e,n=e.c,i=t[1],o=r[i];return 0<e.a&&(t[1]=t[e.a],n[t[1]]=1,r[i]=null,n[i]=e.b,e.b=i,0<--e.a&&ce(e,1)),o}function ce(e,t){for(var r=e.d,n=e.e,o=e.c,a=t,u=r[a];;){var l=a<<1;l<e.a&&i(n[r[l+1]],n[r[l]])&&(l+=1);var s=r[l];if(l>e.a||i(n[u],n[s])){r[a]=u,o[u]=a;break}r[a]=s,o[s]=a,a=l}}function he(e,t){for(var r=e.d,n=e.e,o=e.c,a=t,u=r[a];;){var l=a>>1,s=r[l];if(0===l||i(n[s],n[u])){r[a]=u,o[u]=a;break}r[a]=s,o[s]=a,a=l}}function pe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function fe(e){return e.e.c.b}function de(e){return e.e.a.b}var _e,me=4e150,ge=0;_e=Y.prototype,_e.x=function(){q(this,ge)},_e.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void K(this,100900)}K(this,100901)},_e.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:K(this,100900)}return!1},_e.A=function(e,t,r){this.j[0]=e,this.j[1]=t,this.j[2]=r},_e.z=function(e,t){var r=t?t:null;switch(e){case 100100:case 100106:this.h=r;break;case 100104:case 100110:this.l=r;break;case 100101:case 100107:this.k=r;break;case 100102:case 100108:this.i=r;break;case 100103:case 100109:this.p=r;break;case 100105:case 100111:this.o=r;break;case 100112:this.r=r;break;default:K(this,100900)}},_e.C=function(e,t){var r=!1,n=[0,0,0];q(this,2);for(var i=0;3>i;++i){var o=e[i];-1e150>o&&(o=-1e150,r=!0),o>1e150&&(o=1e150,r=!0),n[i]=o}r&&K(this,100155),r=this.q,null===r?(r=f(this.b),d(r,r.b)):(m(r),r=r.e),r.a.d=t,r.a.g[0]=n[0],r.a.g[1]=n[1],r.a.g[2]=n[2],r.f=1,r.b.f=-1,this.q=r},_e.u=function(e){q(this,ge),this.d=1,this.b=new $,this.c=e},_e.t=function(){q(this,1),this.d=2,this.q=null},_e.v=function(){q(this,2),this.d=1},_e.w=function(){q(this,1),this.d=ge;var e=this.j[0],t=this.j[1],r=this.j[2],o=!1,u=[e,t,r];if(0===e&&0===t&&0===r){for(var t=[-2e150,-2e150,-2e150],l=[2e150,2e150,2e150],r=[],s=[],o=this.b.c,e=o.e;e!==o;e=e.e)for(var p=0;3>p;++p){var f=e.g[p];f<l[p]&&(l[p]=f,s[p]=e),f>t[p]&&(t[p]=f,r[p]=e)}if(e=0,t[1]-l[1]>t[0]-l[0]&&(e=1),t[2]-l[2]>t[e]-l[e]&&(e=2),l[e]>=t[e])u[0]=0,u[1]=0,u[2]=1;else{for(t=0,l=s[e],r=r[e],s=[0,0,0],l=[l.g[0]-r.g[0],l.g[1]-r.g[1],l.g[2]-r.g[2]],p=[0,0,0],e=o.e;e!==o;e=e.e)p[0]=e.g[0]-r.g[0],p[1]=e.g[1]-r.g[1],p[2]=e.g[2]-r.g[2],s[0]=l[1]*p[2]-l[2]*p[1],s[1]=l[2]*p[0]-l[0]*p[2],s[2]=l[0]*p[1]-l[1]*p[0],f=s[0]*s[0]+s[1]*s[1]+s[2]*s[2],f>t&&(t=f,u[0]=s[0],u[1]=s[1],u[2]=s[2]);0>=t&&(u[0]=u[1]=u[2]=0,u[E(l)]=1)}o=!0}for(s=E(u),e=this.b.c,t=(s+1)%3,r=(s+2)%3,s=0<u[s]?1:-1,u=e.e;u!==e;u=u.e)u.b=u.g[t],u.a=s*u.g[r];if(o){for(u=0,o=this.b.a,e=o.b;e!==o;e=e.b)if(t=e.a,!(0>=t.f))do u+=(t.a.b-t.b.a.b)*(t.a.a+t.b.a.a),t=t.e;while(t!==e.a);if(0>u)for(u=this.b.c,o=u.e;o!==u;o=o.e)o.a=-o.a}for(this.n=!1,u=this.b.b,e=u.h;e!==u;e=o)o=e.h,t=e.e,n(e.a,e.b.a)&&e.e.e!==e&&(A(this,t,e),_(e),e=t,t=e.e),t.e===e&&(t!==e&&((t===o||t===o.b)&&(o=o.h),_(t)),(e===o||e===o.b)&&(o=o.h),_(e));for(this.e=u=new te,o=this.b.c,e=o.e;e!==o;e=e.e)e.h=ne(u,e);for(re(u),this.f=new z(this),W(this,-me),W(this,me);null!==(u=ie(this.e));){for(;;){e:if(e=this.e,0===e.a)o=le(e.b);else if(o=e.c[e.d[e.a-1]],0!==e.b.a&&(e=le(e.b),i(e,o))){o=e;break e}if(null===o||!n(o,u))break;o=ie(this.e),A(this,u.c,o.c)}V(this,u)}for(this.a=this.f.a.a.b.a.a,u=0;null!==(o=this.f.a.a.b);)o.h||++u,C(o);for(this.f=null,u=this.e,u.b=null,u.d=null,this.e=u.c=null,u=this.b,e=u.a.b;e!==u.a;e=o)o=e.b,e=e.a,e.e.e===e&&(x(e.c,e),_(e));if(!this.n){if(u=this.b,this.m)for(e=u.b.h;e!==u.b;e=o)o=e.h,e.b.d.c!==e.d.c?e.f=e.d.c?1:-1:_(e);else for(e=u.a.b;e!==u.a;e=o)if(o=e.b,e.c){for(e=e.a;i(e.b.a,e.a);e=e.c.b);for(;i(e.a,e.b.a);e=e.e);for(t=e.c.b,r=void 0;e.e!==t;)if(i(e.b.a,t.a)){for(;t.e!==e&&(c(t.e)||0>=a(t.a,t.b.a,t.e.b.a));)r=g(t.e,t),t=r.b;t=t.c.b}else{for(;t.e!==e&&(h(e.c.b)||0<=a(e.b.a,e.a,e.c.b.a));)r=g(e,e.c.b),e=r.b;e=e.e}for(;t.e.e!==e;)r=g(t.e,t),t=r.b}if(this.h||this.i||this.k||this.l)if(this.m){for(u=this.b,o=u.a.b;o!==u.a;o=o.b)if(o.c){this.h&&this.h(2,this.c),e=o.a;do this.k&&this.k(e.a.d,this.c),e=e.e;while(e!==o.a);this.i&&this.i(this.c)}}else{for(u=this.b,o=!!this.l,e=!1,t=-1,r=u.a.d;r!==u.a;r=r.d)if(r.c){e||(this.h&&this.h(4,this.c),e=!0),s=r.a;do o&&(l=s.b.d.c?0:1,t!==l&&(t=l,this.l&&this.l(!!t,this.c))),this.k&&this.k(s.a.d,this.c),s=s.e;while(s!==r.a)}e&&this.i&&this.i(this.c)}if(this.r){for(u=this.b,e=u.a.b;e!==u.a;e=o)if(o=e.b,!e.c){t=e.a,r=t.e,s=void 0;do s=r,r=s.e,s.d=null,null===s.b.d&&(s.c===s?w(s.a,null):(s.a.c=s.c,b(s,J(s))),l=s.b,l.c===l?w(l.a,null):(l.a.c=l.c,b(l,J(l))),P(s));while(s!==t);t=e.d,e=e.b,e.d=t,t.b=e}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Y,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Y.prototype.gluDeleteTess=Y.prototype.x,Y.prototype.gluTessProperty=Y.prototype.B,Y.prototype.gluGetTessProperty=Y.prototype.y,Y.prototype.gluTessNormal=Y.prototype.A,Y.prototype.gluTessCallback=Y.prototype.z,Y.prototype.gluTessVertex=Y.prototype.C,Y.prototype.gluTessBeginPolygon=Y.prototype.u,Y.prototype.gluTessBeginContour=Y.prototype.t,Y.prototype.gluTessEndContour=Y.prototype.v,Y.prototype.gluTessEndPolygon=Y.prototype.w,"undefined"!=typeof t&&(t.exports=this.libtess)},{}],180:[function(e,t,r){r.endianness=function(){return"LE"},r.hostname=function(){return"undefined"!=typeof location?location.hostname:""},r.loadavg=function(){return[]},r.uptime=function(){return 0},r.freemem=function(){return Number.MAX_VALUE},r.totalmem=function(){return Number.MAX_VALUE},r.cpus=function(){return[]},r.type=function(){return"Browser"},r.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},r.networkInterfaces=r.getNetworkInterfaces=function(){return{}},r.arch=function(){return"javascript"},r.platform=function(){return"browser"},r.tmpdir=r.tmpDir=function(){return"/tmp"},r.EOL="\n"},{}]},{},[148]);
//# sourceMappingURL=Bulletproof-browser.min.js.map

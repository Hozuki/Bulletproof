{"version":3,"sources":["interactive/video/html5/html5videoplayer.ts"],"names":["Html5VideoPlayer","Html5VideoPlayer.constructor","Html5VideoPlayer.initialize","Html5VideoPlayer.initialize.addListener","Html5VideoPlayer.dispose","Html5VideoPlayer.load","Html5VideoPlayer.unload","Html5VideoPlayer.play","Html5VideoPlayer.pause","Html5VideoPlayer.resume","Html5VideoPlayer.stop","Html5VideoPlayer.currentTime","Html5VideoPlayer.currentRatio","Html5VideoPlayer.duration","Html5VideoPlayer.autoPlay","Html5VideoPlayer.loop","Html5VideoPlayer.muted","Html5VideoPlayer.defaultMuted","Html5VideoPlayer.playbackRate","Html5VideoPlayer.defaultPlaybackRate","Html5VideoPlayer.volume","Html5VideoPlayer.state","Html5VideoPlayer.playing","Html5VideoPlayer.paused","Html5VideoPlayer.seeking","Html5VideoPlayer.videoWidth","Html5VideoPlayer.videoHeight","Html5VideoPlayer.fileURL","Html5VideoPlayer.hasVideo","Html5VideoPlayer.view","Html5VideoPlayer.___onEnded","Html5VideoPlayer.___onPlay","Html5VideoPlayer.___onPause","Html5VideoPlayer.___onPlaying","Html5VideoPlayer.___onSeeked","Html5VideoPlayer.___onSeeking","Html5VideoPlayer.___onLoadedData"],"mappings":"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","file":"interactive/video/html5/Html5VideoPlayer.js","sourcesContent":["/**\r\n * Created by MIC on 2016/2/8.\r\n */\r\n\r\nimport {VideoPlayerBase} from \"../VideoPlayerBase\";\r\nimport {VideoPlayerState} from \"../VideoPlayerState\";\r\nimport {GLUtil} from \"../../../../lib/glantern/lib/glantern-utils/src/GLUtil\";\r\n\r\ntype EventHandler<T extends Event> = (ev:T) => void;\r\n\r\nexport class Html5VideoPlayer extends VideoPlayerBase {\r\n\r\n    constructor() {\r\n        super();\r\n        this._videoElement = window.document.createElement(\"video\");\r\n        this._eventHandlers = [];\r\n        this._state = VideoPlayerState.Created;\r\n    }\r\n\r\n    initialize(width:number, height:number):void {\r\n        var vid = this._videoElement;\r\n        var handlers = this._eventHandlers;\r\n        vid.width = width;\r\n        vid.height = height;\r\n\r\n        function addListener(name:string, listener:EventHandler<Event>):void {\r\n            var f = listener.bind(this);\r\n            handlers.push({name: name, handler: f});\r\n            vid.addEventListener(name, f);\r\n        }\r\n\r\n        addListener(\"ended\", this.__onEnded);\r\n        addListener(\"play\", this.__onPlay);\r\n        addListener(\"playing\", this.__onPlaying);\r\n        addListener(\"pause\", this.__onPause);\r\n        addListener(\"loadeddata\", this.__onLoadedData);\r\n        addListener(\"seeked\", this.__onSeeked);\r\n        addListener(\"seeking\", this.__onSeeking);\r\n    }\r\n\r\n    dispose():void {\r\n        var video = this._videoElement;\r\n        var videoParent = video.parentElement;\r\n        var handlers = this._eventHandlers;\r\n        for (var i = 0; i < handlers.length; ++i) {\r\n            video.removeEventListener(handlers[i].name, handlers[i].handler);\r\n        }\r\n        if (!GLUtil.isUndefinedOrNull(videoParent)) {\r\n            videoParent.removeChild(video);\r\n        }\r\n        while (handlers.length > 0) {\r\n            handlers.pop();\r\n        }\r\n        this._state = VideoPlayerState.Invalid;\r\n        this._videoElement = null;\r\n        this._eventHandlers = null;\r\n    }\r\n\r\n    load(url:string):boolean {\r\n        if (this._state !== VideoPlayerState.Invalid) {\r\n            this.unload();\r\n            try {\r\n                this._videoElement.src = url;\r\n                this._state = VideoPlayerState.Loaded;\r\n                return true;\r\n            } catch (ex) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    unload():void {\r\n        if (this.hasVideo) {\r\n            this.stop();\r\n            this._videoElement.src = null;\r\n            this._state = VideoPlayerState.Initialized;\r\n        }\r\n    }\r\n\r\n    play():void {\r\n        if (this.hasVideo) {\r\n            this._videoElement.play();\r\n            this._state = VideoPlayerState.Playing;\r\n        }\r\n    }\r\n\r\n    pause():void {\r\n        if (this.hasVideo) {\r\n            this._videoElement.pause();\r\n            this._state = VideoPlayerState.Paused;\r\n        }\r\n    }\r\n\r\n    resume():void {\r\n        if (this.hasVideo) {\r\n            if (this._state === VideoPlayerState.Paused) {\r\n                this.play();\r\n            }\r\n        }\r\n    }\r\n\r\n    stop():void {\r\n        if (this.hasVideo) {\r\n            this._videoElement.pause();\r\n            this._videoElement.currentTime = 0;\r\n            this._state = VideoPlayerState.Stopped;\r\n        }\r\n    }\r\n\r\n    get currentTime():number {\r\n        return this.hasVideo ? this._videoElement.currentTime : 0;\r\n    }\r\n\r\n    set currentTime(v:number) {\r\n        if (this.hasVideo) {\r\n            this._videoElement.currentTime = v;\r\n        }\r\n    }\r\n\r\n    get currentRatio():number {\r\n        return this.hasVideo ? this.currentTime / this.duration : 0;\r\n    }\r\n\r\n    set currentRatio(v:number) {\r\n        if (this.hasVideo) {\r\n            v = GLUtil.limitInto(v, 0, 1);\r\n            this.currentTime = v * this.duration;\r\n        }\r\n    }\r\n\r\n    get duration():number {\r\n        return this.hasVideo ? this._videoElement.duration : 0;\r\n    }\r\n\r\n    get autoPlay():boolean {\r\n        return this._videoElement !== null ? this._videoElement.autoplay : false;\r\n    }\r\n\r\n    set autoPlay(v:boolean) {\r\n        if (this._videoElement !== null) {\r\n            this._videoElement.autoplay = v;\r\n        }\r\n    }\r\n\r\n    get loop():boolean {\r\n        return this._videoElement !== null ? this._videoElement.loop : false;\r\n    }\r\n\r\n    set loop(v:boolean) {\r\n        if (this._videoElement !== null) {\r\n            this._videoElement.loop = v;\r\n        }\r\n    }\r\n\r\n    get muted():boolean {\r\n        return this._videoElement !== null ? this._videoElement.muted : false;\r\n    }\r\n\r\n    set muted(v:boolean) {\r\n        if (this._videoElement !== null) {\r\n            this._videoElement.muted = v;\r\n        }\r\n    }\r\n\r\n    get defaultMuted():boolean {\r\n        return this._videoElement !== null ? this._videoElement.defaultMuted : false;\r\n    }\r\n\r\n    set defaultMuted(v:boolean) {\r\n        if (this._videoElement !== null) {\r\n            this._videoElement.defaultMuted = v;\r\n        }\r\n    }\r\n\r\n    get playbackRate():number {\r\n        return this._videoElement !== null ? this._videoElement.playbackRate : 0;\r\n    }\r\n\r\n    set playbackRate(v:number) {\r\n        if (this._videoElement !== null) {\r\n            this._videoElement.playbackRate = v;\r\n        }\r\n    }\r\n\r\n    get defaultPlaybackRate():number {\r\n        return this._videoElement !== null ? this._videoElement.defaultPlaybackRate : 0;\r\n    }\r\n\r\n    set defaultPlaybackRate(v:number) {\r\n        if (this._videoElement !== null) {\r\n            this._videoElement.defaultPlaybackRate = v;\r\n        }\r\n    }\r\n\r\n    get volume():number {\r\n        return this._videoElement !== null ? this._videoElement.volume / 200 : 0;\r\n    }\r\n\r\n    set volume(v:number) {\r\n        if (this._videoElement !== null) {\r\n            v = GLUtil.limitInto(v, 0, 1);\r\n            this._videoElement.volume = v * 200;\r\n        }\r\n    }\r\n\r\n    get state():VideoPlayerState {\r\n        return this._state;\r\n    }\r\n\r\n    get playing():boolean {\r\n        return this.state === VideoPlayerState.Playing;\r\n    }\r\n\r\n    get paused():boolean {\r\n        return this.state === VideoPlayerState.Paused;\r\n    }\r\n\r\n    get seeking():boolean {\r\n        return this._videoElement !== null ? this._videoElement.seeking : false;\r\n    }\r\n\r\n    get videoWidth():number {\r\n        return this._videoElement !== null ? this._videoElement.videoWidth : 0;\r\n    }\r\n\r\n    get videoHeight():number {\r\n        return this._videoElement !== null ? this._videoElement.videoHeight : 0;\r\n    }\r\n\r\n    get fileURL():string {\r\n        return this._videoElement !== null ? this._videoElement.currentSrc : null;\r\n    }\r\n\r\n    get hasVideo():boolean {\r\n        return this.state > VideoPlayerState.Initialized;\r\n    }\r\n\r\n    get view():HTMLVideoElement {\r\n        return this._videoElement;\r\n    }\r\n\r\n    private __onEnded(ev:Event):void {\r\n        this._state = VideoPlayerState.Stopped;\r\n    }\r\n\r\n    private __onPlay(ev:Event):void {\r\n        this._state = VideoPlayerState.Playing;\r\n    }\r\n\r\n    private __onPause(ev:Event):void {\r\n        this._state = VideoPlayerState.Paused;\r\n    }\r\n\r\n    private __onPlaying(ev:Event):void {\r\n        this._state = VideoPlayerState.Playing;\r\n    }\r\n\r\n    private __onSeeked(ev:Event):void {\r\n        this._state = this._originalStateBeforeSeeking;\r\n    }\r\n\r\n    private __onSeeking(ev:Event):void {\r\n        this._originalStateBeforeSeeking = this._state;\r\n        this._state = VideoPlayerState.Seeking;\r\n    }\r\n\r\n    private __onLoadedData(ev:Event):void {\r\n        if (this._state === VideoPlayerState.Initialized) {\r\n            this._state = VideoPlayerState.Loaded;\r\n        }\r\n    }\r\n\r\n    private _videoElement:HTMLVideoElement = null;\r\n    private _state:VideoPlayerState = VideoPlayerState.Invalid;\r\n    private _originalStateBeforeSeeking:VideoPlayerState = VideoPlayerState.Invalid;\r\n    private _eventHandlers:{name:string, handler:EventHandler<Event>}[] = null;\r\n\r\n}\r\n"],"sourceRoot":"/source/"}
!function e(t,r,n){function i(a,u){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";var n=e("./transitions/index");r.transitions=n},{"./transitions/index":18}],2:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/events/EventDispatcher"),o=e("../../flash/errors/NotImplementedError"),a=function(e){function t(t,r,n,i,o,a,u){void 0===u&&(u=!1);var l=e.call(this)||this;return l.begin=NaN,l.duration=5,l.finish=5,l.FPS=60,l.func=null,l.isPlaying=!1,l.looping=!1,l.obj=null,l.position=0,l.prop=null,l.time=0,l.useSeconds=!1,l.obj=t,l.prop=r,l.func=n,l.begin=i,l.finish=o,l.duration=a,l.useSeconds=u,l}return n(t,e),t.prototype.continueTo=function(e,t){throw new o.default},t.prototype.fforward=function(){throw new o.default},t.prototype.nextFrame=function(){throw new o.default},t.prototype.prevFrame=function(){throw new o.default},t.prototype.resume=function(){throw new o.default},t.prototype.rewind=function(e){throw void 0===e&&(e=0),new o.default},t.prototype.start=function(){throw new o.default},t.prototype.stop=function(){throw new o.default},t.prototype.yoyo=function(){throw new o.default},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../flash/errors/NotImplementedError":51,"../../flash/events/EventDispatcher":54}],3:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/events/FlashEvent"),o=e("../../flash/errors/NotImplementedError"),a=function(e){function t(t,r,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var a=e.call(this,t,i,o)||this;return a._position=NaN,a._time=NaN,a._position=n,a._time=r,a}return n(t,e),t.prototype.clone=function(){throw new o.default},Object.defineProperty(t,"MOTION_CHANGE",{get:function(){return"motionChange"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_FINISH",{get:function(){return"motionFinish"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_LOOP",{get:function(){return"motionLoop"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_RESUME",{get:function(){return"motionResume"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_START",{get:function(){return"motionStart"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOTION_STOP",{get:function(){return"motionStop"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../flash/errors/NotImplementedError":51,"../../flash/events/FlashEvent":55}],4:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n,i){return void 0===i&&(i=0),r*(e/=n)*e*((i+1)*e-i)+t},e.easeInOut=function(e,t,r,n,i){return void 0===i&&(i=0),(e/=n/2)<1?r/2*(e*e*(((i*=1.525)+1)*e-i))+t:r/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},e.easeOut=function(e,t,r,n,i){return void 0===i&&(i=0),r*((e=e/n-1)*e*((i+1)*e+i)+1)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],5:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(t,r,n,i){return n-e.easeOut(i-t,0,n,i)+r},e.easeInOut=function(t,r,n,i){return t<i/2?.5*e.easeIn(2*t,0,n,i)+r:.5*e.easeOut(2*t-i,0,n,i)+.5*n+r},e.easeOut=function(e,t,r,n){return(e/=n)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],6:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return-r*(Math.sqrt(1-(e/=n)*e)-1)+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t},e.easeOut=function(e,t,r,n){return r*Math.sqrt(1-(e=e/n-1)*e)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],7:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t},e.easeOut=function(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],8:[function(e,t,r){"use strict";var n=e("../../../mic/CommonUtil"),i=function(){function e(){}return e.easeIn=function(e,t,r,i,o,a){if(void 0===o&&(o=0),void 0===a&&(a=0),0===e)return t;if(1===(e/=i))return t+r;n.default.isUndefined(a)&&(a=.3*i);var u;return!o||o<Math.abs(r)?(u=a/4,o=r):u=a/(2*Math.PI)*Math.asin(r/o),-(o*Math.pow(2,10*(e-=1))*Math.sin((e*i-u)*(2*Math.PI)/a))+t},e.easeInOut=function(e,t,r,i,o,a){if(void 0===o&&(o=0),void 0===a&&(a=0),0===e)return t;if(2===(e/=i/2))return t+r;n.default.isUndefined(a)&&(a=i*(.3*1.5));var u;return!o||o<Math.abs(r)?(o=r,u=a/4):u=a/(2*Math.PI)*Math.asin(r/o),e<1?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*i-u)*(2*Math.PI)/a))+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*i-u)*(2*Math.PI)/a)*.5+r+t},e.easeOut=function(e,t,r,i,o,a){if(void 0===o&&(o=0),void 0===a&&(a=0),0===e)return t;if(1===(e/=i))return t+r;n.default.isUndefined(a)&&(a=.3*i);var u;return!o||o<Math.abs(r)?(o=r,u=a/4):u=a/(2*Math.PI)*Math.asin(r/o),o*Math.pow(2,-10*e)*Math.sin((e*i-u)*(2*Math.PI)/a)+r+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../../mic/CommonUtil":102}],9:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return 0===e?t:r*Math.pow(2,10*(e/n-1))+t},e.easeInOut=function(e,t,r,n){return 0===e?t:e===n?t+r:(e/=n/2)<1?r/2*Math.pow(2,10*(e-1))+t:r/2*(-Math.pow(2,-10*--e)+2)+t},e.easeOut=function(e,t,r,n){return e===n?t+r:r*(-Math.pow(2,-10*e/n)+1)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],10:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*e/n+t},e.easeInOut=function(e,t,r,n){return r*e/n+t},e.easeNone=function(e,t,r,n){return e<n?t:t+r},e.easeOut=function(e,t,r,n){return r*e/n+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],11:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t},e.easeOut=function(e,t,r,n){return-r*(e/=n)*(e-2)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],12:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e*e*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t},e.easeOut=function(e,t,r,n){return-r*((e=e/n-1)*e*e*e-1)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],13:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return r*(e/=n)*e*e*e*e+t},e.easeInOut=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t},e.easeOut=function(e,t,r,n){return r*((e=e/n-1)*e*e*e*e+1)+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],14:[function(e,t,r){"use strict";var n=e("../../../flash/errors/NotImplementedError"),i=function(){function e(){}return e.easeIn=function(e,t,r,i){throw new n.default},e.easeInOut=function(e,t,r,i){throw new n.default},e.easeOut=function(e,t,r,i){throw new n.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../../flash/errors/NotImplementedError":51}],15:[function(e,t,r){"use strict";var n=function(){function e(){}return e.easeIn=function(e,t,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+t},e.easeInOut=function(e,t,r,n){return-r/2*(Math.cos(Math.PI*e/n)-1)+t},e.easeOut=function(e,t,r,n){return r*Math.sin(e/n*(Math.PI/2))+t},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],16:[function(e,t,r){"use strict";var n=e("../../../flash/errors/NotImplementedError"),i=function(){function e(){}return e.easeIn=function(e,t,r,i){throw new n.default},e.easeInOut=function(e,t,r,i){throw new n.default},e.easeOut=function(e,t,r,i){throw new n.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../../flash/errors/NotImplementedError":51}],17:[function(e,t,r){"use strict";var n=e("./Back");r.Back=n.default;var i=e("./Bounce");r.Bounce=i.default;var o=e("./Circular");r.Circular=o.default;var a=e("./Cubic");r.Cubic=a.default;var u=e("./Elastic");r.Elastic=u.default;var l=e("./Exponential");r.Exponential=l.default;var s=e("./None");r.None=s.default;var c=e("./Quadratic");r.Quadratic=c.default;var f=e("./Quartic");r.Quartic=f.default;var d=e("./Quintic");r.Quintic=d.default;var h=e("./Regular");r.Regular=h.default;var p=e("./Sine");r.Sine=p.default;var _=e("./Strong");r.Strong=_.default},{"./Back":4,"./Bounce":5,"./Circular":6,"./Cubic":7,"./Elastic":8,"./Exponential":9,"./None":10,"./Quadratic":11,"./Quartic":12,"./Quintic":13,"./Regular":14,"./Sine":15,"./Strong":16}],18:[function(e,t,r){"use strict";var n=e("./easing/index");r.easing=n;var i=e("./Tween");r.Tween=i.default;var o=e("./TweenEvent");r.TweenEvent=o.default},{"./Tween":2,"./TweenEvent":3,"./easing/index":17}],19:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./DisplayObject"),o=e("./PixelSnapping"),a=e("../../webgl/ShaderID"),u=e("../../webgl/RenderHelper"),l=function(e){function t(t,r,n,i,a){void 0===n&&(n=null),void 0===i&&(i=o.default.AUTO),void 0===a&&(a=!1);var u=e.call(this,t,r)||this;return u._bitmapData=null,u._renderTarget=null,u._pixelSnapping=null,u._smoothing=!1,u.bitmapData=n,u.pixelSnapping=i,u.smoothing=a,u}return n(t,e),Object.defineProperty(t.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(e){this.__disposeRenderTarget(),this._bitmapData=e,this.__disposeRenderTarget(),this._renderTarget=this.$rawRoot.$worldRenderer.createRenderTarget(e.canvas)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelSnapping",{get:function(){return this._pixelSnapping},set:function(e){this._pixelSnapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smoothing",{get:function(){return this._smoothing},set:function(e){this._smoothing=e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.__disposeRenderTarget(),e.prototype.dispose.call(this)},t.prototype._$update=function(e){},t.prototype._$render=function(e){this.bitmapData&&u.default.renderImage(e,this._renderTarget,e.currentRenderTarget,!1)},t.prototype._$selectShader=function(e){e.selectShader(a.default.COPY_IMAGE)},t.prototype.__disposeRenderTarget=function(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../../webgl/RenderHelper":119,"../../webgl/ShaderID":121,"./DisplayObject":26,"./PixelSnapping":36}],20:[function(e,t,r){"use strict";function n(e,t,r,n,i,o){function a(e,t){return e+t*d}function u(e,t){return f[a(e,t)]}function l(e,t,r){f[a(e,t)]=r}var s=t(0,0,e.width,e.height),c=s.data.buffer,f=new Uint32Array(c),d=e.width,h=[{x:n,y:i}],p=new Array(f.length),_=u(n,i);for(p[a(n,i)]=!0;h.length>0;){var g=h.shift();l(g.x,g.y,o);var b=void 0;g.y>0&&(b=a(g.x,g.y-1),p[b]||u(g.x,g.y-1)!==_||(p[b]=!0,h.push({x:g.x,y:g.y-1}))),g.x>0&&(b=a(g.x-1,g.y),p[b]||u(g.x-1,g.y)!==_||(p[b]=!0,h.push({x:g.x-1,y:g.y}))),g.y<this.height-1&&(b=a(g.x,g.y+1),p[b]||u(g.x,g.y+1)!==_||(p[b]=!0,h.push({x:g.x,y:g.y+1}))),g.x<this.width-1&&(b=a(g.x+1,g.y),p[b]||u(g.x+1,g.y)!==_||(p[b]=!0,h.push({x:g.x+1,y:g.y})))}r(s,0,0)}var i=e("../geom/Rectangle"),o=e("../geom/Point"),a=e("../errors/NotImplementedError"),u=e("../utils/ByteArray"),l=e("../../mic/glantern/GLUtil"),s=e("../../mic/MathUtil"),c=e("../errors/ArgumentError"),f=e("./StageQuality"),d=e("./DisplayObject"),h=e("../../webgl/WebGLRenderer"),p=e("./BlendMode"),_=e("../errors/EOFError"),g=e("../../mic/VirtualDom"),b=function(){function e(e,t,r,n){void 0===r&&(r=!0),void 0===n&&(n=4294967295),this._canvas=null,this._context=null,this._supportsTransparent=!0,this._isLocked=!1,this._cachedImageData=null,this._cachedRenderer=null,this._isDataChangedDuringLockDown=!1;var i=g.default.createElement("canvas");i.width=e,i.height=t;var o=i.getContext("2d");o.fillStyle=l.default.colorToCssSharp(n),o.fillRect(0,0,e,t),this._canvas=i,this._context=o,this._supportsTransparent=r}return e.prototype.applyFilter=function(e,t,r,n){throw new a.default},e.prototype.clone=function(){var t=new e(this.width,this.height,this._supportsTransparent);return t._context.putImageData(this.__getArea(0,0,this.width,this.height),0,0),t},e.prototype.colorTransform=function(e,t){var r=e.clone();r.width=s.default.clampUpper(r.width,this.width-r.x),r.height=s.default.clampUpper(r.height,this.height-r.y);for(var n=this.__getArea(r.x,r.y,r.width,r.height),i=new Uint32Array(n.data.buffer),o=0;o<i.length;++o)i[o]=t.transform(i[o]);this.__setArea(n,r.x,r.y)},e.prototype.compare=function(t){if(this.width!==t.width)return-3;if(this.height!==t.height)return-4;for(var r=this.__getArea(0,0,this.width,this.height),n=t.__getArea(0,0,t.width,t.height),i=new Uint32Array(r.data.buffer),o=new Uint32Array(n.data.buffer),a=null,u=null,s=0;s<i.length;++s){var c=l.default.decomposeRgba(i[s]),f=l.default.decomposeRgba(o[s]),d={r:Math.abs(c.r-f.r),g:Math.abs(c.g-f.g),b:Math.abs(c.b-f.b),a:Math.abs(c.a-f.a)};d.r||d.g||d.b?(a||(a=new ImageData(this.width,this.height),u=new Uint32Array(a.data)),u[s]=l.default.rgb(d.r,d.g,d.b)):d.a&&(a||(a=new ImageData(this.width,this.height),u=new Uint32Array(a.data)),u[s]=d.a<<24|16777215)}return a?e.fromImageData(a):0},e.prototype.copyChannel=function(e,t,r,n,i){var o=t.clone();o.width=s.default.clampUpper(o.width,e.width-o.x),o.height=s.default.clampUpper(o.height,e.height-o.y),o.width=s.default.clampUpper(o.width,this.width-r.x),o.height=s.default.clampUpper(o.height,this.height-r.y);for(var a=this.__getArea(r.x,r.y,o.width,o.height),u=e.__getArea(o.x,o.y,o.width,o.height),l=a.data,c=u.data,f=Math.round(Math.LOG2E*Math.log(n)),d=Math.round(Math.LOG2E*Math.log(i)),h=0;h<l.length;h+=4)l[h+d]=c[h+f];this.__setArea(a,r.x,r.y)},e.prototype.copyPixels=function(e,t,r,n,i,a){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=!1);var u=t.clone();u.width=s.default.clampUpper(u.width,e.width-u.x),u.height=s.default.clampUpper(u.height,e.height-u.y),u.width=s.default.clampUpper(u.width,this.width-r.x),u.height=s.default.clampUpper(u.height,this.height-r.y),n&&(i||(i=new o.default),u.width=s.default.clampUpper(u.width,n.width-i.x),u.height=s.default.clampUpper(u.height,n.height-i.y));var l=new ImageData(u.width,u.height),c=e.__getArea(u.x,u.y,u.width,u.height),f=new Uint32Array(l.data.buffer),d=new Uint32Array(c.data.buffer),h=null,p=null;n&&(h=n.__getArea(i.x,i.y,u.width,u.height),p=new Uint32Array(h.data.buffer));for(var _=0;_<f.length;++_){var g=d[_];if(n&&a){var b=p[_]>>>24,y=(4278190080&g)>>>24;y*=b/255|0,g=16777215&g|y<<24}f[_]=g}this.__setArea(l,r.x,r.y)},e.prototype.copyPixelsToByteArray=function(e,t){var r=e.width*e.height*4;t.bytesAvailable<r&&(t.length=t.position+r);for(var n=this.__getArea(e.x,e.y,e.width,e.height),i=new Uint32Array(n.data.buffer),o=0;o<i.length;++o)t.writeUnsignedInt(i[o])},e.prototype.dispose=function(){this._canvas=null,this._context=null,null!==this._cachedRenderer&&(this._cachedRenderer.dispose(),this._cachedRenderer=null)},e.prototype.draw=function(e,t,r,n,i,o){void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1),this.drawWithQuality(e,t,r,n,i,o,f.default.MEDIUM)},e.prototype.drawWithQuality=function(e,t,r,n,i,o,u){if(void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===u&&(u=null),!(e instanceof d.default))throw new a.default;var l=e;this.__buildRenderer();var s=this._cachedRenderer;s.blendMode=n||p.default.NORMAL,l.$render(s)},e.prototype.encode=function(e,t,r){throw void 0===r&&(r=null),new a.default},e.prototype.fillRect=function(e,t){var r=this._context;r.fillStyle=l.default.colorToCssSharp(t),r.fillRect(e.x,e.y,e.width,e.height)},e.prototype.floodFill=function(e,t,r){this.isLocked||n(this,this.__getArea,this.__setArea,e,t,r)},e.prototype.generateFilterRect=function(e,t){throw new a.default},e.prototype.getColorBoundsRect=function(e,t,r){throw void 0===r&&(r=!0),new a.default},e.prototype.getPixel=function(e,t){var r=this.__getArea(e,t,1,1),n=r.data;return l.default.rgb(n[0],n[1],n[2])},e.prototype.getPixel32=function(e,t){var r=this.__getArea(e,t,1,1),n=r.data;return l.default.rgba(n[0],n[1],n[2],n[3])},e.prototype.getPixels=function(e){var t=this.__getArea(e.x,e.y,e.width,e.height),r=t.data;return u.default.from(r.buffer)},e.prototype.getVector=function(e){for(var t=this.__getArea(e.x,e.y,e.width,e.height),r=t.data,n=new Uint32Array(r.buffer),i=new Array(n.length),o=0;o<n.length;++o)i[o]=n[o];return i},Object.defineProperty(e.prototype,"height",{get:function(){return this._canvas.height},enumerable:!0,configurable:!0}),e.prototype.histogram=function(e){throw void 0===e&&(e=null),new a.default},e.prototype.hitTest=function(e,t,r,n,i){throw void 0===n&&(n=null),void 0===i&&(i=1),new a.default},e.prototype.lock=function(){this._isLocked=!0,this._cachedImageData=this._context.getImageData(0,0,this.width,this.height)},e.prototype.merge=function(e,t,r,n,i,o,u){throw new a.default},e.prototype.noise=function(e,t,r,n,i){throw void 0===t&&(t=0),void 0===r&&(r=255),void 0===n&&(n=7),void 0===i&&(i=!1),new a.default},e.prototype.paletteMap=function(e,t,r,n,i,o,u){throw void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===u&&(u=null),new a.default},e.prototype.perlinNoise=function(e,t,r,n,i,o,u,l,s){throw void 0===u&&(u=7),void 0===l&&(l=!1),void 0===s&&(s=null),new a.default},e.prototype.pixelDissolve=function(e,t,r,n,i,o){throw void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),new a.default},Object.defineProperty(e.prototype,"rect",{get:function(){return new i.default(0,0,this.width,this.height)},enumerable:!0,configurable:!0}),e.prototype.scroll=function(e,t){throw new a.default},e.prototype.setPixel=function(e,t,r){this.setPixel32(e,t,4278190080|r)},e.prototype.setPixel32=function(e,t,r){r&=4294967295;var n=new ImageData(1,1),i=l.default.decomposeRgba(r),o=n.data;o[0]=i.r,o[1]=i.g,o[2]=i.b,o[3]=i.a,this.__setArea(n,e,t)},e.prototype.setPixels=function(e,t){var r=e.clone();r.width=s.default.clampUpper(r.width,this.width-r.x),r.height=s.default.clampUpper(r.height,this.height-r.y);for(var n=t.position,i=e.width*e.height*4,o=t.bytesAvailable/4|0,a=this.__getArea(e.x,e.y,e.width,e.height),u=new Uint32Array(a.data.buffer),l=0;l<i;++l){if(l>=o)throw this._context.putImageData(a,e.x,e.y),new _.default("The input ByteArray is not large enough.");u[l]=t.readUnsignedInt()}t.position=n,this.__setArea(a,e.x,e.y)},e.prototype.setVector=function(e,t){var r=e.clone();r.width=s.default.clampUpper(r.width,this.width-r.x),r.height=s.default.clampUpper(r.height,this.height-r.y);var n=e.width*e.height;if(t.length!==n)throw new c.default("Invalid vector is used when trying to set pixels.");for(var i=new ImageData(r.width,r.height),o=i.data,a=new Uint32Array(o.buffer),u=0;u<o.length;++u)a[u]=0|t[u];this.__setArea(i,e.x,e.y)},e.prototype.threshold=function(e,t,r,n,i,o,u,l){throw void 0===o&&(o=0),void 0===u&&(u=4294967295),void 0===l&&(l=!1),new a.default},Object.defineProperty(e.prototype,"transparent",{get:function(){return this._supportsTransparent},enumerable:!0,configurable:!0}),e.prototype.unlock=function(){this._isDataChangedDuringLockDown&&this._context.putImageData(this._cachedImageData,0,0),this._isLocked=!1,this._cachedImageData=null,this._isDataChangedDuringLockDown=!1},Object.defineProperty(e.prototype,"width",{get:function(){return this._canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this._isLocked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),e.fromImageData=function(t){var r=new e(t.width,t.height,(!0),0);return r._context.putImageData(t,0,0),r},e.prototype.__getArea=function(e,t,r,n){if(this.isLocked){var i=this._cachedImageData,o=new Uint32Array(i.data.buffer),a=new ImageData(r,n),u=new Uint32Array(a.data.buffer);if(0===e&&0===t&&r===this.width&&n===this.height)for(var l=0;l<o.length;++l)u[l]=o[l];else{r=s.default.clampUpper(r,this.width-e),n=s.default.clampUpper(n,this.height-t);for(var c=this.width,f=0,l=0;l<o.length;++l){var d=l/c|0,h=l-d*c;e<=h&&h<=e+r&&t<=d&&d<=t+n&&(u[f++]=o[l])}}return a}return this._context.getImageData(e,t,r,n)},e.prototype.__setArea=function(e,t,r){if(this.isLocked){var n=this._cachedImageData,i=new Uint32Array(n.data.buffer),o=new Uint32Array(e.data.buffer);if(0===t&&0===r&&e.width===this.width&&e.height===this.height)for(var a=0;a<i.length;++a)i[a]=o[a];else for(var u=s.default.clampUpper(e.width,this.width-t),l=s.default.clampUpper(e.height,this.height-r),c=this.width,f=0,a=0;a<i.length;++a){var d=a/c|0,h=a-d*c;t<=h&&h<=t+u&&r<=d&&d<=r+l&&(i[a]=o[f++])}this._isDataChangedDuringLockDown=!0}else this._context.putImageData(e,t,r)},e.prototype.__buildRenderer=function(){null===this._cachedRenderer&&(this._cachedRenderer=new h.default(h.default.DEFAULT_OPTIONS,this._canvas))},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=b},{"../../mic/MathUtil":106,"../../mic/VirtualDom":107,"../../mic/glantern/GLUtil":108,"../../webgl/WebGLRenderer":125,"../errors/ArgumentError":48,"../errors/EOFError":49,"../errors/NotImplementedError":51,"../geom/Point":67,"../geom/Rectangle":68,"../utils/ByteArray":94,"./BlendMode":22,"./DisplayObject":26,"./StageQuality":43}],21:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"ALPHA",{get:function(){return 8},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BLUE",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GREEN",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RED",{get:function(){return 1},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],22:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"ADD",{get:function(){return"add"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ALPHA",{get:function(){return"alpha"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DARKEN",{get:function(){return"darken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DIFFERENCE",{get:function(){return"difference"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ERASE",{get:function(){return"erase"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HARDLIGHT",{get:function(){return"hardlight"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INVERT",{get:function(){return"invert"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LAYER",{get:function(){return"layer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LIGHTEN",{get:function(){return"lighten"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MULTIPLY",{get:function(){return"multiply"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OVERLAY",{get:function(){return"overlay"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SCREEN",{get:function(){return"screen"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SHADER",{get:function(){return"shader"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SUBTRACT",{get:function(){return"subtract"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],23:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROUND",{get:function(){return"round"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SQUARE",{get:function(){return"square"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],24:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"DEFAULT",{get:function(){return"default"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OFF",{get:function(){return"off"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ON",{get:function(){return"on"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],25:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"DEFAULT_OFF",{get:function(){return"defaultOff"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DEFAULT_ON",{get:function(){return"defaultOn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UNSUPPORTED",{get:function(){return"unsupported"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],26:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../geom/Transform"),o=e("../events/EventDispatcher"),a=e("./BlendMode"),u=e("../geom/Matrix3D"),l=e("../geom/Vector3D"),s=e("../errors/NotImplementedError"),c=e("../../mic/MathUtil"),f=e("../../webgl/RenderHelper"),d=function(e){function t(t,r){var n=e.call(this)||this;return n._parent=null,n._root=null,n._height=0,n._width=0,n._childIndex=-1,n._isTransformDirty=!0,n._isRedrawSuggested=!0,n._isRoot=!1,n._alpha=1,n._filters=null,n._bufferTarget=null,n._transform=null,n._transformArray=null,n._name="",n._rotation=0,n._rotationX=0,n._rotationY=0,n._rotationZ=0,n._scaleX=1,n._scaleY=1,n._scaleZ=1,n._stage=null,n._x=0,n._y=0,n._z=0,n._blendMode=a.default.NORMAL,n._enabled=!0,n._visible=!0,n._mask=null,n._root=t,n._stage=t,n._parent=r,n._filters=[],n._transform=new i.default,n._isRoot=null===t,n}return n(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){var t=c.default.clamp(e,0,1),r=t!==this._alpha;this._alpha=t,r&&(this._isRedrawSuggested=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){var t=e!==this._blendMode;this._blendMode=e,t&&(this._isRedrawSuggested=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheAsBitmap",{get:function(){throw new s.default},set:function(e){throw new s.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childIndex",{get:function(){return this._childIndex},set:function(e){this._childIndex=e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.filters=[]},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){var t=e!==this.enabled;this._enabled=e,t&&(this._isRedrawSuggested=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters.slice()},set:function(e){var t=this.__shouldProcessFilters(),r=this._filters;if(t)for(var n=0;n<r.length;++n)r[n].notifyRemoved();r=this._filters=e||[];var i=this.__shouldProcessFilters();if(i)for(var n=0;n<r.length;++n)r[n].notifyAdded();this.__updateBufferTargetStatus()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask=e,this.__updateBufferTargetStatus()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseX",{get:function(){throw new s.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseY",{get:function(){throw new s.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;var t=e!==this._rotation;this._rotation=e,t&&(this._isRedrawSuggested=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;var t=e!=this._rotationX;this._rotationX=e,t&&(this._isRedrawSuggested=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;var t=e!==this._rotationY;this._rotationY=e,t&&(this._isRedrawSuggested=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;var t=e!=this._rotationZ;this._rotationZ=e,t&&(this._isRedrawSuggested=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){var t=this._x!==e;this._x=e,t&&this.$requestUpdateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){var t=this._y!==e;this._y=e,t&&this.$requestUpdateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(e){var t=this._z!==e;this._z=e,t&&this.$requestUpdateTransform()},enumerable:!0,configurable:!0}),t.prototype.getBounds=function(e){throw new s.default},t.prototype.getRect=function(e){throw new s.default},t.prototype.$update=function(e){this._isTransformDirty&&this._$updateTransform(),this.enabled&&this._$update(e)},t.prototype.$render=function(e){!this.visible||this.alpha<=0||(this._$beforeRender(e),this._$render(e),this._$afterRender(e))},t.prototype.$renderRaw=function(e){this.visible&&this.alpha>0&&this._$render(e)},t.prototype.$requestUpdateTransform=function(){this._isTransformDirty=!0},Object.defineProperty(t.prototype,"$rawRoot",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$isRoot",{
get:function(){return this._isRoot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$bufferTarget",{get:function(){return this._bufferTarget},enumerable:!0,configurable:!0}),t.prototype._$updateTransform=function(){var e;e=this.$isRoot?new u.default:this.parent.transform.matrix3D.clone(),e.prependTranslation(this.x,this.y,this.z),e.prependRotation(this.rotationX,l.default.X_AXIS),e.prependRotation(this.rotationY,l.default.Y_AXIS),e.prependRotation(this.rotationZ,l.default.Z_AXIS),this.transform.matrix3D.copyFrom(e),this._transformArray=e.toArray(),this._isRedrawSuggested=!0},t.prototype._$beforeRender=function(e){var t=this;if(this.__shouldHaveBufferTarget()){var r=this.$bufferTarget;e.currentRenderTarget=r,r.clear(),this._$shouldProcessMasking()&&(e.beginDrawMaskObject(),this.mask.$renderRaw(e),e.beginDrawMaskedObjects())}else e.currentRenderTarget=null;var n=e.shaderManager;this._$selectShader(n);var i=n.currentShader;i&&(i.changeValue("uTransformMatrix",function(e){e.value=t._transformArray}),i.changeValue("uAlpha",function(e){e.value=t.alpha})),e.blendMode=this.blendMode},t.prototype._$afterRender=function(e){var t=this._$shouldProcessMasking();if(t&&e.beginDrawNormalObjects(),this.__shouldProcessFilters()){var r=e.filterManager;r.pushFilterGroup(this.filters),r.processFilters(e,this.$bufferTarget,e.screenRenderTarget,!1),r.popFilterGroup()}else t&&f.default.copyTargetContent(e,this.$bufferTarget,e.screenRenderTarget,!1,!0,!1);this._isRedrawSuggested=!1},t.prototype._$shouldProcessMasking=function(){return null!==this.mask},t.prototype.__createBufferTarget=function(){if(this.__shouldHaveBufferTarget()){var e=this.$bufferTarget;return e&&e.dispose(),this._bufferTarget=this.$rawRoot.$worldRenderer.createRenderTarget()}},t.prototype.__releaseBufferTarget=function(){this.__shouldHaveBufferTarget()||(this.$rawRoot.$worldRenderer.releaseRenderTarget(this.$bufferTarget),this._bufferTarget=null)},t.prototype.__shouldProcessFilters=function(){var e=this._filters;return null!==e&&e.length>0},t.prototype.__shouldHaveBufferTarget=function(){return this.__shouldProcessFilters()||this._$shouldProcessMasking()},t.prototype.__updateBufferTargetStatus=function(){var e=this.__shouldHaveBufferTarget(),t=null!==this.$bufferTarget,r=this._$shouldProcessMasking();t&&(this.$bufferTarget.isStencil=r),t!==e&&(e?(this.__createBufferTarget(),this.$bufferTarget.isStencil=r):this.__releaseBufferTarget(),this._isRedrawSuggested=!0)},t}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=d},{"../../mic/MathUtil":106,"../../webgl/RenderHelper":119,"../errors/NotImplementedError":51,"../events/EventDispatcher":54,"../geom/Matrix3D":64,"../geom/Transform":69,"../geom/Vector3D":70,"./BlendMode":22}],27:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./InteractiveObject"),o=e("../errors/NotImplementedError"),a=e("../../mic/MathUtil"),u=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.mouseChildren=!0,n.tabChildren=!0,n._children=null,n._children=[],n}return n(t,e),Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),t.prototype.addChild=function(e){var t=this._children;return t.indexOf(e)<0&&t.push(e),e.childIndex=t.length-1,e},t.prototype.addChildAt=function(e,t){var r=this._children;return r.indexOf(e)<0&&(0===t?r.unshift(e):t===r.length-1?r.push(e):(t=a.default.clamp(t,0,r.length),r.splice(t,0,e)),e.childIndex=t),e},t.prototype.areInaccessibleObjectsUnderPoint=function(e){throw new o.default},t.prototype.contains=function(e){var r=this._children;if(0===r.length)return!1;for(var n=!1,i=0;i<r.length;++i){if(r[i]===e)return!0;if(r[i]instanceof t&&(n=r[i].contains(e)))return!0}return!1},t.prototype.getChildAt=function(e){var t=this._children;return e<0||e>t.length-1?null:t[e]},t.prototype.getChildByName=function(e){var r=this._children;if(0===r.length)return null;for(var n=null,i=0;i<r.length;++i){if(r[i].name===e)return r[i];if(r[i]instanceof t&&(n=r[i].getChildByName(e)))return n}return null},t.prototype.getChildIndex=function(e){return this._children.indexOf(e)},t.prototype.getObjectsUnderPoint=function(e){throw new o.default},t.prototype.removeChild=function(e){var t=this._children.indexOf(e);return t>=0?this.removeChildAt(t):null},t.prototype.removeChildAt=function(e){var t=this._children;if(e<0||e>=t.length)return null;for(var r=t[e],n=e+1;n<t.length;n++)t[n].childIndex++;return t.splice(e,1),r},t.prototype.setChildIndex=function(e,t){throw new o.default},t.prototype.swapChildren=function(e,t){throw new o.default},t.prototype.swapChildrenAt=function(e,t){throw new o.default},Object.defineProperty(t.prototype,"width",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),t.prototype.dispatchEvent=function(t,r){var n=e.prototype.dispatchEvent.call(this,t,r),i=this._children;if(i.length>0)for(var o=0;o<i.length;o++)i[o].dispatchEvent(t,r);return n},t.prototype.$update=function(t){e.prototype.$update.call(this,t);var r=this._children;if(this.enabled&&r.length>0)for(var n=0;n<r.length;++n)r[n].$update(t)},t.prototype.$render=function(e){if(this.visible&&!(this.alpha<=0)){this._$beforeRender(e),this._$render(e);var t=this._children;if(t.length>0)for(var r=0;r<t.length;++r)this._$shouldProcessMasking()&&!e.isStencilTestEnabled&&e.beginDrawMaskedObjects(),t[r].$render(e);this._$afterRender(e)}},t.prototype.$renderRaw=function(e){if(this.visible&&!(this.alpha<=0)){this._$render(e);var t=this._children;if(t.length>0)for(var r=0;r<t.length;++r)t[r].$renderRaw(e)}},t.prototype.$requestUpdateTransform=function(){this._isTransformDirty=!0;var e=this._children;if(e.length>0)for(var t=0;t<e.length;++t)e[t].$requestUpdateTransform()},t.prototype._$selectShader=function(e){},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../mic/MathUtil":106,"../errors/NotImplementedError":51,"./InteractiveObject":32}],28:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"LINEAR",{get:function(){return"linear"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RADIAL",{get:function(){return"radial"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],29:[function(e,t,r){"use strict";function n(e,t){if(null===e||null===t||t.length%2!==0)return!1;for(var r=e.length,n=t.length,i=0;i<r;i++)switch(e[i]){case u.default.CUBIC_CURVE_TO:if(n-=6,n<0)return!1;break;case u.default.CURVE_TO:if(n-=4,n<0)return!1;break;case u.default.LINE_TO:if(n-=2,n<0)return!1;break;case u.default.MOVE_TO:if(n-=2,n<0)return!1;break;case u.default.NO_OP:break;case u.default.WIDE_LINE_TO:if(n-=4,n<0)return!1;break;case u.default.WIDE_MOVE_TO:if(n-=4,n<0)return!1;break;default:return!1}return!0}var i=e("./SpreadMethod"),o=e("./InterpolationMethod"),a=e("./GraphicsPathWinding"),u=e("./GraphicsPathCommand"),l=e("./TriangleCulling"),s=e("./LineScaleMode"),c=e("../../webgl/graphics/BrushType"),f=e("../../webgl/graphics/SolidStrokeRenderer"),d=e("../../webgl/graphics/SolidFillRenderer"),h=e("../errors/NotImplementedError"),p=e("../../mic/MathUtil"),_=e("../../mic/CommonUtil"),g=function(){function e(e,t){this._displayObject=null,this._isFilling=!1,this._renderer=null,this._bufferTarget=null,this._isDirty=!0,this._shouldUpdateRenderTarget=!1,this._lineType=c.default.SOLID,this._lineWidth=1,this._lineAlpha=1,this._lineColor=0,this._currentX=0,this._currentY=0,this._lastPathStartX=0,this._lastPathStartY=0,this._currentStrokeRenderer=null,this._currentFillRenderer=null,this._strokeRenderers=null,this._fillRenderers=null,this._displayObject=e,this._renderer=t,this._isDirty=!0,this._isFilling=!1,this._strokeRenderers=[],this._fillRenderers=[],this._bufferTarget=t.createRenderTarget(),this.__updateCurrentPoint(0,0),this.__resetStyles(),this.clear()}return e.prototype.beginBitmapFill=function(e,t,r,n){throw void 0===t&&(t=null),void 0===r&&(r=!1),void 0===n&&(n=!1),new h.default},e.prototype.beginFill=function(e,t){void 0===t&&(t=1),this.$isFilling&&this.endFill(),this.$isFilling||(this.$isFilling=!0,this._currentStrokeRenderer=this.__newStroke(),this._strokeRenderers.push(this._currentStrokeRenderer),this._currentFillRenderer=new d.default(this,this._currentX,this._currentY,e,t),this._currentFillRenderer.beginIndex=this._strokeRenderers.length-1)},e.prototype.beginGradientFill=function(e,t,r,n,a,u,l,s){throw void 0===a&&(a=null),void 0===u&&(u=i.default.PAD),void 0===l&&(l=o.default.RGB),void 0===s&&(s=0),new h.default},e.prototype.beginShaderFill=function(e,t){throw void 0===t&&(t=null),new h.default},e.prototype.clear=function(){var e=this._strokeRenderers;if(e&&e.length>0){this._isDirty=this._isDirty||e.length>0;for(var t=0;t<e.length;++t)e[t].dispose();e.splice(0,e.length)}var r=this._fillRenderers;if(r&&r.length>0){this._isDirty=this._isDirty||r.length>0;for(var t=0;t<r.length;++t)r[t].dispose();r.splice(0,r.length)}null!==this._currentFillRenderer&&(this._currentFillRenderer.dispose(),this._isDirty=!0),this._currentFillRenderer=null,this._currentStrokeRenderer=this.__newStroke(),e.push(this._currentStrokeRenderer),this.$isFilling=!1},e.prototype.copyFrom=function(e){throw new h.default},e.prototype.curveTo=function(e,t,r,n){this.$isFilling&&this._currentFillRenderer.curveTo(e,t,r,n),this._currentStrokeRenderer.curveTo(e,t,r,n),this.__updateCurrentPoint(r,n),this._isDirty=!0},e.prototype.drawCircle=function(e,t,r){this.$isFilling&&this._currentFillRenderer.drawCircle(e,t,r),this._currentStrokeRenderer.drawCircle(e,t,r),this.__updateCurrentPoint(e,t),this.__updateLastPathStartPoint(e+r,t),this._isDirty=!0},e.prototype.drawEllipse=function(e,t,r,n){this.$isFilling&&this._currentFillRenderer.drawEllipse(e,t,r,n),this._currentStrokeRenderer.drawEllipse(e,t,r,n),this.__updateCurrentPoint(e+r,t+n/2),this.__updateLastPathStartPoint(e+r,t+n/2),this._isDirty=!0},e.prototype.drawGraphicsData=function(e){throw new h.default},e.prototype.drawPath=function(e,t,r,i){if(void 0===r&&(r=a.default.EVEN_ODD),void 0===i&&(i=!0),!i||n(e,t)){for(var o,l,s=e.length,c=this.$isFilling,f=this._currentStrokeRenderer,d=this._currentFillRenderer,h=0,p=0;p<s;++p)switch(e[p]){case u.default.CUBIC_CURVE_TO:c&&d.bezierCurveTo(t[h],t[h+1],t[h+2],t[h+3],t[h+4],t[h+5]),f.bezierCurveTo(t[h],t[h+1],t[h+2],t[h+3],t[h+4],t[h+5]),o=t[h+4],l=t[h+5],h+=6;break;case u.default.CURVE_TO:c&&d.curveTo(t[h],t[h+1],t[h+2],t[h+3]),f.curveTo(t[h],t[h+1],t[h+2],t[h+3]),o=t[h+2],l=t[h+3],h+=4;break;case u.default.LINE_TO:c&&d.lineTo(t[h],t[h+1]),f.lineTo(t[h],t[h+1]),o=t[h],l=t[h+1],h+=2;break;case u.default.MOVE_TO:c&&d.moveTo(t[h],t[h+1]),f.moveTo(t[h],t[h+1]),o=t[h],l=t[h+1],h+=2;break;case u.default.NO_OP:break;case u.default.WIDE_LINE_TO:c&&d.lineTo(t[h+2],t[h+3]),f.lineTo(t[h+2],t[h+3]),o=t[h+2],l=t[h+3],h+=4;break;case u.default.WIDE_MOVE_TO:c&&d.moveTo(t[h+2],t[h+3]),f.moveTo(t[h+2],t[h+3]),o=t[h+2],l=t[h+3],h+=4}s>0&&this.__updateCurrentPoint(o,l),this._isDirty=!0}},e.prototype.drawRect=function(e,t,r,n){this.$isFilling&&this._currentFillRenderer.drawRect(e,t,r,n),this._currentStrokeRenderer.drawRect(e,t,r,n),this.__updateCurrentPoint(e,t),this.__updateLastPathStartPoint(e,t),this._isDirty=!0},e.prototype.drawRoundRect=function(e,t,r,n,i,o){throw void 0===o&&(o=NaN),p.default.isNaN(o)&&(o=i),new h.default},e.prototype.drawTriangles=function(e,t,r,n){if(void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=l.default.NONE),null===t){t=new Array(e.length/2|0);for(var i=0;i<t.length;++i)t[i]=i}else t=t.slice();if(t.length%3!==0)return void _.default.trace("Graphics.drawTriangles: malformed indices count. Must be multiple of 3.");if(n!==l.default.NONE)for(var i=0;i<t.length/3;i++){var o=e[2*t[3*i+1]]-e[2*t[3*i]],a=e[2*t[3*i+1]+1]-e[2*t[3*i]+1],u=e[2*t[3*i+2]]-e[2*t[3*i+1]],s=e[2*t[3*i+2]+1]-e[2*t[3*i+1]+1],c=o*s-u*a;(c<0&&n===l.default.POSITIVE||c>0&&n===l.default.NEGATIVE)&&(t.splice(3*i,3),i--)}for(var f=[],d=[],i=0;i<t.length/3;i++){var h=t[3*i],p=t[3*i+1],g=t[3*i+2],b=e[2*h],y=e[2*h+1],m=e[2*p],v=e[2*p+1],w=e[2*g],P=e[2*g+1];f.push(1,2,2,2),d.push(b,y,m,v,w,P,b,y)}this.drawPath(f,d,void 0,!1)},e.prototype.endFill=function(){this.$isFilling&&(this.$isFilling=!1,this._currentFillRenderer.endIndex=this._strokeRenderers.length-1,this._currentFillRenderer.closePath(),this._currentStrokeRenderer.closePath(),this._fillRenderers.push(this._currentFillRenderer),this._currentFillRenderer.hasDrawnAnything&&(this._isDirty=!0),this._currentFillRenderer=null)},e.prototype.lineBitmapStyle=function(e,t,r,n){throw void 0===t&&(t=null),void 0===r&&(r=!0),void 0===n&&(n=!1),new h.default},e.prototype.lineGradientStyle=function(e,t,r,n,a,u,l,s){throw void 0===a&&(a=null),void 0===u&&(u=i.default.PAD),void 0===l&&(l=o.default.RGB),void 0===s&&(s=0),new h.default},e.prototype.lineShaderStyle=function(e,t){throw void 0===t&&(t=null),new h.default},e.prototype.lineStyle=function(e,t,r,n,i,o,a,u){void 0===e&&(e=NaN),void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=!1),void 0===i&&(i=s.default.NORMAL),void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=3),this._lineType===c.default.SOLID&&this._lineWidth===e&&this._lineColor===t&&this._lineAlpha===r||(this._lineType=c.default.SOLID,p.default.isNaN(e)||(this._lineWidth=e),this._lineColor=t,this._lineAlpha=r,this._currentStrokeRenderer=new f.default(this,this._lastPathStartX,this._lastPathStartY,this._currentX,this._currentY,e,t,r),this._strokeRenderers.push(this._currentStrokeRenderer))},e.prototype.lineTo=function(e,t){this.$isFilling&&this._currentFillRenderer.lineTo(e,t),this._currentStrokeRenderer.lineTo(e,t),this.__updateCurrentPoint(e,t),this._isDirty=!0},e.prototype.moveTo=function(e,t){this.$isFilling&&this._currentFillRenderer.moveTo(e,t),this._currentStrokeRenderer.moveTo(e,t),this.__updateCurrentPoint(e,t),this.__updateLastPathStartPoint(e,t),this._isDirty=!0},e.prototype.$update=function(){if(this._isDirty){for(var e=this._fillRenderers,t=this._strokeRenderers,r=0,n=0;n<t.length;++n)r<e.length&&n===e[r].beginIndex&&(e[r].update(),r++),t[n].update();this._shouldUpdateRenderTarget=!0,this._isDirty=!1}},e.prototype.$render=function(e){for(var t=this._fillRenderers,r=this._strokeRenderers,n=0,i=0;i<r.length;++i)n<t.length&&i===t[n].beginIndex&&(t[n].render(e),n++),r[i].render(e);this._shouldUpdateRenderTarget=!1},e.prototype.dispose=function(){var e=this._strokeRenderers;if(e&&e.length>0){this._isDirty=this._isDirty||e.length>0;for(var t=0;t<e.length;++t)e[t].dispose();e.splice(0,e.length)}var r=this._fillRenderers;if(r&&r.length>0){this._isDirty=this._isDirty||r.length>0;for(var t=0;t<r.length;++t)r[t].dispose();r.splice(0,r.length)}this._currentStrokeRenderer.dispose(),this._currentStrokeRenderer=null,this._bufferTarget.dispose(),this._bufferTarget=null},Object.defineProperty(e.prototype,"$renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$isFilling",{get:function(){return this._isFilling},set:function(e){this._isFilling=e},enumerable:!0,configurable:!0}),e.prototype.$requestRedraw=function(){this._isDirty=!0},e.prototype.__newStroke=function(){switch(this._lineType){case c.default.SOLID:return new f.default(this,this._lastPathStartX,this._lastPathStartY,this._currentX,this._currentY,this._lineWidth,this._lineColor,this._lineAlpha);default:throw new h.default}},e.prototype.__updateCurrentPoint=function(e,t){this._currentX=e,this._currentY=t},e.prototype.__updateLastPathStartPoint=function(e,t){this._lastPathStartX=e,this._lastPathStartY=t},e.prototype.__resetStyles=function(){this._lineType=c.default.SOLID,this._lineWidth=1,this._lineColor=0,this._lineAlpha=1},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=g},{"../../mic/CommonUtil":102,"../../mic/MathUtil":106,"../../webgl/graphics/BrushType":134,"../../webgl/graphics/SolidFillRenderer":138,"../../webgl/graphics/SolidStrokeRenderer":139,"../errors/NotImplementedError":51,"./GraphicsPathCommand":30,"./GraphicsPathWinding":31,"./InterpolationMethod":33,"./LineScaleMode":35,"./SpreadMethod":39,"./TriangleCulling":45}],30:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"CUBIC_CURVE_TO",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CURVE_TO",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LINE_TO",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MOVE_TO",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NO_OP",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WIDE_LINE_TO",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WIDE_MOVE_TO",{get:function(){return 4},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],31:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"EVEN_ODD",{get:function(){return"evenOdd"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NON_ZERO",{get:function(){return"nonZero"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],32:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./DisplayObject"),o=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.doubleClickEnabled=!0,n.focusRect=!0,n.mouseEnabled=!0,n.needsSoftKeyboard=!1,n.tabEnabled=!0,n.tabIndex=-1,n}return n(t,e),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./DisplayObject":26}],33:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"LINEAR_RGB",{get:function(){return"linearRGB"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RGB",{get:function(){return"rgb"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],34:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"BEVEL",{get:function(){return"bevel"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MITER",{get:function(){return"miter"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROUND",{get:function(){return"round"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],35:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"HORIZONTAL",{get:function(){return"horizontal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"VERTICAL",{get:function(){return"vertical"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],36:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"ALWAYS",{get:function(){return"always"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AUTO",{get:function(){return"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NEVER",{get:function(){return"never"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],37:[function(e,t,r){"use strict";var n=function(){function e(){}return e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],38:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./DisplayObject"),o=e("./Graphics"),a=e("../../webgl/ShaderID"),u=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._graphics=null,n._graphics=new o.default(n,t.$worldRenderer),n}return n(t,e),t.prototype.dispose=function(){this.graphics.dispose(),this._graphics=null,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"graphics",{get:function(){return this._graphics},enumerable:!0,configurable:!0}),t.prototype._$update=function(e){this._isRedrawSuggested&&this.graphics.$requestRedraw(),this.graphics.$update()},t.prototype._$render=function(e){this.graphics.$render(e)},t.prototype._$selectShader=function(e){e.selectShader(a.default.PRIMITIVE2)},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../webgl/ShaderID":121,"./DisplayObject":26,"./Graphics":29}],39:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"PAD",{get:function(){return"pad"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REFLECT",{get:function(){return"reflect"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REPEAT",{get:function(){return"repeat"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],40:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./ColorCorrectionSupport"),o=e("./StageScaleMode"),a=e("./StageQuality"),u=e("./StageDisplayState"),l=e("./ColorCorrection"),s=e("./StageAlign"),c=e("./DisplayObjectContainer"),f=e("../errors/NotImplementedError"),d=function(e){function t(t){var r=e.call(this,null,null)||this;return r.align=s.default.TOP_LEFT,r.color=0,r.colorCorrection=l.default.DEFAULT,r.displayState=u.default.NORMAL,r.focus=null,r.frameRate=60,r.fullScreenSourceRect=null,r.mouseChildren=!0,r.quality=a.default.HIGH,r.scaleMode=o.default.NO_SCALE,r.showDefaultContextMenu=!0,r.tabChildren=!0,r._allowFullScreen=!0,r._allowFullScreenInteractive=!0,r._colorCorrectionSupport=i.default.DEFAULT_OFF,r._$worldRenderer=null,r._root=r,r._$worldRenderer=t,r.resize(t.view.width,t.view.height),r}return n(t,e),Object.defineProperty(t.prototype,"allowFullScreen",{get:function(){return this._allowFullScreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowFullScreenInteractive",{get:function(){return this._allowFullScreenInteractive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorCorrectionSupport",{get:function(){return this._colorCorrectionSupport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreenHeight",{get:function(){return screen.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreenWidth",{get:function(){return screen.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"softKeyboardRect",{get:function(){throw new f.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this.$worldRenderer.view.height},set:function(e){throw new f.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this.$worldRenderer.view.width},set:function(e){throw new f.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.$worldRenderer.view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.$worldRenderer.view.height},enumerable:!0,configurable:!0}),t.prototype.invalidate=function(){throw new f.default},t.prototype.isFocusInaccessible=function(){throw new f.default},Object.defineProperty(t.prototype,"$worldRenderer",{get:function(){return this._$worldRenderer},enumerable:!0,configurable:!0}),t.prototype.resize=function(e,t){this._width=e,this._height=t},t.prototype._$update=function(e){},t.prototype._$render=function(e){},t}(c.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=d},{"../errors/NotImplementedError":51,"./ColorCorrection":24,"./ColorCorrectionSupport":25,"./DisplayObjectContainer":27,"./StageAlign":41,"./StageDisplayState":42,"./StageQuality":43,"./StageScaleMode":44}],41:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"BOTTOM",{get:function(){return"B"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BOTTOM_LEFT",{get:function(){return"BL"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BOTTOM_RIGHT",{get:function(){return"BR"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LEFT",{get:function(){return"L"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RIGHT",{get:function(){return"R"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOP",{get:function(){return"T"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOP_LEFT",{get:function(){return"TL"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOP_RIGHT",{get:function(){return"TR"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],42:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"FULL_SCREEN",{get:function(){return"fullScreen"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FULL_SCREEN_INTERACTIVE",{get:function(){return"fullScreenInteractive"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],43:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"BEST",{get:function(){return"best"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HIGH",{get:function(){return"high"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LOW",{get:function(){return"low"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MEDIUM",{get:function(){return"medium"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],44:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"EXACT_FIT",{get:function(){return"exactFit"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NO_BORDER",{get:function(){return"noBorder"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NO_SCALE",{get:function(){return"noScale"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SHOW_ALL",{get:function(){return"showAll"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],45:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"NEGATIVE",{get:function(){return"negative"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"POSITIVE",{get:function(){return"positive"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],46:[function(e,t,r){"use strict";var n=e("./Bitmap");r.Bitmap=n.default;var i=e("./BitmapData");r.BitmapData=i.default;var o=e("./BitmapDataChannel");r.BitmapDataChannel=o.default;var a=e("./BlendMode");r.BlendMode=a.default;var u=e("./CapsStyle");r.CapsStyle=u.default;var l=e("./ColorCorrection");r.ColorCorrection=l.default;var s=e("./ColorCorrectionSupport");r.ColorCorrectionSupport=s.default;var c=e("./DisplayObject");r.DisplayObject=c.default;var f=e("./DisplayObjectContainer");r.DisplayObjectContainer=f.default;var d=e("./GradientType");r.GradientType=d.default;var h=e("./Graphics");r.Graphics=h.default;var p=e("./GraphicsPathCommand");r.GraphicsPathCommand=p.default;var _=e("./GraphicsPathWinding");r.GraphicsPathWinding=_.default;var g=e("./InteractiveObject");r.InteractiveObject=g.default;var b=e("./InterpolationMethod");r.InterpolationMethod=b.default;var y=e("./JointStyle");r.JointStyle=y.default;var m=e("./LineScaleMode");r.LineScaleMode=m.default;var v=e("./PixelSnapping");r.PixelSnapping=v.default;var w=e("./Shader");r.Shader=w.default;var P=e("./Shape");r.Shape=P.default;var O=e("./SpreadMethod");r.SpreadMethod=O.default;var x=e("./Stage");r.Stage=x.default;var E=e("./StageAlign");r.StageAlign=E.default;var S=e("./StageDisplayState");r.StageDisplayState=S.default;var T=e("./StageQuality");r.StageQuality=T.default;var C=e("./StageScaleMode");r.StageScaleMode=C.default;var M=e("./TriangleCulling");r.TriangleCulling=M.default},{"./Bitmap":19,"./BitmapData":20,"./BitmapDataChannel":21,"./BlendMode":22,"./CapsStyle":23,"./ColorCorrection":24,"./ColorCorrectionSupport":25,"./DisplayObject":26,"./DisplayObjectContainer":27,"./GradientType":28,"./Graphics":29,"./GraphicsPathCommand":30,"./GraphicsPathWinding":31,"./InteractiveObject":32,"./InterpolationMethod":33,"./JointStyle":34,"./LineScaleMode":35,"./PixelSnapping":36,"./Shader":37,"./Shape":38,"./SpreadMethod":39,"./Stage":40,"./StageAlign":41,"./StageDisplayState":42,"./StageQuality":43,"./StageScaleMode":44,"./TriangleCulling":45}],47:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/ErrorBase"),o=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"ApplicationError"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../mic/ErrorBase":104}],48:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/ErrorBase"),o=function(e){function t(t,r){void 0===t&&(t=""),void 0===r&&(r=null);var n=e.call(this,t)||this;return n._argument=null,n._argument=r,n}return n(t,e),Object.defineProperty(t.prototype,"argument",{get:function(){return this._argument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"ArgumentError"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../mic/ErrorBase":104}],49:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/ErrorBase"),o=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"EOFError"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../mic/ErrorBase":104}],50:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/ErrorBase"),o=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IOError"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{
value:!0}),r.default=o},{"../../mic/ErrorBase":104}],51:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/ErrorBase"),o=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedError"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../mic/ErrorBase":104}],52:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/ErrorBase"),o=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotSupportedError"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../mic/ErrorBase":104}],53:[function(e,t,r){"use strict";var n=e("./ApplicationError");r.ApplicationError=n.default;var i=e("./ArgumentError");r.ArgumentError=i.default;var o=e("./EOFError");r.EOFError=o.default;var a=e("./IOError");r.IOError=a.default;var u=e("./NotImplementedError");r.NotImplementedError=u.default;var l=e("./NotSupportedError");r.NotSupportedError=l.default},{"./ApplicationError":47,"./ArgumentError":48,"./EOFError":49,"./IOError":50,"./NotImplementedError":51,"./NotSupportedError":52}],54:[function(e,t,r){"use strict";var n=function(){function e(){this._listeners=null,this._listeners=new Map}return e.prototype.addEventListener=function(e,t,r){void 0===r&&(r=!1);var n=this._listeners;n.has(e)||n.set(e,[]),n.get(e).push(t)},e.prototype.dispatchEvent=function(e,t){var r=this._listeners;if(r.has(e.type)&&null!==r.get(e.type)){for(var n=r.get(e.type),i=0;i<n.length;++i)n[i](t);return!0}return!1},e.prototype.removeEventListener=function(e,t,r){void 0===r&&(r=!1);var n=this._listeners;if(n.has(e)&&0!==n.get(e).length){var i=n.get(e).indexOf(t);i>=0&&n.get(e).splice(i,1)}},e.prototype.hasEventListener=function(e){return this._listeners.has(e)},e.prototype.willTrigger=function(e){return this.hasEventListener(e)&&this._listeners.get(e).length>0},e.prototype.dispose=function(){var e=this._listeners;e.forEach(function(e){for(;e.length>0;)e.pop()}),e.clear()},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],55:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/EventBase"),o=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t,"ENTER_FRAME",{get:function(){return"enterFrame"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../mic/EventBase":105}],56:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./FlashEvent"),o=e("../errors/NotImplementedError"),a=function(e){function t(t,r,n){return void 0===r&&(r=!1),void 0===n&&(n=!1),e.call(this,t,r,n)||this}return n(t,e),Object.defineProperty(t,"TIMER",{get:function(){return"timer"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TIMER_COMPLETE",{get:function(){return"timerComplete"},enumerable:!0,configurable:!0}),t.prototype.updateAfterEvent=function(){throw new o.default},t.prototype.clone=function(){throw new o.default},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../errors/NotImplementedError":51,"./FlashEvent":55}],57:[function(e,t,r){"use strict";var n=e("./EventDispatcher");r.EventDispatcher=n.default;var i=e("./TimerEvent");r.TimerEvent=i.default;var o=e("./FlashEvent");r.Event=o.default},{"./EventDispatcher":54,"./FlashEvent":55,"./TimerEvent":56}],58:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"HIGH",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LOW",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MEDIUM",{get:function(){return 2},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],59:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../webgl/filters/Blur2Filter"),o=e("./BitmapFilterQuality"),a=function(e){function t(t,r,n,i){void 0===r&&(r=4),void 0===n&&(n=4),void 0===i&&(i=o.default.LOW);var a=e.call(this,t)||this;return a.blurX=r,a.blurY=n,a.quality=i,a}return n(t,e),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.strengthX},set:function(e){this.strengthX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.strengthY},set:function(e){this.strengthY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.pass},set:function(e){this.pass=e},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.filterManager,this.blurX,this.blurY,this.quality)},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../webgl/filters/Blur2Filter":127,"./BitmapFilterQuality":58}],60:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../webgl/filters/GlowFilter"),o=e("./BitmapFilterQuality"),a=e("../../mic/MathUtil"),u=function(e){function t(t,r,n,i,u,l,s,c,f){void 0===r&&(r=16711680),void 0===n&&(n=1),void 0===i&&(i=6),void 0===u&&(u=6),void 0===l&&(l=2),void 0===s&&(s=o.default.LOW),void 0===c&&(c=!1),void 0===f&&(f=!1);var d=e.call(this,t)||this;return d.inner=!1,d.knockout=!1,d.strength=2,d._color=0,d._alpha=1,d.color=r,d.alpha=a.default.clamp(n,0,1),d.blurX=i,d.blurY=u,d.strength=l,d.quality=s,d.inner=c,d.knockout=f,d}return n(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){var t=e!==this.alpha;this._alpha=e,t&&this.__updateColorMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.strengthX},set:function(e){this.strengthX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.strengthY},set:function(e){this.strengthY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){e|=0;var t=e!==this._color;this._color=e,t&&this.__updateColorMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.pass},set:function(e){this.pass=e},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.filterManager,this.color,this.alpha,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout)},t.prototype.__updateColorMatrix=function(){var e=(this._color>>>16&255)/255,t=(this._color>>>8&255)/255,r=(255&this._color)/255,n=this._alpha,i=[0,0,0,e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,n,0];this.setColorMatrix(i)},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../mic/MathUtil":106,"../../webgl/filters/GlowFilter":132,"./BitmapFilterQuality":58}],61:[function(e,t,r){"use strict";var n=e("./BitmapFilterQuality");r.BitmapFilterQuality=n.default;var i=e("./BlurFilter");r.BlurFilter=i.default;var o=e("./GlowFilter");r.GlowFilter=o.default},{"./BitmapFilterQuality":58,"./BlurFilter":59,"./GlowFilter":60}],62:[function(e,t,r){"use strict";var n=e("../errors/NotImplementedError"),i=e("../../mic/MathUtil"),o=e("../../mic/glantern/GLUtil"),a=function(){function e(e,t,r,n,i,o,a,u){void 0===e&&(e=1),void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),this.color=0,this._alphaMultiplier=1,this._alphaOffset=0,this._redMultiplier=1,this._redOffset=0,this._greenMultiplier=1,this._greenOffset=0,this._blueMultiplier=1,this._blueOffset=0,this.redMultiplier=e,this.greenMultiplier=t,this.blueMultiplier=r,this.alphaMultiplier=n,this.redOffset=i,this.greenOffset=o,this.blueOffset=a,this.alphaOffset=u}return Object.defineProperty(e.prototype,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(e){this._alphaMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaOffset",{get:function(){return this._alphaOffset},set:function(e){this._alphaOffset=i.default.clamp(e,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redMultiplier",{get:function(){return this._redMultiplier},set:function(e){this._redMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redOffset",{get:function(){return this._redOffset},set:function(e){this._redOffset=i.default.clamp(e,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(e){this._greenMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"greenOffset",{get:function(){return this._greenOffset},set:function(e){this._greenOffset=i.default.clamp(e,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(e){this._blueMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blueOffset",{get:function(){return this._blueOffset},set:function(e){this._blueOffset=i.default.clamp(e,-1,1)},enumerable:!0,configurable:!0}),e.prototype.concat=function(e){throw new n.default},e.prototype.transform=function(e){var t=o.default.decomposeRgba(e);return t.r=i.default.clamp(t.r*this.redMultiplier+this.redOffset,0,255),t.g=i.default.clamp(t.g*this.greenMultiplier+this.greenOffset,0,255),t.b=i.default.clamp(t.b*this.blueMultiplier+this.blueOffset,0,255),t.a=i.default.clamp(t.a*this.alphaMultiplier+this.alphaOffset,0,255),o.default.rgba(t.r,t.g,t.b,t.a)},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../mic/MathUtil":106,"../../mic/glantern/GLUtil":108,"../errors/NotImplementedError":51}],63:[function(e,t,r){"use strict";var n=e("./Point"),i=e("../errors/NotImplementedError"),o=function(){function e(e,t,r,n,i,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),this._data=[e,r,i,t,n,o,0,0,1]}return Object.defineProperty(e.prototype,"a",{get:function(){return this._data[0]},set:function(e){this._data[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this._data[3]},set:function(e){this._data[3]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"c",{get:function(){return this._data[1]},set:function(e){this._data[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"d",{get:function(){return this._data[4]},set:function(e){this._data[4]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tx",{get:function(){return this._data[2]},set:function(e){this._data[2]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ty",{get:function(){return this._data[5]},set:function(e){this._data[5]=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.prototype.concat=function(t){this._data=e.__dotProduct(this._data,t._data)},e.prototype.copyColumnFrom=function(e,t){if(e<0||e>2)throw new RangeError("Column must be 0, 1, or 2.");var r=this._data;r[3*e]=t.x,r[1+3*e]=t.y,r[2+3*e]=t.z},e.prototype.copyColumnTo=function(e,t){if(e<0||e>2)throw new RangeError("Column must be 0, 1, or 2.");var r=this._data;t.x=r[3*e],t.y=r[1+3*e],t.z=r[2+3*e]},e.prototype.copyFrom=function(e){this._data=e._data.slice()},e.prototype.copyRowFrom=function(e,t){if(e<0||e>2)throw new RangeError("Row must be 0, 1, or 2.");var r=this._data;r[e]=t.x,r[e+3]=t.y,r[e+6]=t.z},e.prototype.copyRowTo=function(e,t){if(e<0||e>2)throw new RangeError("Column must be 0, 1, or 2.");var r=this._data;t.x=r[e],t.y=r[3+e],t.z=r[6+e]},e.prototype.createBox=function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.identity(),this.rotate(r),this.scale(e,t),this.translate(n,i)},e.prototype.createGradientBox=function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.createBox(e,t,r,n,i)},e.prototype.deltaTransformPoint=function(e){throw new i.default},e.prototype.identity=function(){this._data=[1,0,0,0,1,0,0,0,1]},e.prototype.invert=function(){throw new i.default},e.prototype.rotate=function(t){this._data=e.__dotProduct(this._data,[Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1])},e.prototype.scale=function(t,r){this._data=e.__dotProduct(this._data,[t,0,0,0,r,0,0,0,1])},e.prototype.skew=function(t,r){this._data=e.__dotProduct(this._data,[0,Math.tan(t),0,Math.tan(r),0,0,0,0,1])},e.prototype.setTo=function(e,t,r,n,i,o){this._data=[e,r,i,t,n,o,0,0,1]},e.prototype.toString=function(){return"["+this.a+" "+this.b+" 0\r\n"+this.c+" "+this.d+" 0\r\n"+this.tx+" "+this.ty+" 1]"},e.prototype.transformPoint=function(e){var t=this._data;return new n.default(e.x*t[0]+e.y*t[1]+t[2],e.x*t[3]+e.y*t[4]+t[5])},e.prototype.translate=function(e,t){this.tx+=e,this.ty+=t},e.__dotProduct=function(e,t){if(9!==t.length)throw new Error("Matrix dot product requires a 3x3 matrix.");for(var r=[0,0,0,0,0,0,0,0,0],n=0;n<3;n++)for(var i=0;i<3;i++)for(var o=0;o<3;o++)r[3*n+i]+=e[3*n+o]*t[3*o+i];return r},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../errors/NotImplementedError":51,"./Point":67}],64:[function(e,t,r){"use strict";function n(e,t,r,n){return new i.default(e.x*r+t.x*n,e.y*r+t.y*n,e.z*r+t.z*n)}var i=e("./Vector3D"),o=e("./Orientation3D"),a=e("../errors/NotImplementedError"),u=e("../errors/ArgumentError"),l=e("../errors/ApplicationError"),s=e("../../mic/MathUtil"),c=e("../../mic/CommonUtil"),f=function(){function e(e){if(void 0===e&&(e=null),this.position=null,this._data=null,(c.default.isNull(e)||e.length<=0)&&(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c.default.isArray(e))this.rawData=e.slice();else{this.rawData=new Array(e.length);for(var t=0;t<e.length;++t)this.rawData[t]=e[t]}}return Object.defineProperty(e.prototype,"determinant",{get:function(){throw new a.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawData",{get:function(){return this._data},set:function(e){if(e.length<16)throw new Error("Data length of Matrix3D must be no less than 16.");this._data=e.slice()},enumerable:!0,configurable:!0}),e.prototype.append=function(t){this._data=e.__dotProduct(t._data,this._data)},e.prototype.appendRotation=function(t,r,n){void 0===n&&(n=null),n&&this.appendTranslation(n.x,n.y,n.z),this._data=e.__dotProduct(e.__getRotationMatrix(t*Math.PI/180,r),this._data),n&&this.appendTranslation(-n.x,-n.y,-n.z)},e.prototype.appendScale=function(t,r,n){this._data=e.__dotProduct([t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1],this._data)},e.prototype.appendSkew=function(e,t,r){if(0!==e||0!==t||0!==r){var n=h;n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=e,n[5]=1,n[6]=0,n[7]=0,n[8]=t,n[9]=r,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this.append(d)}},e.prototype.appendTranslation=function(t,r,n){this._data=e.__dotProduct([1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1],this._data)},e.prototype.clone=function(){var t=new e(this.rawData);return t.position=this.position?this.position.clone():null,t},e.prototype.copyColumnFrom=function(e,t){if(e<0||e>3)throw new RangeError("Column must be 0, 1, 2 or 3.");var r=this._data;r[4*e]=t.x,r[4*e+1]=t.y,r[4*e+2]=t.z,r[4*e+3]=t.w},e.prototype.copyColumnTo=function(e,t){if(e<0||e>3)throw new RangeError("Column must be 0, 1, 2 or 3.");var r=this._data;t.x=r[4*e],t.y=r[4*e+1],t.z=r[4*e+2],t.w=r[4*e+3]},e.prototype.copyFrom=function(e){this.position=e.position?e.position.clone():null,this.rawData=e.rawData.slice()},e.prototype.copyRawDataFrom=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1),r&&this.transpose();for(var n=e.length-t,i=0;i<n;i++)this.rawData[i]=e[i+t];r&&this.transpose()},e.prototype.copyRawDataTo=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1),r&&this.transpose();for(var n=this.rawData.length,i=0;i<n;i++)e[i+t]=this.rawData[i];r&&this.transpose()},e.prototype.copyRowFrom=function(e,t){if(e<0||e>3)throw new RangeError("Row must be 0, 1, 2 or 3.");var r=this._data;r[e]=t.x,r[e+4]=t.y,r[e+8]=t.z,r[e+12]=t.w},e.prototype.copyRowTo=function(e,t){if(e<0||e>3)throw new RangeError("Row must be 0, 1, 2 or 3.");var r=this._data;t.x=r[e],t.y=r[e+4],t.z=r[e+8],t.w=r[e+12]},e.prototype.copyToMatrix3D=function(e){e.position=this.position?this.position.clone():null,e.rawData=this.rawData},e.prototype.decompose=function(e){void 0===e&&(e=o.default.EULER_ANGLES);var t=[new i.default,new i.default,new i.default,new i.default],r=new i.default(this.rawData[0],this.rawData[1],this.rawData[2]),a=new i.default(this.rawData[4],this.rawData[5],this.rawData[6]),u=new i.default(this.rawData[8],this.rawData[9],this.rawData[10]),l=t[0];l.x=this.rawData[12],l.y=this.rawData[13],l.z=this.rawData[14];var s=t[3],c=t[2];s.x=r.length,r.scaleBy(1/s.x),c.x=r.dotProduct(a),a=n(a,r,1,-c.x),s.y=a.length,a.scaleBy(1/s.y),c.x/=s.y,c.y=r.dotProduct(u),u=n(u,r,1,-c.y),c.z=a.dotProduct(u),u=n(u,a,1,-c.z),s.z=u.length,u.scaleBy(1/s.z),c.y/=s.z,c.z/=s.z,r.dotProduct(a.crossProduct(u))<0&&(s.z=-s.z,u.x=-u.x,u.y=-u.y,u.z=-u.z);var f=t[1];switch(e){case o.default.AXIS_ANGLE:f.w=Math.acos((r.x+a.y+u.z-1)/2);var d=Math.sqrt((a.z-u.y)*(a.z-u.y)+(u.x-r.z)*(u.x-r.z)+(r.y-a.x)*(r.y-a.x));f.x=(a.z-u.y)/d,f.y=(u.x-r.z)/d,f.z=(r.y-a.x)/d;break;case o.default.QUATERNION:var h=r.x+a.y+u.z;h>0?(f.w=Math.sqrt(1+h)/2,f.x=(a.z-u.y)/(4*f.w),f.y=(u.x-r.z)/(4*f.w),f.z=(r.y-a.x)/(4*f.w)):r.x>a.y&&r.x>u.z?(f.x=Math.sqrt(1+r.x-a.y-u.z)/2,f.w=(a.z-u.y)/(4*f.x),f.y=(r.y+a.x)/(4*f.x),f.z=(u.x+r.z)/(4*f.x)):a.y>u.z?(f.y=Math.sqrt(1+a.y-r.x-u.z)/2,f.x=(r.y+a.x)/(4*f.y),f.w=(u.x-r.z)/(4*f.y),f.z=(a.z+u.y)/(4*f.y)):(f.z=Math.sqrt(1+u.z-r.x-a.y)/2,f.x=(u.x+r.z)/(4*f.z),f.y=(a.z+u.y)/(4*f.z),f.w=(r.y-a.x)/(4*f.z));break;case o.default.EULER_ANGLES:f.y=Math.asin(-r.z),1!=r.z&&r.z!=-1?(f.x=Math.atan2(a.z,u.z),f.z=Math.atan2(r.y,r.x)):(f.z=0,f.x=Math.atan2(a.x,a.y))}return t},e.prototype.deltaTransformVector=function(e){throw new a.default},e.prototype.identity=function(){this._data=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.interpolate=function(t,r,n){n=s.default.clamp(n,0,1);for(var i=new Array(16),o=0;o<16;o++)i[o]=t._data[o]*(1-n)+r._data[o]*n;return new e(i)},e.prototype.interpolateTo=function(t,r){return e.interpolate(this,t,r)},e.prototype.invert=function(){throw new a.default},e.prototype.pointAt=function(e,t,r){void 0===t&&(t=i.default.ORIGIN),void 0===r&&(r=i.default.Z_AXIS);var n=t.x-e.x,o=t.y-e.y,a=t.z-e.z,u=1/Math.sqrt(n*n+o*o+a*a);n*=u,o*=u,a*=u;var l=o*r.z-a*r.y,s=a*r.x-n*r.z,c=n*r.y-o*r.x,f=1/Math.sqrt(l*l+s*s+c*c);l*=f,s*=f,c*=f;var d=s*a-c*o,h=c*n-l*a,p=l*o-s*n,_=this._data;_[0]=l,_[1]=s,_[2]=c,_[3]=0,_[4]=d,_[5]=h,_[6]=p,_[7]=0,_[8]=-n,_[9]=-o,_[10]=-a,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1;var g=-e.x,b=-e.y,y=-e.z;_[3]+=_[0]*g+_[1]*b+_[2]*y,_[7]+=_[4]*g+_[5]*b+_[6]*y,_[11]+=_[8]*g+_[9]*b+_[10]*y,_[15]+=_[12]*g+_[13]*b+_[14]*y},e.prototype.prepend=function(t){this._data=e.__dotProduct(this._data,t._data)},e.prototype.prependRotation=function(t,r,n){void 0===n&&(n=null),null!==n&&this.prependTranslation(n.x,n.y,n.z),this._data=e.__dotProduct(this._data,e.__getRotationMatrix(t*Math.PI/180,r)),null!==n&&this.prependTranslation(-n.x,-n.y,-n.z)},e.prototype.prependScale=function(t,r,n){this._data=e.__dotProduct(this._data,[t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1])},e.prototype.prependSkew=function(e,t,r){if(0!==e||0!==t||0!==r){var n=h;n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=e,n[5]=1,n[6]=0,n[7]=0,n[8]=t,n[9]=r,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this.prepend(d)}},e.prototype.prependTranslation=function(t,r,n){this._data=e.__dotProduct(this._data,[1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1])},e.prototype.recompose=function(e,t){if(void 0===t&&(t=o.default.EULER_ANGLES),t!=o.default.EULER_ANGLES)throw new a.default;if(!c.default.isArray(e))return!1;for(var r=0;r<e.length;++r)if(c.default.isUndefinedOrNull(e[r])||!(e[r]instanceof i.default))return!1;var n=e[0]?e[0]:this.position;this.identity();var u=e[3];!u||1===u.x&&1===u.y&&1===u.z||this.appendScale(u.x,u.y,u.z);var l=e[2];!l||0===l.x&&0===l.y&&0===l.z||this.appendSkew(l.x,l.y,l.z);var s,f,p=h;p[12]=0,p[13]=0,p[14]=0,p[15]=0;var _=e[1];if(_){var g=-_.x;0!=g&&(s=Math.sin(g),f=Math.cos(g),p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=f,p[6]=-s,p[7]=0,p[8]=0,p[9]=s,p[10]=f,p[11]=0,this.append(d)),g=-_.y,0!=g&&(s=Math.sin(g),f=Math.cos(g),p[0]=f,p[1]=0,p[2]=s,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=-s,p[9]=0,p[10]=f,p[11]=0,this.append(d)),g=-_.z,0!=g&&(s=Math.sin(g),f=Math.cos(g),p[0]=f,p[1]=-s,p[2]=0,p[3]=0,p[4]=s,p[5]=f,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,this.append(d))}return this.position=n,this.rawData[15]=1,!0},e.prototype.transformVector=function(e){var t=this._data[0]*e.x+this._data[1]*e.y+this._data[2]*e.z+this._data[3]*e.w,r=this._data[4]*e.x+this._data[5]*e.y+this._data[6]*e.z+this._data[7]*e.w,n=this._data[8]*e.x+this._data[9]*e.y+this._data[10]*e.z+this._data[11]*e.w,o=this._data[12]*e.x+this._data[13]*e.y+this._data[14]*e.z+this._data[15]*e.w;return new i.default(t,r,n,o)},e.prototype.transformVectors=function(e,t){if(e.length%3!==0)throw new l.default("Matrix3D.transformVectors needs 2 arrays, size of the input array must be multiple of 3.");for(var r=0;r<e.length/3;r++){var n=e[3*r],i=e[3*r+1],o=e[3*r+2],a=this._data[0]*n+this._data[1]*i+this._data[2]*o,u=this._data[4]*n+this._data[5]*i+this._data[6]*o,s=this._data[8]*n+this._data[9]*i+this._data[10]*o;t.push(a,u,s)}},e.prototype.transpose=function(){var e=this._data;this._data=[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]},e.prototype.toArray=function(){var e=this._data;return new Float32Array([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]])},e.prototype.setOrthographicProjection=function(e,t,r,n,i,o){if(e===t||r===n||i===o)throw new u.default("Null frustum");var a=1/(t-e),l=1/(r-n),s=1/(o-i),c=this._data;c[0]=2*a,c[1]=0,c[2]=0,c[3]=-(e+t)*a,c[4]=0,c[5]=2*l,c[6]=0,c[7]=-(r+n)*l,c[8]=0,c[9]=0,c[10]=-2*s,c[11]=-(i+o)*s,c[12]=0,c[13]=0,c[14]=0,c[15]=1},e.prototype.setPerspectiveProjection=function(e,t,r,n){if(r===n||0===t)throw new u.default("Null frustum");if(r<=0)throw new u.default("near <= 0");if(n<=0)throw new u.default("far <= 0");e=Math.PI/2*e/180;var i=Math.sin(e);if(0===i)throw new u.default("Null frustum");var o=1/(n-r),a=Math.cos(e)/i,l=this._data;l[0]=a/t,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=-(n+r)*o,l[11]=-2*r*n*o,l[12]=0,l[13]=0,l[14]=-1,l[15]=0},e.__dotProduct=function(e,t){if(16!==e.length||16!==t.length)throw new Error("Matrix3D dot product needs a array of 16 elements.");for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<4;n++)for(var i=0;i<4;i++)for(var o=0;o<4;o++)r[4*n+i]+=e[4*n+o]*t[4*o+i];return r},e.__getRotationMatrix=function(e,t){var r=Math.sin(e),n=Math.cos(e);return[n+t.x*t.x*(1-n),t.x*t.y*(1-n)-t.z*r,t.x*t.z*(1-n)+t.y*r,0,t.x*t.y*(1-n)+t.z*r,n+t.y*t.y*(1-n),t.y*t.z*(1-n)-t.x*r,0,t.z*t.x*(1-n)-t.y*r,t.z*t.y*(1-n)+t.x*r,n+t.z*t.z*(1-n),0,0,0,0,1]},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=f;var d=new f,h=d.rawData},{"../../mic/CommonUtil":102,"../../mic/MathUtil":106,"../errors/ApplicationError":47,"../errors/ArgumentError":48,"../errors/NotImplementedError":51,"./Orientation3D":65,"./Vector3D":70}],65:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"AXIS_ANGLE",{get:function(){return"axisAngle"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EULER_ANGLES",{get:function(){return"eulerAngles"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"QUATERNION",{get:function(){return"quaternion"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],66:[function(e,t,r){"use strict";var n=e("./Point"),i=e("../errors/NotImplementedError"),o=e("../../mic/MathUtil"),a=function(){function e(){this.focalLength=10,this.projectionCenter=null,this._fieldOfView=90,this.projectionCenter=new n.default}return Object.defineProperty(e.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(e){this._fieldOfView=o.default.clamp(e,0,180)},enumerable:!0,configurable:!0}),e.prototype.toMatrix3D=function(){throw new i.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../mic/MathUtil":106,"../errors/NotImplementedError":51,"./Point":67}],67:[function(e,t,r){"use strict";var n=e("../../mic/MathUtil"),i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},e.distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},e.interpolate=function(t,r,i){return i=n.default.clamp(i,0,1),new e(t.x*i+r.x*(1-i),t.y*i+r.y*(1-i))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),e.prototype.normalize=function(e){var t=this.length;t>0&&(this.x*=e/t,this.y*=e/t)},e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e.polar=function(t,r){return new e(t*Math.cos(r),t*Math.sin(r))},e.prototype.setTo=function(e,t){this.x=e,this.y=t},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.toString=function(){return"(X="+this.x+", y="+this.y+")"},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../mic/MathUtil":106}],68:[function(e,t,r){"use strict";var n=e("./Point"),i=function(){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this._x=0,this._y=0,this._w=0,this._h=0,this._x=e>=0?e:0,this._y=t>=0?t:0,this._w=r>=0?r:0,this._h=n>=0?n:0}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this._y+this._h},set:function(e){e<this._y&&(e=this._y),this._h=e-this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new n.default(this._x+this._w,this._y+this._h)},set:function(e){this.right=e.x,this.bottom=e.y},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._x,this._y,this._w,this._h)},e.prototype.contains=function(e,t){return this.left<=e&&e<=this.right&&this.top<=t&&t<=this.bottom},e.prototype.containsPoint=function(e){return this.contains(e.x,e.y)},e.prototype.containsRect=function(e){return this.containsPoint(e.topLeft)&&this.containsPoint(e.bottomRight)},e.prototype.copyFrom=function(e){this._x=e._x,this._y=e._y,this._w=e._w,this._h=e._h},e.prototype.equals=function(e){return this._x==e._x&&this._y==e._y&&this._w==e._w&&this._h==e._h},Object.defineProperty(e.prototype,"height",{get:function(){return this._h},set:function(e){this._h=e>=0?e:0},enumerable:!0,configurable:!0}),e.prototype.inflate=function(e,t){this.x-=e,this.width+=e+e,this.y-=t,this.height+=t+t},e.prototype.inflatePoint=function(e){this.inflate(e.x,e.y)},e.prototype.intersection=function(t){var r=this.intersects(t);if(r){var n=this,i=t,o=Math.max(n.x,i.x),a=Math.max(n.bottom,i.bottom),u=Math.min(n.right,i.right),l=Math.min(n.y,i.y);return new e(o,l,u-o,a-l)}return e.empty},e.prototype.intersects=function(t){return e.testIntersection(this,t)},e.prototype.isEmpty=function(){return this._w<=0||this._h<=0},Object.defineProperty(e.prototype,"left",{get:function(){return this._x},set:function(e){this._x=e>=0?e:0},enumerable:!0,configurable:!0}),e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e.prototype.offsetPoint=function(e){this.offset(e.x,e.y)},Object.defineProperty(e.prototype,"right",{get:function(){return this._x+this._w},set:function(e){e<this._x&&(e=this._x),this._w=e-this._x},enumerable:!0,configurable:!0}),e.prototype.setEmpty=function(){this._x=this._y=this._w=this._h=0},e.prototype.setTo=function(e,t,r,n){this.x=e,this.y=t,this.width=r,this.height=n},Object.defineProperty(e.prototype,"size",{get:function(){return new n.default(this._w,this._h)},set:function(e){this._w=e.x,this._h=e.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._y},set:function(e){e>this._y+this._h&&(e=this._y+this._h),this._h=this._y+this._h-e,this._y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new n.default(this._x,this._y)},set:function(e){this.left=e.x,this.top=e.y},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"},e.prototype.union=function(t){var r=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.right,t.right),o=Math.max(this.bottom,t.bottom);return new e(r,n,i-r,o-n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._w},set:function(e){this._w=e>=0?e:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"empty",{get:function(){return o.clone()},enumerable:!0,configurable:!0}),e.testIntersection=function(e,t,r){void 0===r&&(r=!0);var n;return n=r?e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom:e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom,!n},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=new i},{"./Point":67}],69:[function(e,t,r){"use strict";var n=e("./Matrix3D"),i=e("./ColorTransform"),o=e("./Matrix"),a=e("./PerspectiveProjection"),u=e("../errors/NotImplementedError"),l=function(){function e(){this.colorTransform=null,this.matrix=null,this.matrix3D=null,this.perspectiveProjection=null,this._pixelBounds=null,this.matrix=new o.default,this.matrix3D=new n.default,this.colorTransform=new i.default,this.perspectiveProjection=new a.default}return Object.defineProperty(e.prototype,"concatenatedColorTransform",{get:function(){throw new u.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"concatenatedMatrix",{get:function(){throw new u.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:!0,configurable:!0}),e.prototype.getRelativeMatrix3D=function(e){throw new u.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../errors/NotImplementedError":51,"./ColorTransform":62,"./Matrix":63,"./Matrix3D":64,"./PerspectiveProjection":66}],70:[function(e,t,r){"use strict";var n=e("../../mic/MathUtil"),i=function(){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.w=0,this.x=0,this.y=0,this.z=0,this.x=e,this.y=t,this.z=r,this.w=n}return Object.defineProperty(e,"X_AXIS",{
get:function(){return new e(1,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Y_AXIS",{get:function(){return new e(0,1,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Z_AXIS",{get:function(){return new e(0,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ORIGIN",{get:function(){return new e(0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w)},e.angleBetween=function(e,t){var r=e.x*t.x+e.y*t.y+e.z*t.z,n=e.length*t.length,i=Math.sqrt(r*r/n);return Math.acos(i)},e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)},e.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w},e.prototype.crossProduct=function(t){var r=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return new e(r,n,i,this.w)},e.prototype.decrementBy=function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z},e.distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)+(e.z-t.z)*(e.z-t.z))},e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},e.prototype.equals=function(e,t){return void 0===t&&(t=!1),this.x==e.x&&this.y==e.y&&this.z==e.y&&!(t&&this.w!=e.w)},e.prototype.incrementBy=function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},e.prototype.nearEquals=function(e,t,r){return void 0===r&&(r=!1),n.default.isValueBetweenNotEquals(this.x,e.x-t,e.x+t)&&n.default.isValueBetweenNotEquals(this.y,e.y-t,e.y+t)&&n.default.isValueBetweenNotEquals(this.z,e.z-t,e.z+t)&&!(r&&!n.default.isValueBetweenNotEquals(this.w,e.w-t,e.w+t))},e.prototype.negate=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},e.prototype.normalize=function(){var e=this.length;return e>0&&(this.x/=e,this.y/=e,this.z/=e),e},e.prototype.project=function(){null!=this.w&&0!=this.w&&(this.x/=this.w,this.y/=this.w,this.z/=this.w)},e.prototype.scaleBy=function(e){this.x*=e,this.y*=e,this.z*=e},e.prototype.setTo=function(e,t,r){this.x=e,this.y=t,this.z=r},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z,this.w)},e.prototype.toString=function(){return"[x="+this.x+", y="+this.y+", z="+this.z+", w="+this.w+"]"},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../mic/MathUtil":106}],71:[function(e,t,r){"use strict";var n=e("./ColorTransform");r.ColorTransform=n.default;var i=e("./Matrix");r.Matrix=i.default;var o=e("./Matrix3D");r.Matrix3D=o.default;var a=e("./Orientation3D");r.Orientation3D=a.default;var u=e("./PerspectiveProjection");r.PerspectiveProjection=u.default;var l=e("./Point");r.Point=l.default;var s=e("./Rectangle");r.Rectangle=s.default;var c=e("./Vector3D");r.Vector3D=c.default},{"./ColorTransform":62,"./Matrix":63,"./Matrix3D":64,"./Orientation3D":65,"./PerspectiveProjection":66,"./Point":67,"./Rectangle":68,"./Vector3D":70}],72:[function(e,t,r){"use strict";var n=e("./display/index");r.display=n;var i=e("./events/index");r.events=i;var o=e("./geom/index");r.geom=o;var a=e("./filters/index");r.filters=a;var u=e("./text/index");r.text=u;var l=e("./utils/index");r.utils=l;var s=e("./media/index");r.media=s;var c=e("./errors/index");r.errors=c;var f=e("./net/index");r.net=f},{"./display/index":46,"./errors/index":53,"./events/index":57,"./filters/index":61,"./geom/index":71,"./media/index":77,"./net/index":82,"./text/index":93,"./utils/index":98}],73:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../events/EventDispatcher"),o=e("../errors/NotImplementedError"),a=function(e){function t(t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n=e.call(this)||this;return n._source=null,n._source=t,null===!t&&n.load(t,r),n}return n(t,e),Object.defineProperty(t.prototype,"bytesLoaded",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytesTotal",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBuffering",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isURLInaccessible",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return null===this._source?"":this._source.url},enumerable:!0,configurable:!0}),t.prototype.close=function(){throw new o.default},t.prototype.extract=function(e,t,r){throw void 0===r&&(r=-1),new o.default},t.prototype.load=function(e,t){throw void 0===t&&(t=null),new o.default},t.prototype.loadPCMFromByteArray=function(e,t,r,n,i){throw void 0===r&&(r="float"),void 0===n&&(n=!0),void 0===i&&(i=44100),new o.default},t.prototype.play=function(e,t,r){throw void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=null),new o.default},Object.defineProperty(t,"COMPLETE",{get:function(){return"complete"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPEN",{get:function(){return"open"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PROGRESS",{get:function(){return"progress"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SAMPLE_DATA",{get:function(){return"sampleData"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../errors/NotImplementedError":51,"../events/EventDispatcher":54}],74:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../events/EventDispatcher"),o=e("../errors/NotImplementedError"),a=function(e){function t(){var t=e.call(this)||this;return t._soundTransform=null,t}return n(t,e),Object.defineProperty(t.prototype,"leftPeak",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightPeak",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"soundTransform",{get:function(){return this._soundTransform},set:function(e){this._soundTransform=e},enumerable:!0,configurable:!0}),t.prototype.stop=function(){throw new o.default},Object.defineProperty(t,"SOUND_COMPLETE",{get:function(){return"soundComplete"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../errors/NotImplementedError":51,"../events/EventDispatcher":54}],75:[function(e,t,r){"use strict";var n=function(){function e(e,t){void 0===e&&(e=1e3),void 0===t&&(t=!1),this._bufferTime=1e3,this._checkPolicyFile=!1,this._bufferTime=e,this._checkPolicyFile=t}return Object.defineProperty(e.prototype,"bufferTime",{get:function(){return this._bufferTime},set:function(e){this._bufferTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkPolicyFile",{get:function(){return this._checkPolicyFile},set:function(e){this._checkPolicyFile=e},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],76:[function(e,t,r){"use strict";var n=e("../errors/NotImplementedError"),i=function(){function e(e,t){void 0===e&&(e=1),void 0===t&&(t=0),this._volume=1,this._panning=0,this._leftToLeft=1,this._leftToRight=0,this._rightToLeft=0,this._rightToRight=1,this._volume=e,this._panning=t}return Object.defineProperty(e.prototype,"leftToLeft",{get:function(){throw new n.default},set:function(e){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftToRight",{get:function(){throw new n.default},set:function(e){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pan",{get:function(){throw new n.default},set:function(e){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightToLeft",{get:function(){throw new n.default},set:function(e){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightToRight",{get:function(){throw new n.default},set:function(e){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){throw new n.default},set:function(e){throw new n.default},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../errors/NotImplementedError":51}],77:[function(e,t,r){"use strict";var n=e("./Sound");r.Sound=n.default;var i=e("./SoundChannel");r.SoundChannel=i.default;var o=e("./SoundLoaderContext");r.SoundLoaderContext=o.default;var a=e("./SoundTransform");r.SoundTransform=a.default},{"./Sound":73,"./SoundChannel":74,"./SoundLoaderContext":75,"./SoundTransform":76}],78:[function(e,t,r){"use strict";var n=e("../errors/NotImplementedError"),i=e("./URLRequestMethod"),o=function(){function e(e){void 0===e&&(e=null),this._contentType="application/x-www-form-urlencoded",this._data=null,this._digest=null,this._followRedirects=!0,this._method=i.default.GET,this._requestHeaders=null,this._url=null,this._userAgent="User-Agent: Shockwave Flash",this._url=e}return Object.defineProperty(e.prototype,"contentType",{get:function(){return this._contentType},set:function(e){this._contentType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"digest",{get:function(){return this._digest},set:function(e){this._digest=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"followRedirects",{get:function(){return this._followRedirects},set:function(e){this._followRedirects=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this._method},set:function(e){e=e.toUpperCase(),e!==i.default.GET&&e!==i.default.POST&&(e=i.default.GET),this._method=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestHeaders",{get:function(){return this._requestHeaders},set:function(e){this._requestHeaders=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userAgent",{get:function(){return this._userAgent},set:function(e){this._userAgent=e},enumerable:!0,configurable:!0}),e.prototype.useRedirectedURL=function(e,t,r,i){throw void 0===t&&(t=!1),void 0===r&&(r=null),void 0===i&&(i=null),new n.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../errors/NotImplementedError":51,"./URLRequestMethod":80}],79:[function(e,t,r){"use strict";var n=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=""),this._name=null,this._value=null,this._name=e,this._value=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],80:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"GET",{get:function(){return"GET"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"POST",{get:function(){return"POST"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],81:[function(e,t,r){"use strict";var n=e("../../mic/Coerce"),i=function(){function e(e){void 0===e&&(e=null),this._dictionary=null,this._dictionary=new Map,e=n.default.toString(e),e.length>0&&this.decode(e)}return e.prototype.decode=function(e){var t=this.dictionary;if(t.clear(),e=n.default.toString(e),0!==e.length){var r=[],i=["=","&"],o=0,a=e.indexOf(i[o]);if(!(a<=0)){for(;a>0;)r.push(a),o=n.default.toNumber(!o),a=e.indexOf(i[o],a+1);var u=r.length;if(0!==u){1===u&&t.set(e);for(var l=0;l<u;++l){var s=e.substring(0,r[l]-1);if(!(l<u-1)){var c=e.substring(r[l]+1,e.length-1);return void(c.length>0&&t.set(c))}++l;var f=e.substring(r[l-1]+1,r[l]-1);if(t.set(s,f),l===u-1){var c=e.substring(r[l]+1,e.length-1);return void(c.length>0&&t.set(c))}}}}}},Object.defineProperty(e.prototype,"dictionary",{get:function(){return this._dictionary},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../mic/Coerce":101}],82:[function(e,t,r){"use strict";var n=e("./URLRequest");r.URLRequest=n.default;var i=e("./URLRequestHeader");r.URLRequestHeader=i.default;var o=e("./URLRequestMethod");r.URLRequestMethod=o.default;var a=e("./URLVariables");r.URLVariables=a.default},{"./URLRequest":78,"./URLRequestHeader":79,"./URLRequestMethod":80,"./URLVariables":81}],83:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"ADVANCED",{get:function(){return"advanced"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],84:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PIXEL",{get:function(){return"pixel"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SUBPIXEL",{get:function(){return"subpixel"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],85:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../events/EventDispatcher"),o=e("../errors/NotImplementedError"),a=function(e){function t(){e.call(this)||this;throw new o.default}return n(t,e),t.prototype.clear=function(){throw new o.default},t.prototype.getStyle=function(e){throw new o.default},t.prototype.parseCSS=function(e){throw new o.default},t.prototype.setStyle=function(e,t){throw new o.default},t.prototype.transform=function(e){throw new o.default},t.prototype.dispose=function(){throw e.prototype.dispose.call(this),new o.default},Object.defineProperty(t.prototype,"styleNames",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../errors/NotImplementedError":51,"../events/EventDispatcher":54}],86:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../display/InteractiveObject"),o=e("./AntiAliasType"),a=e("./TextFieldAutoSize"),u=e("./TextFormat"),l=e("./GridFitType"),s=e("./TextInteractionMode"),c=e("./TextFieldType"),f=e("../../webgl/ShaderID"),d=e("../../webgl/RenderHelper"),h=e("../errors/NotImplementedError"),p=e("../../mic/glantern/GLUtil"),_=e("../../mic/VirtualDom"),g=e("../geom/Vector3D"),b=e("../geom/Matrix3D"),y=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.alwaysShowSelection=!1,n.antiAliasType=o.default.NORMAL,n.autoSize=a.default.NONE,n.condenseWhite=!1,n.displayAsPassword=!1,n.embedFonts=!1,n.gridFitType=l.default.PIXEL,n.htmlText=null,n.maxChars=0,n.mouseWheelEnabled=!0,n.multiline=!0,n.restrict=null,n.scrollH=0,n.scrollV=1,n.selectable=!0,n.sharpness=0,n.styleSheet=null,n.customOutlineEnabled=!1,n.textInteractionMode=s.default.NORMAL,n.type=c.default.DYNAMIC,n.useRichTextClipboard=!1,n.wordWrap=!1,n._textFormatChangedHandler=null,n._defaultTextFormat=null,n._isContentChanged=!0,n._canvasTarget=null,n._canvas=null,n._context2D=null,n._text=null,n._background=!1,n._backgroundColor=16777215,n._border=!1,n._borderColor=0,n._textColor=0,n._textOutlineColor=0,n._thickness=0,null!==t&&(n._canvasTarget=n._$createCanvasTarget(t.$worldRenderer)),n._textFormatChangedHandler=n.__textFormatChanged.bind(n),n.defaultTextFormat=new u.default,n}return n(t,e),t.prototype.appendText=function(e){this.text+=e},Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){var t=e!==this._background;t&&(this._background=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){var t=e!==this._backgroundColor;t&&(this._backgroundColor=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._border},set:function(e){var t=e!==this._border;t&&(this._border=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderColor",{get:function(){return this._borderColor},set:function(e){var t=e!==this._borderColor;t&&(this._borderColor=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomScrollV",{get:function(){throw new h.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caretIndex",{get:function(){throw new h.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTextFormat",{get:function(){return this._defaultTextFormat},set:function(e){null!==this._defaultTextFormat&&this._defaultTextFormat.removeEventListener(u.default.TEXT_FORMAT_CHANGE,this._textFormatChangedHandler),this._defaultTextFormat=e?e:new u.default,this._defaultTextFormat.addEventListener(u.default.TEXT_FORMAT_CHANGE,this._textFormatChangedHandler)},enumerable:!0,configurable:!0}),t.prototype.getCharBoundaries=function(){throw new h.default},t.prototype.getCharIndexAtPoint=function(e,t){throw new h.default},t.prototype.getFirstCharInParagraph=function(e){throw new h.default},t.prototype.getImageReference=function(e){throw new h.default},t.prototype.getLineIndexAtPoint=function(e,t){throw new h.default},t.prototype.getLineIndexOfChar=function(e){throw new h.default},t.prototype.getLineLength=function(e){throw new h.default},t.prototype.getLineMetrics=function(e){throw new h.default},t.prototype.getLineOffset=function(e){throw new h.default},t.prototype.getLineText=function(e){throw new h.default},t.prototype.getParagraphLength=function(e){throw new h.default},t.prototype.getTextFormat=function(e,t){return void 0===e&&(e=-1),void 0===t&&(t=-1),this.defaultTextFormat},t.prototype.isFontCompatible=function(e,t){throw new h.default},t.prototype.replaceSelectedText=function(e){throw new h.default},t.prototype.replaceText=function(e,t,r){throw new h.default},t.prototype.setSelection=function(e,t){throw new h.default},t.prototype.setTextFormat=function(e,t,r){void 0===t&&(t=-1),void 0===r&&(r=-1),this.defaultTextFormat=e},Object.defineProperty(t.prototype,"length",{get:function(){return this.text?this.text.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollH",{get:function(){throw new h.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollV",{get:function(){throw new h.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numLines",{get:function(){throw new h.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionBeginIndex",{get:function(){throw new h.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionEndIndex",{get:function(){throw new h.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){var t=this._text!==e;t&&(this._text=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this.defaultTextFormat.color},set:function(e){var t=this.defaultTextFormat.color!==e;this.defaultTextFormat.color=e,t&&!this.customOutlineEnabled&&(this.textOutlineColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textOutlineColor",{get:function(){return this._textOutlineColor},set:function(e){var t=this._textOutlineColor!==e;t&&(this._textOutlineColor=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){var e=1.5*this.defaultTextFormat.size;return this.thickness>0&&(e+=2*this.thickness),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){var e=this._context2D.measureText(this.text),t=e.width;return this.thickness>0&&(t+=2*this.thickness),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(e){var t=this._thickness!==e;t&&(this._thickness=e,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this.$rawRoot.$worldRenderer;t.releaseRenderTarget(this._canvasTarget),this._canvasTarget=null,this._canvas=null,this._context2D=null},t.prototype._$update=function(e){this._isContentChanged&&(this._canvasTarget.updateImageSize(),this._$updateCanvasTextStyle(this._context2D),this._$drawTextElements(this._context2D),this._isContentChanged=!1)},t.prototype._$render=function(e){if(this.visible&&this.alpha>0&&null!==this.text&&this.text.length>0){var t=this._canvasTarget;t.updateImageContent();var r=this.transform.matrix3D.decompose(),n=new b.default;n.recompose([g.default.ORIGIN,r[1],r[2],r[3]]);var i=e.currentRenderTarget;d.default.copyImageContent(e,t,i,!1,!i.isStencil,n,this.alpha,!1)}},t.prototype._$selectShader=function(e){e.selectShader(f.default.COPY_IMAGE)},t.prototype._$createCanvasTarget=function(e){if(null===this._canvas){var t=_.default.createElement("canvas");t.width=e.view.width,t.height=e.view.height,this._canvas=t,this._context2D=t.getContext("2d")}return e.createRenderTarget(this._canvas)},t.prototype._$updateCanvasTextStyle=function(e){var t=[];this.defaultTextFormat.bold&&t.push("bold"),this.defaultTextFormat.italic&&t.push("italic"),t.push(this.defaultTextFormat.size.toString()+"pt"),t.push('"'+this.defaultTextFormat.font+'"'),e.font=t.join(" ")},t.prototype._$drawTextElements=function(e){var t=this.transform.matrix3D,r=new g.default(this.x,this.y,this.z);r=t.transformVector(r);var n=r.x,i=r.y,o=this.thickness,a=(this.thickness,1);e.clearRect(0,0,this._canvas.width,this._canvas.height),this.background&&(e.fillStyle=p.default.colorToCssSharp(this.backgroundColor),e.fillRect(n,i,this.textWidth+2*a,this.textHeight+2*a)),e.fillStyle=p.default.colorToCssSharp(this.textColor),e.fillText(this.text,n+o+a,i+.75*this.textHeight+a),this.thickness>0&&(e.lineWidth=this.thickness,e.strokeStyle=p.default.colorToCssSharp(this.textOutlineColor),e.strokeText(this.text,n+o+a,i+.75*this.textHeight+a)),this.border&&(e.lineWidth=a,e.strokeStyle=p.default.colorToCssSharp(this.borderColor),e.strokeRect(n+a,i+a,this.textWidth+2*a,this.textHeight+2*a))},t.prototype.__textFormatChanged=function(){this._isContentChanged=!0},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=y},{"../../mic/VirtualDom":107,"../../mic/glantern/GLUtil":108,"../../webgl/RenderHelper":119,"../../webgl/ShaderID":121,"../display/InteractiveObject":32,"../errors/NotImplementedError":51,"../geom/Matrix3D":64,"../geom/Vector3D":70,"./AntiAliasType":83,"./GridFitType":84,"./TextFieldAutoSize":87,"./TextFieldType":88,"./TextFormat":89,"./TextInteractionMode":91}],87:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"CENTER",{get:function(){return"center"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LEFT",{get:function(){return"left"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RIGHT",{get:function(){return"right"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],88:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"DYNAMIC",{get:function(){return"dynamic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INPUT",{get:function(){return"input"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],89:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./TextFormatAlign"),o=e("../events/EventDispatcher"),a=e("../../mic/EventBase"),u=function(e){function t(t,r,n,o,a,u,l,s,c,f,d,h,p){void 0===t&&(t=null),void 0===r&&(r=12),void 0===n&&(n=0),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===u&&(u=!1),void 0===l&&(l=null),void 0===s&&(s=null),void 0===c&&(c=i.default.LEFT),void 0===f&&(f=0),void 0===d&&(d=0),void 0===h&&(h=0),void 0===p&&(p=0);var _=e.call(this)||this;return _._align=i.default.LEFT,_._blockIndent=0,_._bold=!1,_._bullet=!1,_._color=0,_._font=null,_._indent=0,_._italic=!1,_._kerning=!1,_._leading=0,_._leftMargin=0,_._letterSpacing=0,_._rightMargin=0,_._size=12,_._tabStops=[],_._target=null,_._underline=!1,_._url=null,_.font=null!==t?t:"Times New Roman",_.size=r,_.color=n,_.bold=o,_.italic=a,_.underline=u,_.url=l,_.target=s,_.align=c,_.leftMargin=f,_.rightMargin=d,_.indent=h,_.leading=p,_}return n(t,e),Object.defineProperty(t,"TEXT_FORMAT_CHANGE",{get:function(){return"textFormatChange"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){var t=this._align!==e;t&&(this._align=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blockIndent",{get:function(){return this._blockIndent},set:function(e){var t=this._blockIndent!==e;t&&(this._blockIndent=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bold",{get:function(){return this._bold},set:function(e){var t=this._bold!==e;t&&(this._bold=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bullet",{get:function(){return this._bullet},set:function(e){var t=this._bullet!==e;t&&(this._bullet=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){var t=this._color!==e;t&&(this._color=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){var t=this._font!==e;t&&(this._font=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indent",{get:function(){return this._indent},set:function(e){var t=this._indent!==e;t&&(this._indent=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"italic",{get:function(){return this._italic},set:function(e){var t=this._italic!==e;t&&(this._italic=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kerning",{get:function(){return this._kerning},set:function(e){var t=this._kerning!==e;t&&(this._kerning=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._indent},set:function(e){var t=this._leading!==e;t&&(this._leading=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMargin",{get:function(){return this._leftMargin},set:function(e){var t=this._leftMargin!==e;t&&(this._leftMargin=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){var t=this._letterSpacing!==e;t&&(this._letterSpacing=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMargin",{get:function(){return this._rightMargin},set:function(e){var t=this._rightMargin!==e;t&&(this._rightMargin=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){var t=this._size!==e;t&&(this._size=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabStops",{get:function(){return this._tabStops},set:function(e){e||(e=[]);var t=!1;if(t||(t=this._tabStops.length!==e.length),!t)for(var r=0;r<e.length;++r)if(this._tabStops[r]!==e[r]){t=!0;break}t&&(this._tabStops=e.slice(),this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){var t=this._target!==e;t&&(this._target=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underline",{get:function(){return this._underline},set:function(e){var t=this._underline!==e;t&&(this._underline=e,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},set:function(e){var t=this._url!==e;t&&(this._url=e,this.__raiseChange())},enumerable:!0,configurable:!0}),t.prototype.__raiseChange=function(){var e=a.default.create(t.TEXT_FORMAT_CHANGE);this.dispatchEvent(e)},t}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../mic/EventBase":105,"../events/EventDispatcher":54,"./TextFormatAlign":90}],90:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"CENTER",{get:function(){return"center"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"END",{get:function(){return"end"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"JUSTIFY",{get:function(){return"justify"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LEFT",{get:function(){return"left"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RIGHT",{get:function(){return"right"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"START",{get:function(){return"start"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],91:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SELECTION",{get:function(){return"selection"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],92:[function(e,t,r){"use strict";var n=function(){function e(e,t,r,n,i,o){this.ascent=0,this.descent=0,this.height=0,this.leading=0,this.width=0,this.x=0,this.x=e,this.width=t,this.height=r,this.ascent=n,this.descent=i,this.leading=o}return e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],93:[function(e,t,r){"use strict";var n=e("./AntiAliasType");r.AntiAliasType=n.default;var i=e("./GridFitType");r.GridFitType=i.default;var o=e("./StyleSheet");r.StyleSheet=o.default;var a=e("./TextField");r.TextField=a.default;var u=e("./TextFieldAutoSize");r.TextFieldAutoSize=u.default;var l=e("./TextFieldType");r.TextFieldType=l.default;var s=e("./TextFormat");r.TextFormat=s.default;var c=e("./TextFormatAlign");r.TextFormatAlign=c.default;var f=e("./TextInteractionMode");r.TextInteractionMode=f.default;
var d=e("./TextLineMetrics");r.TextLineMetrics=d.default},{"./AntiAliasType":83,"./GridFitType":84,"./StyleSheet":85,"./TextField":86,"./TextFieldAutoSize":87,"./TextFieldType":88,"./TextFormat":89,"./TextFormatAlign":90,"./TextInteractionMode":91,"./TextLineMetrics":92}],94:[function(e,t,r){"use strict";var n=e("pako"),i=e("../errors/NotImplementedError"),o=e("./Endian"),a=e("../errors/ArgumentError"),u=e("../errors/EOFError"),l=e("./CompressionAlgorithm"),s=e("../errors/ApplicationError"),c=function(){function e(){this._length=0,this._position=-1,this._endian=o.default.BIG_ENDIAN,this._buffer=null,this._dataView=null}return Object.defineProperty(e.prototype,"bytesAvailable",{get:function(){var e=this.length-this.position-1;return e<0?0:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endian",{get:function(){return this._endian},set:function(e){if(e!==o.default.BIG_ENDIAN&&e!==o.default.LITTLE_ENDIAN)throw new a.default("Argument out of range.","v");this._endian=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){e>0&&e!==this._length&&(this.__adjustLength(e),this._length=e,this.position>=e&&(this._position=e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){e>=this.length||(this._position=e)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._dataView=null,this._buffer=null,this._position=0,this._length=0},e.prototype.compress=function(e){void 0===e&&(e=l.default.ZLIB),this.__ensureBufferExists();var t,r=new Uint8Array(this._buffer);switch(e){case l.default.DEFLATE:t=n.deflateRaw(r);break;case l.default.ZLIB:t=n.deflate(r);break;case l.default.LZMA:throw new i.default("LZMA compression algorithm is not implemented yet.");default:throw new a.default("Unknown compression algorithm.")}this._buffer=t.buffer,this._dataView=new DataView(this._buffer),this._length=this._buffer.byteLength,this._position=this._length},e.prototype.deflate=function(){this.compress(l.default.DEFLATE)},e.prototype.inflate=function(){this.uncompress(l.default.DEFLATE)},e.prototype.readBoolean=function(){return 0!==this.readByte()},e.prototype.readByte=function(){this.__checkPosition(1);var e=this._dataView.getInt8(this.position);return this.position+=1,e},e.prototype.readBytes=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=0),this.__checkPosition(r),e.__checkPosition(r),r>0){e.position=t;for(var n=this.position,i=0;i<r;++i)e._dataView.setUint8(t,this._dataView.getUint8(n+i));this.position+=r,e.position+=r}},e.prototype.readDouble=function(){this.__checkPosition(8);var e=this._dataView.getFloat64(this.position,this.__isLittleEndian());return this.position+=8,e},e.prototype.readFloat=function(){this.__checkPosition(4);var e=this._dataView.getFloat32(this.position,this.__isLittleEndian());return this.position+=4,e},e.prototype.readInt=function(){this.__checkPosition(4);var e=this._dataView.getInt32(this.position,this.__isLittleEndian());return this.position+=4,e},e.prototype.readShort=function(){this.__checkPosition(2);var e=this._dataView.getInt16(this.position,this.__isLittleEndian());return this.position+=2,e},e.prototype.readUnsignedByte=function(){this.__checkPosition(1);var e=this._dataView.getUint8(this.position);return this.position+=1,e},e.prototype.readUnsignedInt=function(){this.__checkPosition(4);var e=this._dataView.getUint32(this.position,this.__isLittleEndian());return this.position+=4,e},e.prototype.readUnsignedShort=function(){this.__checkPosition(2);var e=this._dataView.getUint16(this.position,this.__isLittleEndian());return this.position+=2,e},e.prototype.uncompress=function(e){void 0===e&&(e=l.default.ZLIB),this.__ensureBufferExists();var t,r=new Uint8Array(this._buffer);switch(e){case l.default.DEFLATE:t=n.inflateRaw(r);break;case l.default.ZLIB:t=n.inflate(r);break;case l.default.LZMA:throw new i.default("LZMA compression algorithm is not implemented yet.");default:throw new a.default("Unknown compression algorithm.")}this._buffer=t.buffer,this._dataView=new DataView(this._buffer),this._length=this._buffer.byteLength,this._position=this._length},e.prototype.writeBoolean=function(e){this.writeByte(e?1:0)},e.prototype.writeByte=function(e){this.__checkPosition(1),this._dataView.setInt8(this.position,e),this.position+=1},e.prototype.writeBytes=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),e.readBytes(this,t,r)},e.prototype.writeDouble=function(e){this.__checkPosition(8),this._dataView.setFloat64(this.position,e,this.__isLittleEndian()),this.position+=8},e.prototype.writeFloat=function(e){this.__checkPosition(4),this._dataView.setFloat64(this.position,e,this.__isLittleEndian()),this.position+=4},e.prototype.writeInt=function(e){this.__checkPosition(4),this._dataView.setInt32(this.position,e,this.__isLittleEndian()),this.position+=4},e.prototype.writeShort=function(e){this.__checkPosition(2),this._dataView.setInt16(this.position,e,this.__isLittleEndian()),this.position+=2},e.prototype.writeUnsignedByte=function(e){this.__checkPosition(1),this._dataView.setUint8(this.position,e),this.position+=1},e.prototype.writeUnsignedInt=function(e){this.__checkPosition(4),this._dataView.setUint32(this.position,e,this.__isLittleEndian()),this.position+=4},e.prototype.writeUnsignedShort=function(e){this.__checkPosition(2),this._dataView.setUint16(this.position,e,this.__isLittleEndian()),this.position+=2},e.from=function(t){var r=new e;return r._buffer=t,r._dataView=new DataView(t),r._length=t.byteLength,r._position=0,r},e.prototype.flatten=function(){this.__ensureBufferExists();for(var e=new Array(this.length),t=0;t<e.length;++t)e[t]=this._dataView.getUint8(t);return e},Object.defineProperty(e.prototype,"rawBuffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0}),e.prototype.__adjustLength=function(e){var t=this._buffer,r=this._dataView,n=new ArrayBuffer(e),i=new DataView(n);if(t){for(var o=e>this.length?t.byteLength:n.byteLength,a=0;a<o;++a)i.setUint8(a,r.getUint8(a));for(var a=o;a<n.byteLength;++a)i.setUint8(a,0)}else for(var a=0;a<n.byteLength;++a)i.setUint8(a,0);this._buffer=n,this._dataView=i},e.prototype.__ensureBufferExists=function(){if(null===this._buffer)throw new s.default("Buffer has not been allocated.")},e.prototype.__checkPosition=function(e){if(this.__ensureBufferExists(),this.bytesAvailable<e)throw new u.default("Position is out of buffer range.")},e.prototype.__isLittleEndian=function(){return this.endian===o.default.LITTLE_ENDIAN},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=c},{"../errors/ApplicationError":47,"../errors/ArgumentError":48,"../errors/EOFError":49,"../errors/NotImplementedError":51,"./CompressionAlgorithm":95,"./Endian":96,pako:218}],95:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"DEFLATE",{get:function(){return"deflate"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LZMA",{get:function(){return"lzma"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ZLIB",{get:function(){return"zlib"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],96:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"BIG_ENDIAN",{get:function(){return"bigEndian"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LITTLE_ENDIAN",{get:function(){return"littleEndian"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],97:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../events/EventDispatcher"),o=e("../events/TimerEvent"),a=e("../../mic/VirtualDom"),u=function(e){function t(t,r){void 0===r&&(r=0);var n=e.call(this)||this;return n.enabled=!0,n._currentCount=0,n._delay=1e3,n._repeatCount=0,n._running=!1,n._handle=0,n.delay=t,n.repeatCount=r,n.start(),n}return n(t,e),Object.defineProperty(t.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){e=Math.floor(e),this._delay=e>=0?e:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){e=Math.floor(e),this._repeatCount=e>=0?e:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.running&&(a.default.clearInterval(this._handle),this._handle=0,this._running=!1,this._currentCount=0)},t.prototype.start=function(){!this.running&&(this.currentCount<this.repeatCount||0===this.repeatCount)&&(this._handle=a.default.setInterval(this._$timerCallback.bind(this),this.delay),this._running=!0)},t.prototype.stop=function(){this.running&&(a.default.clearInterval(this._handle),this._handle=0,this._running=!1)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.reset()},t.prototype._$timerCallback=function(){this.enabled&&(this._currentCount++,this.repeatCount>0&&this.currentCount>this.repeatCount?(this.stop(),this._$raiseTimerCompleteEvent()):this._$raiseTimerEvent())},t.prototype._$raiseTimerEvent=function(){var e=new o.default(o.default.TIMER);e.timeStamp=Date.now(),this.dispatchEvent(e)},t.prototype._$raiseTimerCompleteEvent=function(){var e=new o.default(o.default.TIMER_COMPLETE);e.timeStamp=Date.now(),this.dispatchEvent(e)},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../mic/VirtualDom":107,"../events/EventDispatcher":54,"../events/TimerEvent":56}],98:[function(e,t,r){"use strict";var n=e("./Timer");r.Timer=n.default;var i=e("./ByteArray");r.ByteArray=i.default;var o=e("./Endian");r.Endian=o.default;var a=e("./CompressionAlgorithm");r.CompressionAlgorithm=a.default},{"./ByteArray":94,"./CompressionAlgorithm":95,"./Endian":96,"./Timer":97}],99:[function(e,t,r){"use strict";function n(e){e&&(e.flash=o,e.webgl=a,e.fl=u,e.mx=l)}function i(){return f.default.checkSupportStatus().ok}var o=e("./flash/index");r.flash=o;var a=e("./webgl/index");r.webgl=a;var u=e("./fl/index");r.fl=u;var l=e("./mx/index");r.mx=l;var s=e("./mic/index");r.mic=s;var c=e("./mic/EngineBase");r.EngineBase=c.default;var f=e("./mic/CommonUtil");r.injectToGlobal=n,r.isSupported=i;var d=f.default.checkSupportStatus;r.checkSupportStatus=d},{"./fl/index":1,"./flash/index":72,"./mic/CommonUtil":102,"./mic/EngineBase":103,"./mic/index":110,"./mx/index":113,"./webgl/index":142}],100:[function(e,t,r){"use strict";function n(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=l.uint8View[r];return t}function i(e,t,r){for(var n=t;n<t+r;++n)l.uint8View[n-t]=e[n]}var o,a=e("./MathUtil"),u=new ArrayBuffer(8),l={uint8View:new Uint8Array(u),int8View:new Int8Array(u),uint16View:new Uint16Array(u),int16View:new Int16Array(u),uint32View:new Uint32Array(u),int32View:new Int32Array(u),float32View:new Float32Array(u),float64View:new Float64Array(u)};!function(){var e=new ArrayBuffer(2),t=new DataView(e);t.setInt16(0,256,!0);var r=new Int16Array(e);o=256===r[0]}();var s=function(){function e(){}return Object.defineProperty(e,"isLittleEndian",{get:function(){return o},enumerable:!0,configurable:!0}),e.float32ToBytes=function(e){return l.float32View[0]=e,n(4)},e.float64ToBytes=function(e){return l.float64View[0]=e,n(8)},e.bytesToFloat32=function(e,t){return void 0===t&&(t=0),i(e,t,4),l.float32View[0]},e.bytesToFloat64=function(e,t){return void 0===t&&(t=0),i(e,t,8),l.float64View[0]},e.int16ToBytes=function(e){return l.int16View[0]=e,n(2)},e.uint16ToBytes=function(e){return l.uint16View[0]=e,n(2)},e.int32ToBytes=function(e){return l.int32View[0]=e,n(4)},e.uint32ToBytes=function(e){return l.uint32View[0]=e,n(4)},e.int64ToBytes=function(e){for(var t=[0,0,0,0,0,0,0,0],r=t.length-1;r>=0;r--){var n=255&e;t[r]=n,e=(e-n)/256}return t},e.uint64ToBytes=function(t){return e.int64ToBytes(t>=0?t:-t)},e.bytesToInt64=function(t,r){void 0===r&&(r=0);var n=e.bytesToUint64(t,r),i=e.__isComplement(t,r,8);return i&&(n=a.default.complementToNegative(n)),n},e.bytesToUint64=function(e,t){void 0===t&&(t=0);for(var r=0,n=t;n<t+8;n++)r=(r<<8)+e[n];return r},e.bytesToInt32=function(e,t){return void 0===t&&(t=0),i(e,t,4),l.int32View[0]},e.bytesToUint32=function(e,t){return void 0===t&&(t=0),i(e,t,4),l.uint32View[0]},e.bytesToInt16=function(e,t){return void 0===t&&(t=0),i(e,t,2),l.int16View[0]},e.bytesToUint16=function(e,t){return void 0===t&&(t=0),i(e,t,2),l.uint16View[0]},e.swapEndian=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length);for(var n=new Array(r),i=t+r-1,o=t+((r+1)/2|0),a=t;a<o;a++)n[a-t]=e[i-a];return n},e.float64ToInt64Bits=function(t){l.float64View[0]=t;var r=n(8);return e.bytesToInt64(r)},e.int64ToFloat64Bits=function(t){var r=e.int64ToBytes(t);return i(r,0,r.length),l.float64View[0]},e.float32ToInt32Bits=function(e){return l.float32View[0]=e,l.int32View[0]},e.int32ToFloat32Bits=function(e){return l.int32View[0]=e,l.float32View[0]},e.__isComplement=function(e,t,r){return a.default.isByteComplement(e[t+r-1])},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./MathUtil":106}],101:[function(e,t,r){"use strict";var n=function(){function e(){}return e.toString=function(e){return String(e)},e.toNumber=function(e){return Number(e)},e.toBoolean=function(e){return Boolean(e)},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],102:[function(e,t,r){"use strict";function n(e,t){return e===t}var i=e("./VirtualDom"),o=function(){function e(){}return e.checkSupportStatus=function(){var t={ok:!0,reasons:[]},r=i.default.env;r||(t.ok=!1,t.reasons.push("'window' object is not found in global scope."));var n=" is not supported by this browser";e.isClassDefinition(r.HTMLCanvasElement)||(t.ok=!1,t.reasons.push("Canvas element"+n)),e.isFunction(i.default.requestAnimationFrame)&&e.isFunction(i.default.cancelAnimationFrame)||(t.ok=!1,t.reasons.push("requestAnimationFrame and/or cancelAnimationFrame are not supported by this browser.")),e.isClassDefinition(r.WebGLRenderingContext)||(t.ok=!1,t.reasons.push("WebGL"+n));for(var o=["ArrayBuffer","DataView","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float32Array","Float64Array"],a=0;a<o.length;++a)e.isClassDefinition(r[o[a]])||(t.ok=!1,t.reasons.push("'"+o[a]+"' class"+n));if(e.isClassDefinition(r.Map)||(t.ok=!1,t.reasons.push("'Map' class"+n)),e.isClassDefinition(r.Set)||(t.ok=!1,t.reasons.push("'Set' class"+n)),"object"==typeof r.chrome){var u=/Chrome\/(\d+)(?:\.\d+)*/,l=u.exec(i.default.appVersion);(l.length<2||parseInt(l[1])<40)&&(t.ok=!1,t.reasons.push("Chrome under version 40 is not supported due to performance faults."))}return t},e.isUndefinedOrNull=function(e){return void 0===e||null===e},e.isUndefined=function(e){return void 0===e},e.isNull=function(e){return null===e},e.isFunction=function(e){return"function"==typeof e},e.isNumber=function(e){return"number"==typeof e},e.isArray=function(e){return Array.isArray(e)},e.isString=function(e){return"string"==typeof e},e.isObject=function(e){return"object"==typeof e},e.isClassDefinition=function(e){var t;if("function"==typeof e)t=!0;else{var r=i.default.appVersion,n=r.indexOf("Trident/7.0")>=0&&r.indexOf("rv:11.0")>=0;t=n&&"object"==typeof e}var o=!(!e||!e.prototype)&&e.prototype.constructor===e;return t&&o},e.formatString=function(e){function t(e){var t=e.substring(1,e.length-1),n=parseInt(t);return!i&&0<=n&&n<o?"undefined"==typeof r[n]?"undefined":null===r[n]?"null":r[n].toString():e}for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=!r,o=i?-1:r.length,a=/{[\d]+}/g;return e.replace(a,t)},e.deepClone=function(t){if("undefined"==typeof t||null===t||t===!0||t===!1)return t;if("string"==typeof t||"number"==typeof t)return t;if(e.isArray(t)){for(var r=[],n=0;n<t.length;++n)r.push(e.deepClone(t[n]));return r}var o=i.default.env;if("undefined"!=typeof o.Map&&t instanceof Map){var a=new Map;return t.forEach(function(t,r){a.set(e.deepClone(r),e.deepClone(t))}),a}if("undefined"!=typeof o.Set&&t instanceof Set){var u=new Set;return t.forEach(function(t){u.add(e.deepClone(t))}),u}if(e.isFunction(t)){var l=t,s=function(){return function(){return l.apply(this,arguments)}}();s.prototype=l.prototype;for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c]);return s}if(e.isObject(t)){var f=Object.create(null);if("function"==typeof t.hasOwnProperty)for(var c in t)t.hasOwnProperty(c)&&(f[c]=e.deepClone(t[c]));else for(var c in t)f[c]=e.deepClone(t[c]);return f}},e.simpleClone=function(t){if(!e.isUndefined(t)){if(e.isNull(t))return null;if(e.isArray(t))return new Array(t);if(e.isObject(t)){for(var r=Object.create(null),n=Object.keys(t),i=0;i<n.length;++i)r[n[i]]=t[n[i]];return r}}},e.shallowClone=function(e){return e},e.trace=function(t,r){e.isUndefined(r)?console.info(t):console.info(t,r),console.trace()},e.padLeft=function(e,t,r){for(;e.length<t;)e=r+e;return e.length>t&&(e=e.substring(e.length-t,e.length-1)),e},e.remove=function(e,t,r){if(void 0===r&&(r=null),"function"!=typeof r){var n=e.indexOf(t);return n>=0&&(e.splice(n,1),!0)}for(var i=0;i<e.length;++i)if(r(t,e[i]))return e.splice(i,1),!0;return!1},e.removeAll=function(e,t,r){void 0===r&&(r=null);for(var i="function"==typeof r?r:n,o=0,a=e.length,u=0;u<a;++u)i(t,e[u])&&(e.splice(u,1),--u,--a,++o);return o},e.removeAt=function(e,t){return t|=0,0<=t&&t<e.length&&(e.splice(t,1),!0)},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./VirtualDom":107}],103:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../webgl/WebGLRenderer"),o=e("../flash/display/Stage"),a=e("../flash/events/FlashEvent"),u=e("./EventBase"),l=e("./VirtualDom"),s=e("../flash/events/EventDispatcher"),c=e("./CommonUtil"),f=function(e){function t(){var t=e.call(this)||this;return t._isRunning=!1,t._renderer=null,t._stage=null,t._isInitialized=!1,t._attachedUpdateFunctions=null,t._loopFunction=null,t._elapsedMillis=0,t._fps=0,t._fpsCounter=0,t._lastTimeFpsUpdated=0,t._lastTimeUpdated=-1,t._attachedUpdateFunctions=[],t}return n(t,e),t.prototype.initialize=function(e,t,r,n){void 0===e&&(e=null),void 0===n&&(n=i.default.DEFAULT_OPTIONS),this.isInitialized||(this._renderer=new i.default(n,e,t,r),this._stage=new o.default(this._renderer),this._loopFunction=this.__mainLoop.bind(this),this._isInitialized=!0)},t.prototype.dispose=function(){if(this.isInitialized){this.stage.dispose(),this.renderer.dispose(),this._stage=null,this._renderer=null;for(var t=this._attachedUpdateFunctions;t.length>0;)t.pop();this._isInitialized=!1,e.prototype.dispose.call(this)}},t.prototype.startAnimation=function(){this.isInitialized&&(this.isAnimationRunning||(this._lastTimeUpdated=Date.now()),this._isRunning=!0,l.default.requestAnimationFrame(this._loopFunction))},t.prototype.stopAnimation=function(){this.isInitialized&&(this.__updateTimeCounters(),this._fps=0,this._isRunning=!1)},t.prototype.clear=function(){this.renderer.clear()},t.prototype.runOneFrame=function(e){if(this._isInitialized){var t=this._attachedUpdateFunctions;if(t.length>0)for(var r=0;r<t.length;++r){var n=t[r];c.default.isFunction(n)&&n(e)}var i=this.stage;i.dispatchEvent(u.default.create(a.default.ENTER_FRAME)),i.$update(e),this.clear(),i.$render(this.renderer)}},Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this.isInitialized?this._renderer.view:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimationRunning",{get:function(){return this.isInitialized&&this._isRunning},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),t.prototype.attachUpdateFunction=function(e){var t=this._attachedUpdateFunctions;c.default.isFunction(e)&&t.indexOf(e)<0&&t.push(e)},Object.defineProperty(t.prototype,"elapsedMillis",{get:function(){return this._elapsedMillis},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps},enumerable:!0,configurable:!0}),t.prototype.__updateTimeCounters=function(){if(this._lastTimeUpdated>0){var e=Date.now();this._elapsedMillis+=e-this._lastTimeUpdated,this._lastTimeUpdated=e}++this._fpsCounter,this.elapsedMillis-this._lastTimeFpsUpdated>1e3&&(this._fps=this._fpsCounter/(this.elapsedMillis-this._lastTimeFpsUpdated)*1e3,this._fpsCounter=0,this._lastTimeFpsUpdated=this.elapsedMillis)},t.prototype.__mainLoop=function(e){if(this.isAnimationRunning){this.__updateTimeCounters();var t={millisFromStartup:this.elapsedMillis};this.runOneFrame(t),l.default.requestAnimationFrame(this._loopFunction)}},t}(s.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=f},{"../flash/display/Stage":40,"../flash/events/EventDispatcher":54,"../flash/events/FlashEvent":55,"../webgl/WebGLRenderer":125,"./CommonUtil":102,"./EventBase":105,"./VirtualDom":107}],104:[function(e,t,r){"use strict";var n=function(){function e(e){void 0===e&&(e=""),this._message=null,this._message=e}return Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"ErrorBase"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],105:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(){function e(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=null,this.deepPath=null,this.defaultPrevented=!1,this.eventPhase=-1,this.isTrusted=!0,this.returnValue=!1,this.scoped=!0,this.srcElement=null,this.target=null,this.timeStamp=0,this.type=null,this.AT_TARGET=2,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=1,this.type=e,this.bubbles=t,this.cancelable=r}return e.prototype.initEvent=function(e,t,r){},e.prototype.preventDefault=function(){},e.prototype.stopImmediatePropagation=function(){},e.prototype.stopPropagation=function(){},e.create=function(e){var t=new o(e,(!1),(!1));return t.timeStamp=Date.now(),t},e}(),o=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(i);Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{}],106:[function(e,t,r){"use strict";var n=function(){function e(){}return e.clamp=function(e,t,r){return e<t&&(e=t),e>r&&(e=r),e},e.isValueBetweenNotEquals=function(e,t,r){return t<e&&e<r},e.isValueBetweenEquals=function(e,t,r){return t<=e&&e<=r},e.isPowerOfTwo=function(t){var r=0|t;return!(r!=t||e.isNaN(r)||!isFinite(r))&&(r>0&&0===(r&r-1))},e.power2Roundup=function(e){return e<0?0:(--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1)},e.complementToNegative=function(e){return-(~e+1)},e.isByteComplement=function(e){return 0!==(255&e&128)},e.isInt32Complement=function(e){return 0!==(4294967295&e&2147483648)},e.clampUpper=function(e,t){return e>t?t:e},e.clampLower=function(e,t){return e<t?t:e},e.isNaN=function(e){return e!==e},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],107:[function(e,t,r){(function(e){"use strict";function t(){return o.$env===window}function n(){return o.$env===e}function i(){var r=t(),i=n();if(!r)return void console.warn("Some critical functions need a window to execute.");if(o.$setTimeout=i?e.setTimeout.bind(e):r?window.setTimeout.bind(window):null,o.$clearTimeout=i?e.clearTimeout.bind(e):r?window.clearTimeout.bind(window):null,r){var a="RequestAnimationFrame",u="CancelAnimationFrame",l="webkit",s="o",c="moz",f="ms",d=window;o.$raf=d.requestAnimationFrame,o.$raf||(o.$raf=d[l+a]||d[f+a]||d[c+a]||d[s+a]),o.$raf&&(o.$raf=o.$raf.bind(o.$env)),o.$caf=d.cancelAnimationFrame,o.$caf||(o.$raf=d[l+u]||d[f+u]||d[c+u]||d[s+u]),o.$caf&&(o.$caf=o.$caf.bind(o.$env)),o.$assignLocation=window.location.assign.bind(window.location),o.$openWindow=window.open.bind(window)}else o.$raf=o.$caf=null,o.$assignLocation=null,o.$openWindow=null}var o=Object.create(null);o.$env=window||self||e||{},i();var a=function(){function e(){}return Object.defineProperty(e,"env",{get:function(){return o.$env},enumerable:!0,configurable:!0}),e.createElement=function(e){return window.document.createElement(e)},e.setStyle=function(e,t,r){e.style[t]=r},e.setInterval=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return o.$env.setInterval.apply(o.$env,arguments)},e.clearInterval=function(e){return o.$env.clearInterval.apply(o.$env,arguments)},Object.defineProperty(e,"appVersion",{get:function(){return o.$env===window?window.navigator.appVersion:"MIC VDOM 0.1"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"requestAnimationFrame",{get:function(){return o.$raf},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cancelAnimationFrame",{get:function(){return o.$caf},enumerable:!0,configurable:!0}),Object.defineProperty(e,"screenWidth",{get:function(){return window.screen.width},enumerable:!0,configurable:!0}),Object.defineProperty(e,"screenHeight",{get:function(){return window.screen.height},enumerable:!0,configurable:!0}),Object.defineProperty(e,"setTimeout",{get:function(){return o.$setTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clearTimeout",{get:function(){return o.$clearTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(e,"openWindow",{get:function(){return o.$openWindow},enumerable:!0,configurable:!0}),Object.defineProperty(e,"assignLocation",{get:function(){return o.$assignLocation},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WebGLRenderingContext",{get:function(){return t()?WebGLRenderingContext:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isNodeJS",{get:function(){return n()},enumerable:!0,configurable:!0}),e.appendChildToBody=function(e){o.$env===window&&window.document.body.appendChild(e)},e.removeChildFromBody=function(e){o.$env===window&&window.document.body.removeChild(e)},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],108:[function(e,t,r){"use strict";var n=e("../CommonUtil"),i=function(){function e(){}return e.colorToCssSharp=function(e){return e|=0,"#"+n.default.padLeft(e.toString(16),6,"0")},e.colorToCssRgba=function(e){e|=0;var t=e>>24&255,r=e>>16&255,n=e>>8&255,i=255&e;return"rgba("+r+", "+n+", "+i+", "+t+")"},e.rgb=function(t,r,n){return e.rgba(t,r,n,255)},e.rgba=function(e,t,r,n){return(255&n)<<24|(255&e)<<16|(255&t)<<8|255&r},e.decomposeRgb=function(e){var t=e>>16&255,r=e>>8&255,n=255&e;return{r:t,g:r,b:n,a:255}},e.decomposeRgba=function(e){var t=e>>24&255,r=e>>16&255,n=e>>8&255,i=255&e;return{r:r,g:n,b:i,a:t}},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../CommonUtil":102}],109:[function(e,t,r){"use strict";var n=e("./GLUtil");r.GLUtil=n.default},{"./GLUtil":108}],110:[function(e,t,r){"use strict";var n=e("./BitConverter");r.BitConverter=n.default;var i=e("./Coerce");r.Coerce=i.default;var o=e("./CommonUtil");r.CommonUtil=o.default;var a=e("./EngineBase");r.EngineBase=a.default;var u=e("./ErrorBase");r.ErrorBase=u.default;var l=e("./EventBase");r.EventBase=l.default;var s=e("./MathUtil");r.MathUtil=s.default;var c=e("./VirtualDom");r.VirtualDom=c.default;var f=e("./glantern/index");r.glantern=f},{"./BitConverter":100,"./Coerce":101,"./CommonUtil":102,"./EngineBase":103,"./ErrorBase":104,"./EventBase":105,"./MathUtil":106,"./VirtualDom":107,"./glantern/index":109}],111:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/display/DisplayObjectContainer"),o=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t.prototype._$update=function(e){},t.prototype._$render=function(e){},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../flash/display/DisplayObjectContainer":27}],112:[function(e,t,r){"use strict";var n=e("./Canvas");r.Canvas=n.default},{"./Canvas":111}],113:[function(e,t,r){"use strict";var n=e("./containers/index");r.containers=n},{"./containers/index":112}],114:[function(e,t,r){"use strict";var n=e("../flash/errors/NotImplementedError"),i=function(){function e(e){this._renderer=null,this._context=null,this._renderer=e,this._context=e.context}return e.prototype.dispose=function(){this._context=null,this._renderer=null},Object.defineProperty(e.prototype,"originalWidth",{get:function(){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalHeight",{get:function(){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitWidth",{get:function(){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitHeight",{get:function(){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),e}();i.textureCoords=null,i.textureIndices=null,Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../flash/errors/NotImplementedError":51}],115:[function(e,t,r){"use strict";var n=function(){function e(e){this._filterManager=null,this._flipY=!1,this._flipX=!1,this._referenceCount=0,this._filterManager=e}return e.prototype.notifyAdded=function(){this._referenceCount<=0&&this._$initialize(),this._referenceCount++},e.prototype.notifyRemoved=function(){this._referenceCount--,this._referenceCount<=0&&this._$dispose()},e.prototype.dispose=function(){this._$dispose()},e.prototype.initialize=function(){this._$initialize()},Object.defineProperty(e.prototype,"filterManager",{get:function(){return this._filterManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipX",{get:function(){return this._flipX},set:function(e){this._flipX=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this._flipY},set:function(e){this._flipY=e},enumerable:!0,configurable:!0}),e.prototype._$initialize=function(){},e.prototype._$dispose=function(){},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],116:[function(e,t,r){"use strict";var n=e("./RenderHelper"),i=e("../mic/CommonUtil"),o=function(){function e(e){this._tempTargetPool=null,this._internalTempTarget=null,this._renderer=null,this._filterGroups=null,this._renderer=e,this._filterGroups=[],this._internalTempTarget=e.createRenderTarget(),this._tempTargetPool=[]}return e.prototype.dispose=function(){for(var e=this._tempTargetPool,t=0;t<e.length;++t)this.renderer.releaseRenderTarget(e[t].target);this.renderer.releaseRenderTarget(this._internalTempTarget),this.clearFilterGroups(),this._tempTargetPool=null,this._internalTempTarget=null,this._filterGroups=null,this._renderer=null},e.prototype.clearFilterGroups=function(){var e=this._filterGroups;if(e.length>0)for(var t=0;t<e.length;++t)for(var r=e[t];r.length>0;)r.pop();for(;e.length>0;)e.pop();
},e.prototype.pushFilterGroup=function(e){this._filterGroups.push(e.slice())},e.prototype.popFilterGroup=function(){return this.hasFilterGroups?this._filterGroups.pop():null},Object.defineProperty(e.prototype,"hasFilterGroups",{get:function(){return this._filterGroups.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),e.prototype.requestTempTarget=function(){for(var e=this._tempTargetPool,t=0;t<e.length;++t)if(!e[t].isUsing)return e[t].isUsing=!0,e[t].target;var r=this.renderer.createRenderTarget();return this._tempTargetPool.push({target:r,isUsing:!0}),r},e.prototype.returnTempTarget=function(e){for(var t=this._tempTargetPool,r=0;r<t.length;++r)if(t[r].target===e){t[r].isUsing=!1;break}},e.prototype.compactPool=function(){for(var e=this._tempTargetPool,t=0;t<e.length;++t)e[t].isUsing||(this.renderer.releaseRenderTarget(e[t].target),i.default.removeAt(e,t),--t)},e.prototype.processFilters=function(e,t,r,i){if(t===r)return void console.warn("Filter alert: input and output are the same, processing aborted.");if(this.hasFilterGroups){var o=this._filterGroups[this._filterGroups.length-1],a=t,u=this._internalTempTarget;u.clear();for(var l=void 0,s=0;s<o.length;s++){var c=o[s];null!==c&&(c.process(e,a,u,!0),l=a,a=u,u=l)}n.default.copyTargetContent(e,a,r,!1,!0,i)}},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../mic/CommonUtil":102,"./RenderHelper":119}],117:[function(e,t,r){"use strict";var n=Object.create(null);Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,n.buffered="\nprecision mediump float;\n\nuniform sampler2D uSampler;\nuniform bool uHollow;\n\nvarying vec2 vTextureCoord;\n\nvoid main() {\n    vec4 finalColor = texture2D(uSampler, vTextureCoord);\n    if (uHollow && finalColor.a == 0.0) {\n        discard;\n    } else {\n        gl_FragColor = finalColor;\n    }\n}",n.blur="\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\n\nuniform sampler2D uSampler;\nuniform bool uHollow;\n\nvoid main()\n{\n    vec4 finalColor = vec4(0.0);\n    finalColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.004431848411938341;\n    finalColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    finalColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.2419707245191454;\n    finalColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    finalColor += texture2D(uSampler, vBlurTexCoords[ 3]) * 0.2419707245191454;\n    finalColor += texture2D(uSampler, vBlurTexCoords[ 4]) * 0.05399096651318985;\n    finalColor += texture2D(uSampler, vBlurTexCoords[ 5]) * 0.004431848411938341;\n    if (uHollow && finalColor.a == 0.0) {\n        discard;\n    } else {\n        gl_FragColor = finalColor;\n    }\n}",n.primitive="\nprecision mediump float;\n\nuniform float uAlpha;\nuniform bool uHollow;\n\nvarying vec4 vVertexColor;\n\nvoid main() {\n    vec4 finalColor = vVertexColor * uAlpha;\n    if (uHollow && finalColor.a == 0.0) {\n        discard;\n    } else {\n        gl_FragColor = finalColor;\n    }\n}",n.colorTransform="\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float uColorMatrix[25];\nuniform bool uHollow;\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n    vec4 finalColor = vec4(0.0);\n\n    finalColor.r = (uColorMatrix[0] * c.r);\n    finalColor.r += (uColorMatrix[1] * c.g);\n    finalColor.r += (uColorMatrix[2] * c.b);\n    finalColor.r += (uColorMatrix[3] * c.a);\n    finalColor.r += uColorMatrix[4];\n\n    finalColor.g = (uColorMatrix[5] * c.r);\n    finalColor.g += (uColorMatrix[6] * c.g);\n    finalColor.g += (uColorMatrix[7] * c.b);\n    finalColor.g += (uColorMatrix[8] * c.a);\n    finalColor.g += uColorMatrix[9];\n\n    finalColor.b = (uColorMatrix[10] * c.r);\n    finalColor.b += (uColorMatrix[11] * c.g);\n    finalColor.b += (uColorMatrix[12] * c.b);\n    finalColor.b += (uColorMatrix[13] * c.a);\n    finalColor.b += uColorMatrix[14];\n\n    finalColor.a = (uColorMatrix[15] * c.r);\n    finalColor.a += (uColorMatrix[16] * c.g);\n    finalColor.a += (uColorMatrix[17] * c.b);\n    finalColor.a += (uColorMatrix[18] * c.a);\n    finalColor.a += uColorMatrix[19];\n\n    if (uHollow && finalColor.a == 0.0) {\n        discard;\n    } else {\n        gl_FragColor = finalColor;\n    }\n}",n.fxaa="\nprecision lowp float;\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0 / 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\nvec2 v_rgbNW, vec2 v_rgbNE,\nvec2 v_rgbSW, vec2 v_rgbSE,\nvec2 v_rgbM) {\nvec4 color;\nmediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\nvec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\nvec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\nvec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\nvec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\nvec4 texColor = texture2D(tex, v_rgbM);\nvec3 rgbM  = texColor.xyz;\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat lumaNW = dot(rgbNW, luma);\nfloat lumaNE = dot(rgbNE, luma);\nfloat lumaSW = dot(rgbSW, luma);\nfloat lumaSE = dot(rgbSE, luma);\nfloat lumaM  = dot(rgbM,  luma);\nfloat lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\nfloat lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\nmediump vec2 dir;\ndir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\ndir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\nfloat dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n    (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\nfloat rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\ndir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n        max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n            dir * rcpDirMin)) * inverseVP;\n\nvec3 rgbA = 0.5 * (\n    texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n    texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\nvec3 rgbB = rgbA * 0.5 + 0.25 * (\n    texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n    texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\nfloat lumaB = dot(rgbB, luma);\nif ((lumaB < lumaMin) || (lumaB > lumaMax))\n    color = vec4(rgbA, texColor.a);\nelse\n    color = vec4(rgbB, texColor.a);\nreturn color;\n}\n\nvarying vec2 vTextureCoord;\nvarying vec2 vResolution;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\nuniform bool uHollow;\n\nvoid main() {\n    vec4 finalColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n    if (uHollow && finalColor.a == 0.0) {\n        discard;\n    } else {\n        gl_FragColor = finalColor;\n    }\n}",n.blur2="\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform float uResolution;\nuniform float uStrength;\nuniform vec2 uBlurDirection;\nuniform bool uHollow;\n\nfloat offset[3];\nfloat weight[3];\n\nvoid main()\n{\n    offset[0] = 0.0; offset[1] = 1.3846153846; offset[2] = 3.2307692308;\n    weight[0] = 0.2270270270; weight[1] = 0.3162162162; weight[2] = 0.0702702703;\n    vec4 finalColor = texture2D(uSampler, vec2(vTextureCoord)) * weight[0];\n    float xDir = uBlurDirection.x / sqrt(uBlurDirection.x * uBlurDirection.x + uBlurDirection.y * uBlurDirection.y);\n    float yDir = uBlurDirection.y / sqrt(uBlurDirection.x * uBlurDirection.x + uBlurDirection.y * uBlurDirection.y);\n    for (int i = 1; i < 3; i++) {\n        finalColor += texture2D(uSampler, (vec2(vTextureCoord) + vec2(offset[i] * xDir, offset[i] * yDir) * uStrength / uResolution)) * weight[i];\n        finalColor += texture2D(uSampler, (vec2(vTextureCoord) - vec2(offset[i] * xDir, offset[i] * yDir) * uStrength / uResolution)) * weight[i];\n    }\n    if (uHollow && finalColor.a == 0.0) {\n        discard;\n    } else {\n        gl_FragColor = finalColor;\n    }\n}",n.copyImage="\nprecision mediump float;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\nuniform bool uHollow;\n\nvarying vec2 vTextureCoord;\n\nvoid main() {\n    vec4 finalColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n    if (uHollow && finalColor.a == 0.0) {\n        discard;\n    } else {\n        gl_FragColor = finalColor;\n    }\n}"},{}],118:[function(e,t,r){"use strict";var n=e("../mic/VirtualDom"),i=n.default.WebGLRenderingContext,o=function(){function e(){this._glc=null,this._isDirty=!0,this._bufferType=0,this._elementGLType=0,this._webglBuffer=null,this._array=null,this._arrayType=null,this._typedArray=null}return e.create=function(t,r,n,i){var o=e.getTypedArrayType(n);if(null===o)return console.warn("Failed to create typed array whose elements are of WebGL type 0x"+n.toString(16)),null;var a=new e;return a._glc=t,a._elementGLType=n,a._webglBuffer=t.createBuffer(),null==a._webglBuffer?(console.warn("Failed to create WebGL buffer."),null):(a._arrayType=o,a._bufferType=i,a.setNewData(r),a.becomeDirty(),a.syncBufferData(),a)},Object.defineProperty(e.prototype,"webglBuffer",{get:function(){return this._webglBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementSize",{get:function(){return this._typedArray.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementCount",{get:function(){return this._typedArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementGLType",{get:function(){return this._elementGLType},enumerable:!0,configurable:!0}),e.prototype.setNewData=function(e){this._array=e?e.slice():[]},e.prototype.becomeDirty=function(){this._isDirty=!0},e.prototype.syncBufferData=function(){if(this._isDirty){var e=this._arrayType;this._typedArray=new e(this._array),this._isDirty=!1}var t=this._glc;t.bindBuffer(this._bufferType,this._webglBuffer),t.bufferData(this._bufferType,this._typedArray,i.DYNAMIC_DRAW)},e.prototype.dispose=function(){this._glc.deleteBuffer(this._webglBuffer),this._array=null,this._typedArray=null,this._webglBuffer=null,this._glc=null},e.getTypedArrayType=function(e){switch(e){case i.FLOAT:return Float32Array;case i.UNSIGNED_SHORT:return Uint16Array;case i.UNSIGNED_INT:return Uint32Array;case i.UNSIGNED_BYTE:return Uint8Array;case i.INT:return Int32Array;case i.SHORT:return Int16Array;case i.BYTE:return Int8Array;default:return null}},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../mic/VirtualDom":107}],119:[function(e,t,r){"use strict";function n(e,t){return e?null===e.texture?(console.warn("Cannot use a BitmapTargetBase without texture-based frame buffer to render onto another BitmapTargetBase."),!1):e.isRoot?(console.warn("Cannot use a root BitmapTargetBase as source."),!1):e!==t||(console.warn("Source and destination must not be the same BitmapTargetBase."),!1):(console.warn("Cannot render a null BitmapTargetBase onto another BitmapTargetBase."),!1)}var i=e("./PackedArrayBuffer"),o=e("./ShaderID"),a=e("../mic/VirtualDom"),u=e("./targets/BufferedBitmapTarget"),l=e("./graphics/GraphicsConst"),s=a.default.WebGLRenderingContext,c=function(){function e(){}return e.renderPrimitives=function(e,t,r,n,i,a){e.shaderManager.selectShader(o.default.PRIMITIVE);var u,c=e.shaderManager.currentShader,f=e.context;t.activate(),c.syncUniforms(),r.syncBufferData(),u=c.getAttributeLocation("aVertexPosition"),f.vertexAttribPointer(u,l.default.VertexComponentCount,r.elementGLType,!1,r.elementSize*l.default.VertexComponentCount,0),f.enableVertexAttribArray(u),n.syncBufferData(),u=c.getAttributeLocation("aVertexColor"),f.vertexAttribPointer(u,4,n.elementGLType,!1,4*n.elementSize,0),f.enableVertexAttribArray(u),i.syncBufferData(),a&&t.clear(),f.viewport(0,0,t.originalWidth,t.originalHeight),f.drawElements(s.TRIANGLES,i.elementCount,i.elementGLType,0)},e.renderPrimitives2=function(e,t,r,n,i,a,u,c){e.shaderManager.selectShader(o.default.PRIMITIVE2);var f,d=e.shaderManager.currentShader,h=e.context;t.activate(),d.setOriginalSize([t.originalWidth,t.originalHeight]),d.setFlipX(a),d.setFlipY(u),d.syncUniforms(),r.syncBufferData(),f=d.getAttributeLocation("aVertexPosition"),h.vertexAttribPointer(f,l.default.VertexComponentCount,r.elementGLType,!1,r.elementSize*l.default.VertexComponentCount,0),h.enableVertexAttribArray(f),n.syncBufferData(),f=d.getAttributeLocation("aVertexColor"),h.vertexAttribPointer(f,4,n.elementGLType,!1,4*n.elementSize,0),h.enableVertexAttribArray(f),i.syncBufferData(),c&&t.clear(),h.viewport(0,0,t.originalWidth,t.originalHeight),h.drawElements(s.TRIANGLES,i.elementCount,i.elementGLType,0)},e.copyTargetContent=function(t,r,n,i,a,u){e.renderBuffered(t,r,n,o.default.REPLICATE,u,function(e){var t=e.shaderManager.currentShader;t.setFlipX(i),t.setFlipY(a),(i||a)&&(t.setOriginalSize([n.originalWidth,n.originalHeight]),t.setFitSize([n.fitWidth,n.fitHeight]))})},e.copyImageContent=function(t,r,n,i,a,u,l,s){e.renderBuffered(t,r,n,o.default.COPY_IMAGE,s,function(e){var t=e.shaderManager.currentShader;t.setFlipX(i),t.setFlipY(a),t.setAlpha(l),t.setTransform(u),(i||a)&&(t.setOriginalSize([n.originalWidth,n.originalHeight]),t.setFitSize([n.fitWidth,n.fitHeight]))})},e.renderImage=function(t,r,n,i){e.renderBuffered(t,r,n,o.default.COPY_IMAGE,i,function(e){var t=e.shaderManager.currentShader;t.setFlipX(!1),t.setFlipY(!1)})},e.renderBuffered=function(t,r,o,a,l,c){if(n(r,o)){var f=t.context;t.shaderManager.selectShader(a),c(t);var d=t.shaderManager.currentShader;if(d.setTexture(r.texture),d.syncUniforms(),null===e._glVertexPositionBuffer){var h=[0,r.fitHeight,0,r.fitWidth,r.fitHeight,0,0,0,0,r.fitWidth,0,0];e._glVertexPositionBuffer=i.default.create(f,h,s.FLOAT,s.ARRAY_BUFFER)}var p;if(p=d.getAttributeLocation("aVertexPosition"),p>=0){var _=e._glVertexPositionBuffer;_.syncBufferData(),f.vertexAttribPointer(p,3,_.elementGLType,!1,3*_.elementSize,0),f.enableVertexAttribArray(p)}if(p=d.getAttributeLocation("aTextureCoord"),p>=0){var g=u.default.textureCoords;g.syncBufferData(),f.vertexAttribPointer(p,2,g.elementGLType,!1,2*g.elementSize,0),f.enableVertexAttribArray(p)}var b=u.default.textureIndices;b.syncBufferData(),o.activate(),l&&o.clear(),f.viewport(0,0,o.originalWidth,o.originalHeight),f.enable(s.SCISSOR_TEST),f.scissor(0,0,r.originalWidth,r.originalHeight),f.drawElements(s.TRIANGLES,b.elementCount,b.elementGLType,0),f.disable(s.SCISSOR_TEST)}},e}();c._glVertexPositionBuffer=null,Object.defineProperty(r,"__esModule",{value:!0}),r.default=c},{"../mic/VirtualDom":107,"./PackedArrayBuffer":118,"./ShaderID":121,"./graphics/GraphicsConst":136,"./targets/BufferedBitmapTarget":154}],120:[function(e,t,r){"use strict";function n(e,t,r){var n=e.createShader(r);if(null===n)return console.warn("Cannot create shader."),null;e.shaderSource(n,t),e.compileShader(n);var i=e.getShaderParameter(n,l.COMPILE_STATUS);if(!i){var o=e.getShaderInfoLog(n);return console.warn("Failed to load shader: "+o,"Source:\n"+t),e.deleteShader(n),null}return n}var i=e("./VertexShaders"),o=e("./FragmentShaders"),a=e("./WebGLDataType"),u=e("../mic/VirtualDom"),l=u.default.WebGLRenderingContext,s=function(){function e(e,t,r,n,i){this._shaderManager=null,this._vertexSource=null,this._fragmentSource=null,this._vertexShader=null,this._fragmentShader=null,this._program=null,this._uniforms=null,this._attributes=null,this._id=-1,this._glc=null,this._shaderManager=e,this._vertexSource=t,this._fragmentSource=r,this._id=e.getNextAvailableID(),this.__initialize(e.context,t,r),this.select(),n&&i?(this._uniforms=n,this._attributes=i):(this._uniforms=new Map,this._attributes=new Map,this._$localInit(e,this._uniforms,this._attributes)),this.__cacheUniformLocations(),this.__cacheAttributeLocations(),this.syncUniforms()}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this._glc;e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._glc=null,this._uniforms=null,this._attributes=null,this._vertexShader=null,this._fragmentShader=null,this._vertexSource=null,this._fragmentSource=null,this._shaderManager=null},e.prototype.syncUniforms=function(){var e=this;this._uniforms.forEach(function(t){e.__syncUniform(t)})},e.prototype.changeValue=function(e,t){var r=this._uniforms.get(e);void 0!==r&&null!==r&&t(r)},e.prototype.select=function(){this._glc.useProgram(this._program)},e.prototype.getUniformLocation=function(e){return null!==this._program?this._glc.getUniformLocation(this._program,e):null},e.prototype.getAttributeLocation=function(e){return null!==this._program?this._glc.getAttribLocation(this._program,e):-1},Object.defineProperty(e.prototype,"vertexSource",{get:function(){return this._vertexSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fragmentSource",{get:function(){return this._fragmentSource},enumerable:!0,configurable:!0}),e.prototype._$localInit=function(e,t,r){},e.prototype.__initialize=function(e,t,r){function i(t,r){null!==this._vertexShader&&e.deleteShader(this._vertexShader),null!==this._fragmentShader&&e.deleteShader(this._fragmentShader),null!==this._program&&e.deleteProgram(this._program),this._vertexShader=this._fragmentShader=this._program=null,void 0!==t&&null!==t&&(void 0!==r?console.warn(t,r):console.warn(t))}if(this._glc=e,this._vertexShader=n(e,t,l.VERTEX_SHADER),this._fragmentShader=n(e,r,l.FRAGMENT_SHADER),null===this._vertexShader||null===this._fragmentShader)return i("Vertex shader or fragment shader is null.");if(this._program=e.createProgram(),null===this._program)return i("Failed to create program.");e.attachShader(this._program,this._vertexShader),e.attachShader(this._program,this._fragmentShader),e.linkProgram(this._program);var o=e.getProgramParameter(this._program,l.LINK_STATUS);if(!o){var a=e.getProgramInfoLog(this._program);return i("Failed to link program: ",a)}},e.prototype.__syncUniform=function(e){var t=e.location,r=e.value,n=this._glc;switch(e.type){case a.default.UBool:n.uniform1i(t,r?1:0);break;case a.default.U1I:n.uniform1i(t,r);break;case a.default.U1F:n.uniform1f(t,r);break;case a.default.U2F:n.uniform2f(t,r[0],r[1]);break;case a.default.U3F:n.uniform3f(t,r[0],r[1],r[2]);break;case a.default.U4F:n.uniform4f(t,r[0],r[1],r[2],r[3]);break;case a.default.UV2:n.uniform2f(t,r.x,r.y);break;case a.default.UV3:n.uniform3f(t,r.x,r.y,r.z);break;case a.default.UV4:n.uniform4f(t,r.x,r.y,r.z,r.w);break;case a.default.U1IV:n.uniform1iv(t,r);break;case a.default.U2IV:n.uniform2iv(t,r);break;case a.default.U3IV:n.uniform3iv(t,r);break;case a.default.U4IV:n.uniform4iv(t,r);break;case a.default.U1FV:n.uniform1fv(t,r);break;case a.default.U2FV:n.uniform2fv(t,r);break;case a.default.U3FV:n.uniform3fv(t,r);break;case a.default.U4FV:n.uniform4fv(t,r);break;case a.default.UMat2:n.uniformMatrix2fv(t,e.transpose,r);break;case a.default.UMat3:n.uniformMatrix3fv(t,e.transpose,r);break;case a.default.UMat4:n.uniformMatrix4fv(t,e.transpose,r);break;case a.default.UIV:n.uniform3iv(t,r);break;case a.default.UFV:n.uniform3fv(t,r);break;case a.default.UV2V:e.array||(e.array=new Float32Array(2*r.length));for(var i=0,o=r.length;i<o;i++)e.array[2*i]=r[i].x,e.array[2*i+1]=r[i].y;n.uniform2fv(t,e.array);break;case a.default.UV3V:e.array||(e.array=new Float32Array(3*r.length));for(var i=0,o=r.length;i<o;i++)e.array[3*i]=r[i].x,e.array[3*i+1]=r[i].y,e.array[3*i+2]=r[i].z;n.uniform2fv(t,e.array);break;case a.default.UV4V:e.array||(e.array=new Float32Array(4*r.length));for(var i=0,o=r.length;i<o;i++)e.array[4*i]=r[i].x,e.array[4*i+1]=r[i].y,e.array[4*i+2]=r[i].z,e.array[4*i+3]=r[i].w;n.uniform2fv(t,e.array);break;case a.default.USampler2D:n.activeTexture(l["TEXTURE"+r.toString()]),n.bindTexture(l.TEXTURE_2D,e.texture),n.uniform1i(t,r);break;default:console.warn("Uniform ["+e.name+"]: unknown format "+e.type)}},e.prototype.__cacheUniformLocations=function(){var e=this._glc,t=this._program;this._uniforms.forEach(function(r,n){r.location=e.getUniformLocation(t,n)})},e.prototype.__cacheAttributeLocations=function(){var e=this._glc,t=this._program;this._attributes.forEach(function(r,n){r.location=e.getAttribLocation(t,n)})},e}();s.SHADER_CLASS_NAME="ShaderBase",s.FRAGMENT_SOURCE=o.default.buffered,s.VERTEX_SOURCE=i.default.buffered,Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"../mic/VirtualDom":107,"./FragmentShaders":117,"./VertexShaders":123,"./WebGLDataType":124}],121:[function(e,t,r){"use strict";var n;!function(e){e[e.PRIMITIVE=0]="PRIMITIVE",e[e.BLUR_X=1]="BLUR_X",e[e.BLUR_Y=2]="BLUR_Y",e[e.REPLICATE=3]="REPLICATE",e[e.COLOR_TRANSFORM=4]="COLOR_TRANSFORM",e[e.FXAA=5]="FXAA",e[e.BLUR2=6]="BLUR2",e[e.COPY_IMAGE=7]="COPY_IMAGE",e[e.PRIMITIVE2=8]="PRIMITIVE2"}(n||(n={})),Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],122:[function(e,t,r){"use strict";var n=e("./shaders/PrimitiveShader"),i=e("./shaders/BlurXShader"),o=e("./shaders/BlurYShader"),a=e("./shaders/ReplicateShader"),u=e("./shaders/ColorTransformShader"),l=e("./shaders/FxaaShader"),s=e("./shaders/Blur2Shader"),c=e("./shaders/CopyImageShader"),f=e("./shaders/Primitive2Shader"),d=function(){function e(e){this._renderer=null,this._shaders=null,this._currentShader=null,this._renderer=e,this._shaders=[],this.__insertShaders()}return e.prototype.dispose=function(){for(var e=this._shaders,t=0;t<e.length;++t)e[t].dispose();this._currentShader=null,this._renderer=null,this._shaders=null},e.prototype.getNextAvailableID=function(){return this._shaders.length},e.prototype.selectShader=function(e){var t=this.__getShader(e);null!==t&&(t.select(),this._currentShader=t)},Object.defineProperty(e.prototype,"currentShader",{get:function(){return this._currentShader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._renderer.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),e.prototype.__getShader=function(e){var t=null;try{t=this._shaders[e]}catch(e){}return t},e.prototype.__insertShaders=function(){var e=this._shaders;e.push(new n.default(this)),e.push(new i.default(this)),e.push(new o.default(this)),e.push(new a.default(this)),e.push(new u.default(this)),e.push(new l.default(this)),e.push(new s.default(this)),e.push(new c.default(this)),e.push(new f.default(this))},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=d},{"./shaders/Blur2Shader":143,"./shaders/BlurXShader":144,"./shaders/BlurYShader":145,"./shaders/ColorTransformShader":147,"./shaders/CopyImageShader":148,"./shaders/FxaaShader":149,"./shaders/Primitive2Shader":150,"./shaders/PrimitiveShader":151,"./shaders/ReplicateShader":152}],123:[function(e,t,r){"use strict";var n=Object.create(null);Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,n.buffered="\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main() {\n   gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n   vTextureCoord = aTextureCoord;\n}",n.blurX="\nprecision mediump float;\n\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform float uStrength;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main()\n{\n    gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2(-0.012 * uStrength, 0.0);\n    vBlurTexCoords[1] = aTextureCoord + vec2(-0.008 * uStrength, 0.0);\n    vBlurTexCoords[2] = aTextureCoord + vec2(-0.004 * uStrength, 0.0);\n    vBlurTexCoords[3] = aTextureCoord + vec2( 0.004 * uStrength, 0.0);\n    vBlurTexCoords[4] = aTextureCoord + vec2( 0.008 * uStrength, 0.0);\n    vBlurTexCoords[5] = aTextureCoord + vec2( 0.012 * uStrength, 0.0);\n}",n.blurY="\nprecision mediump float;\n\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform float uStrength;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main()\n{\n    gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2(0.0, -0.012 * uStrength);\n    vBlurTexCoords[1] = aTextureCoord + vec2(0.0, -0.008 * uStrength);\n    vBlurTexCoords[2] = aTextureCoord + vec2(0.0, -0.004 * uStrength);\n    vBlurTexCoords[3] = aTextureCoord + vec2(0.0,  0.004 * uStrength);\n    vBlurTexCoords[4] = aTextureCoord + vec2(0.0,  0.008 * uStrength);\n    vBlurTexCoords[5] = aTextureCoord + vec2(0.0,  0.012 * uStrength);\n}",n.primitive="\nprecision mediump float;\n\nattribute vec3 aVertexPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uProjectionMatrix;\nuniform mat4 uTransformMatrix;\n\nvarying vec4 vVertexColor;\n\nvoid main() {\n   gl_Position = uProjectionMatrix * uTransformMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);\n   vVertexColor = aVertexColor;\n}",n.replicate="\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uProjectionMatrix;\nuniform vec2 uOriginalSize;\nuniform vec2 uFitSize;\nuniform bool uFlipX;\nuniform bool uFlipY;\n\nvarying vec2 vTextureCoord;\n\nvoid main() {\n    vec3 newVertexPostion = aVertexPosition;\n   vec2 newTextureCoord = aTextureCoord;\n   if (uFlipX) {\n       newTextureCoord.x = 1.0 - newTextureCoord.x;\n       newVertexPostion.x -= (uFitSize - uOriginalSize).x;\n   }\n   if (uFlipY) {\n       newTextureCoord.y = 1.0 - newTextureCoord.y;\n       newVertexPostion.y -= (uFitSize - uOriginalSize).y;\n   }\n   gl_Position = uProjectionMatrix * vec4(newVertexPostion.xyz, 1.0);\n   vTextureCoord = newTextureCoord;\n}",n.fxaa="\nprecision mediump float;\n\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uProjectionMatrix;\nuniform vec2 uResolution;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vResolution;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n   out vec2 v_rgbNW, out vec2 v_rgbNE,\n   out vec2 v_rgbSW, out vec2 v_rgbSE,\n   out vec2 v_rgbM) {\n   vec2 inverseVP = 1.0 / resolution.xy;\n   v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n   v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n   v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n   v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n   v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main() {\n   gl_Position = uProjectionMatrix * vec4(aVertexPosition, 1.0);\n   vTextureCoord = aTextureCoord;\n   vResolution = uResolution;\n\n   texcoords(aTextureCoord * uResolution, uResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",n.blur2="\nprecision mediump float;\n\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main()\n{\n    gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n    vTextureCoord = aTextureCoord;\n}",n.copyImage="\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uProjectionMatrix;\nuniform mat4 uTransformMatrix;\nuniform vec2 uOriginalSize;\nuniform vec2 uFitSize;\nuniform bool uFlipX;\nuniform bool uFlipY;\n\nvarying vec2 vTextureCoord;\n\nvoid main() {\n    vec3 newVertexPostion = aVertexPosition;\n    vec2 newTextureCoord = aTextureCoord;\n    if (uFlipX) {\n        newTextureCoord.x = 1.0 - newTextureCoord.x;\n        newVertexPostion.x -= (uFitSize - uOriginalSize).x;\n    }\n    if (uFlipY) {\n        newTextureCoord.y = 1.0 - newTextureCoord.y;\n        newVertexPostion.y -= (uFitSize - uOriginalSize).y;\n    }\n    gl_Position = uProjectionMatrix * uTransformMatrix * vec4(newVertexPostion.xyz, 1.0);\n    vTextureCoord = newTextureCoord;\n}",n.primitive2="\nprecision mediump float;\n\nattribute vec3 aVertexPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uProjectionMatrix;\nuniform mat4 uTransformMatrix;\nuniform vec2 uOriginalSize;\nuniform bool uFlipX;\nuniform bool uFlipY;\n\nvarying vec4 vVertexColor;\n\nvoid main() {\n    vec3 newVertexPostion = aVertexPosition;\n    if (uFlipX) {\n        newVertexPostion.x = uOriginalSize.x - newVertexPostion.x;\n    }\n    if (uFlipY) {\n        newVertexPostion.y = uOriginalSize.y - newVertexPostion.y;\n    }\n    gl_Position = uProjectionMatrix * uTransformMatrix * vec4(newVertexPostion.xy, 0.0, 1.0);\n    vVertexColor = aVertexColor;\n}"},{}],124:[function(e,t,r){"use strict";var n;!function(e){e[e.UUnknown=0]="UUnknown",e[e.UBool=1]="UBool",e[e.U1I=2]="U1I",e[e.U1F=3]="U1F",e[e.U2F=4]="U2F",e[e.U3F=5]="U3F",e[e.U4F=6]="U4F",e[e.UV2=7]="UV2",e[e.UV3=8]="UV3",e[e.UV4=9]="UV4",e[e.U1IV=10]="U1IV",e[e.U2IV=11]="U2IV",e[e.U3IV=12]="U3IV",e[e.U4IV=13]="U4IV",e[e.U1FV=14]="U1FV",e[e.U2FV=15]="U2FV",e[e.U3FV=16]="U3FV",e[e.U4FV=17]="U4FV",e[e.UMat2=18]="UMat2",e[e.UMat3=19]="UMat3",e[e.UMat4=20]="UMat4",e[e.UIV=21]="UIV",e[e.UFV=22]="UFV",e[e.UV2V=23]="UV2V",e[e.UV3V=24]="UV3V",e[e.UV4V=25]="UV4V",e[e.USampler2D=26]="USampler2D"}(n||(n={})),Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],125:[function(e,t,r){"use strict";var n=e("libtess"),i=e("./ShaderManager"),o=e("./FilterManager"),a=e("./targets/RenderTarget2D"),u=e("./WebGLUtils"),l=e("../flash/display/BlendMode"),s=e("../mic/VirtualDom"),c=e("../mic/CommonUtil"),f=s.default.WebGLRenderingContext,d=function(){function e(e,t,r,n){void 0===t&&(t=null),this._currentRenderTarget=null,this._blendMode=null,this._screenRenderTarget=null,this._filterManager=null,this._shaderManager=null,this._tessellator=null,this._isStencilTestEnabled=!1,this._context=null,this._options=null,this._isInitialized=!1,this.__initialize(e,t,r,n)}return e.prototype.clear=function(){null!==this.screenRenderTarget&&this.screenRenderTarget.clear()},e.prototype.dispose=function(){this._isInitialized&&(this.screenRenderTarget.dispose(),this.filterManager.dispose(),this.shaderManager.dispose(),this._filterManager=null,this._shaderManager=null,this._screenRenderTarget=null,this._context=null,c.default.isUndefinedOrNull(this.view)||this.view.parentNode.removeChild(this.view),this._view=null)},e.prototype.beginDrawMaskObject=function(){var e=this.context;e.stencilFunc(f.ALWAYS,1,255),e.stencilMask(255),e.enable(f.STENCIL_TEST),e.stencilOp(f.KEEP,f.KEEP,f.REPLACE),e.colorMask(!1,!1,!1,!1),this._isStencilTestEnabled=!0},e.prototype.beginDrawMaskedObjects=function(){var e=this.context;e.stencilFunc(f.EQUAL,1,255),e.stencilMask(0),e.enable(f.STENCIL_TEST),e.stencilOp(f.KEEP,f.KEEP,f.REPLACE),e.colorMask(!0,!0,!0,!0),this._isStencilTestEnabled=!0},e.prototype.beginDrawNormalObjects=function(){var e=this.context;e.disable(f.STENCIL_TEST),e.stencilMask(0),e.stencilOp(f.KEEP,f.KEEP,f.REPLACE),e.colorMask(!0,!0,!0,!0),this._isStencilTestEnabled=!1},Object.defineProperty(e.prototype,"isStencilTestEnabled",{get:function(){return this._isStencilTestEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRenderTarget",{get:function(){return this._currentRenderTarget},set:function(e){if(e!==this._currentRenderTarget||!e){var t=this._currentRenderTarget=e?e:this._screenRenderTarget;t.activate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaderManager",{get:function(){return this._shaderManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterManager",{get:function(){return this._filterManager;
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tessellator",{get:function(){return this._tessellator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenRenderTarget",{get:function(){return this._screenRenderTarget},enumerable:!0,configurable:!0}),e.prototype.createRenderTarget=function(e){return void 0===e&&(e=null),new a.default(this,e,(!1))},e.prototype.createRootRenderTarget=function(e){return void 0===e&&(e=null),new a.default(this,e,(!0))},e.prototype.releaseRenderTarget=function(e){c.default.isUndefinedOrNull(e)||e.dispose()},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){if(this._isInitialized&&this._blendMode!==e){var t=h[e]||h[l.default.NORMAL],r=this._context;t[0]>=0?r.blendEquation(f.FUNC_ADD):r.blendEquation(f.FUNC_SUBTRACT),r.blendFunc(t[1],t[2]),this._blendMode=e}},enumerable:!0,configurable:!0}),e.prototype.__initialize=function(e,t,r,a){if(void 0===t&&(t=null),!this._isInitialized){this._isInitialized=!0,this._options=c.default.deepClone(e),t||(t=s.default.createElement("canvas"),t.className="glantern-view"),c.default.isUndefined(r)||(t.width=r),c.default.isUndefined(a)||(t.height=a);var d=Object.create(null);d.alpha=e.transparent,d.antialias=e.antialias,d.premultipliedAlpha=!0,d.depth=!1,this._context=u.default.setupWebGL(t,d),this._view=t;var h=this._context;h.disable(f.DEPTH_TEST),h.disable(f.CULL_FACE),h.enable(f.BLEND),this.blendMode=l.default.NORMAL,this._screenRenderTarget=this.createRootRenderTarget(),t.addEventListener("webglcontextlost",this.__onContextLost.bind(this)),t.addEventListener("webglcontextrestored",this.__onContextRestored.bind(this)),this._tessellator=new n.GluTesselator,this._shaderManager=new i.default(this),this._filterManager=new o.default(this),this.currentRenderTarget=null,this.__initializeTessellator()}},e.prototype.__initializeTessellator=function(){var e=this._tessellator;e.gluTessCallback(n.gluEnum.GLU_TESS_VERTEX_DATA,function(e,t){t[t.length-1].push(e[0],e[1])}),e.gluTessCallback(n.gluEnum.GLU_TESS_BEGIN_DATA,function(e,t){e!==n.primitiveType.GL_TRIANGLES&&console.warn("{TESS} expected TRIANGLES but got type: "+e),t.push([])}),e.gluTessCallback(n.gluEnum.GLU_TESS_ERROR,function(e){console.warn("{TESS} error number: ",e)}),e.gluTessCallback(n.gluEnum.GLU_TESS_COMBINE,function(e,t,r){return[e[0],e[1]]}),e.gluTessCallback(n.gluEnum.GLU_TESS_EDGE_FLAG,function(e){})},e.prototype.__onContextLost=function(e){},e.prototype.__onContextRestored=function(e){},e}();d.DEFAULT_OPTIONS={antialias:!0,depth:!1,transparent:!0},Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var h=Object.create(null);h[l.default.ADD]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.ALPHA]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.DARKEN]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.DIFFERENCE]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.ERASE]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.HARDLIGHT]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.INVERT]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.LAYER]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.LIGHTEN]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.MULTIPLY]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.NORMAL]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.OVERLAY]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.SCREEN]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.SHADER]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA],h[l.default.SUBTRACT]=[1,f.ONE,f.ONE_MINUS_SRC_ALPHA]},{"../flash/display/BlendMode":22,"../mic/CommonUtil":102,"../mic/VirtualDom":107,"./FilterManager":116,"./ShaderManager":122,"./WebGLUtils":126,"./targets/RenderTarget2D":155,libtess:217}],126:[function(e,t,r){"use strict";function n(e,t){var r=i(t);console.error(r),e&&(e.innerHTML=r)}function i(e){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>\n<td align="center">\n<div style="display: table-cell; vertical-align: middle;">\n<div>'+e+"</div>\n</div>\n</td></tr></table>"}function o(e,t){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,i=0;i<r.length;++i){try{n=e.getContext(r[i],t)}catch(e){}if(n)break}return n}var a=e("../mic/VirtualDom"),u=e("../mic/CommonUtil"),l=a.default.WebGLRenderingContext,s='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c='It appears your computer may not support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>',f=function(){function e(){}return e.setupWebGL=function(e,t){if(u.default.isUndefined(l))return n(e.parentElement,s),null;var r=o(e,t);return r||n(e.parentElement,c),r},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=f},{"../mic/CommonUtil":102,"../mic/VirtualDom":107}],127:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../FilterBase"),o=e("../RenderHelper"),a=e("../ShaderID"),u=e("../../mic/MathUtil"),l=function(e){function t(t){var r=e.call(this,t)||this;return r._strengthX=5,r._strengthY=5,r._pass=1,r}return n(t,e),Object.defineProperty(t.prototype,"strengthX",{get:function(){return this._strengthX},set:function(e){e<0&&(e=1),this._strengthX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strengthY",{get:function(){return this._strengthY},set:function(e){e<0&&(e=1),this._strengthY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|u.default.clamp(e,1,3),this._pass=e},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){var i=this,u=3,l=this.filterManager.requestTempTarget(),s=t,c=l;c.clear();for(var f,d=0;d<this.pass*u;++d)o.default.renderBuffered(e,s,c,a.default.BLUR2,!0,function(e){var r=e.shaderManager.currentShader;r.setStrength(i.strengthX/4/i.pass/(s.fitWidth/s.originalWidth)),r.setResolution(t.fitWidth),r.setBlurDirection([1,0])}),f=s,s=c,c=f;for(var d=0;d<this.pass*u;++d)o.default.renderBuffered(e,s,c,a.default.BLUR2,!0,function(e){var r=e.shaderManager.currentShader;r.setStrength(i.strengthY/4/i.pass/(s.fitWidth/s.originalWidth)),r.setResolution(t.fitHeight),r.setBlurDirection([0,1])}),f=s,s=c,c=f;o.default.copyTargetContent(e,s,r,this.flipX,this.flipY,n),this.filterManager.returnTempTarget(l)},t.prototype._$initialize=function(){},t.prototype._$dispose=function(){},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../../mic/MathUtil":106,"../FilterBase":115,"../RenderHelper":119,"../ShaderID":121}],128:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./BlurYFilter"),o=e("./BlurXFilter"),a=e("../FilterBase"),u=e("../../mic/MathUtil"),l=function(e){function t(t){var r=e.call(this,t)||this;return r._strengthX=5,r._strengthY=5,r._pass=1,r._blurXFilter=null,r._blurYFilter=null,r}return n(t,e),Object.defineProperty(t.prototype,"strengthX",{get:function(){return this._strengthX},set:function(e){e<0&&(e=1),this._strengthX=e,null!==this._blurXFilter&&(this._blurXFilter.strength=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strengthY",{get:function(){return this._strengthY},set:function(e){e<0&&(e=1),this._strengthY=e,null!==this._blurYFilter&&(this._blurYFilter.strength=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|u.default.clamp(e,1,3),this._pass=e,null!==this._blurXFilter&&(this._blurXFilter.pass=e),null!==this._blurYFilter&&(this._blurYFilter.pass=e)},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){var i=this.filterManager.requestTempTarget();this._blurXFilter.process(e,t,i,!0),this._blurYFilter.process(e,i,r,n),this.filterManager.returnTempTarget(i)},t.prototype._$initialize=function(){this._blurXFilter=new o.default(this.filterManager),this._blurYFilter=new i.default(this.filterManager),this._blurXFilter.initialize(),this._blurYFilter.initialize(),this._blurXFilter.strength=this.strengthX,this._blurYFilter.strength=this.strengthY,this._blurXFilter.pass=this.pass,this._blurYFilter.pass=this.pass,this._blurXFilter.flipY=!1},t.prototype._$dispose=function(){this._blurXFilter.dispose(),this._blurYFilter.dispose(),this._blurXFilter=this._blurYFilter=null},t}(a.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../../mic/MathUtil":106,"../FilterBase":115,"./BlurXFilter":129,"./BlurYFilter":130}],129:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../FilterBase"),o=e("../ShaderID"),a=e("../RenderHelper"),u=e("../../mic/MathUtil"),l=function(e){function t(t){var r=e.call(this,t)||this;return r._strength=5,r._pass=1,r}return n(t,e),Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},set:function(e){e<0&&(e=1),this._strength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|u.default.clamp(e,1,3),this._pass=e},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){var i=this,u=3,l=this.filterManager.requestTempTarget(),s=t,c=l;c.clear();for(var f,d=0;d<u*this.pass;++d)a.default.renderBuffered(e,s,c,o.default.BLUR_X,!0,function(e){var t=e.shaderManager.currentShader;t.setStrength(i.strength/4/i.pass/(s.fitWidth/s.originalWidth))}),f=s,s=c,c=f;a.default.copyTargetContent(e,s,r,this.flipX,this.flipY,n),this.filterManager.returnTempTarget(l)},t.prototype._$initialize=function(){},t.prototype._$dispose=function(){},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../../mic/MathUtil":106,"../FilterBase":115,"../RenderHelper":119,"../ShaderID":121}],130:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../FilterBase"),o=e("../ShaderID"),a=e("../RenderHelper"),u=e("../../mic/MathUtil"),l=function(e){function t(t){var r=e.call(this,t)||this;return r._strength=5,r._pass=1,r}return n(t,e),Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},set:function(e){e<0&&(e=1),this._strength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|u.default.clamp(e,1,3),this._pass=e},enumerable:!0,configurable:!0}),t.prototype.process=function(e,t,r,n){var i=this,u=3,l=this.filterManager.requestTempTarget(),s=t,c=l;c.clear();for(var f,d=0;d<u*this.pass;++d)a.default.renderBuffered(e,s,c,o.default.BLUR_Y,!0,function(e){var t=e.shaderManager.currentShader;t.setStrength(i.strength/4/i.pass/(s.fitWidth/s.originalWidth))}),f=s,s=c,c=f;a.default.copyTargetContent(e,s,r,this.flipX,this.flipY,n),this.filterManager.returnTempTarget(l)},t.prototype._$initialize=function(){},t.prototype._$dispose=function(){},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../../mic/MathUtil":106,"../FilterBase":115,"../RenderHelper":119,"../ShaderID":121}],131:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../FilterBase"),o=e("../RenderHelper"),a=e("../ShaderID"),u=function(e){function t(t){var r=e.call(this,t)||this;return r._colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r}return n(t,e),t.prototype.setColorMatrix=function(e){this._colorMatrix=e.slice()},t.prototype.process=function(e,t,r,n){var i=this,u=this.filterManager.requestTempTarget();o.default.renderBuffered(e,t,u,a.default.COLOR_TRANSFORM,!0,function(e){var t=e.shaderManager.currentShader;t.setColorMatrix(i._colorMatrix)}),o.default.copyTargetContent(e,u,r,this.flipX,this.flipY,n),this.filterManager.returnTempTarget(u)},t.prototype._$initialize=function(){},t.prototype._$dispose=function(){},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../FilterBase":115,"../RenderHelper":119,"../ShaderID":121}],132:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./ColorTransformFilter"),o=e("../FilterBase"),a=e("./Blur2Filter"),u=e("../RenderHelper"),l=e("../../mic/MathUtil"),s=function(e){function t(t){var r=e.call(this,t)||this;return r._strengthX=5,r._strengthY=5,r._pass=1,r._colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r._blurFilter=null,r._colorTransformFilter=null,r}return n(t,e),Object.defineProperty(t.prototype,"strengthX",{get:function(){return this._strengthX},set:function(e){e<0&&(e=1),this._strengthX=e,null!==this._blurFilter&&(this._blurFilter.strengthX=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strengthY",{get:function(){return this._strengthY},set:function(e){e<0&&(e=1),this._strengthY=e,null!==this._blurFilter&&(this._blurFilter.strengthY=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},set:function(e){e=0|l.default.clamp(e,1,3),this._pass=e,null!==this._blurFilter&&(this._blurFilter.pass=e)},enumerable:!0,configurable:!0}),t.prototype.setColorMatrix=function(e){null!==this._colorTransformFilter&&this._colorTransformFilter.setColorMatrix(e),this._colorMatrix=e.slice()},t.prototype.process=function(e,t,r,n){var i=this.filterManager.requestTempTarget(),o=this.filterManager.requestTempTarget();u.default.copyTargetContent(e,t,i,!1,!1,!0),this._colorTransformFilter.process(e,t,o,!0),this._blurFilter.process(e,o,r,!1),u.default.copyTargetContent(e,i,r,this.flipX,this.flipY,!1),this.filterManager.returnTempTarget(i),this.filterManager.returnTempTarget(o)},t.prototype._$initialize=function(){this._blurFilter=new a.default(this.filterManager),this._colorTransformFilter=new i.default(this.filterManager),this._blurFilter.initialize(),this._colorTransformFilter.initialize(),this._blurFilter.strengthX=this.strengthX,this._blurFilter.strengthY=this.strengthY,this._blurFilter.pass=this.pass,this._colorTransformFilter.setColorMatrix(this._colorMatrix)},t.prototype._$dispose=function(){this._blurFilter.dispose(),this._colorTransformFilter.dispose(),this._blurFilter=this._colorTransformFilter=null},t}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"../../mic/MathUtil":106,"../FilterBase":115,"../RenderHelper":119,"./Blur2Filter":127,"./ColorTransformFilter":131}],133:[function(e,t,r){"use strict";var n=e("./BlurFilter");r.BlurFilter=n.default;var i=e("./BlurXFilter");r.BlurXFilter=i.default;var o=e("./BlurYFilter");r.BlurYFilter=o.default;var a=e("./ColorTransformFilter");r.ColorTransformFilter=a.default;var u=e("./GlowFilter");r.GlowFilter=u.default;var l=e("./Blur2Filter");r.Blur2Filter=l.default},{"./Blur2Filter":127,"./BlurFilter":128,"./BlurXFilter":129,"./BlurYFilter":130,"./ColorTransformFilter":131,"./GlowFilter":132}],134:[function(e,t,r){"use strict";var n;!function(e){e[e.SOLID=0]="SOLID",e[e.GRADIENT=1]="GRADIENT",e[e.BITMAP=2]="BITMAP",e[e.SHADER=3]="SHADER"}(n||(n={})),Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],135:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./GraphicsDataRendererBase"),o=function(e){function t(t,r,n){var i=e.call(this,t,r,n,r,n)||this;return i.beginIndex=-1,i.endIndex=-1,i._contours=null,i._startingNewContour=!0,i._contours=[[]],i.beginIndex=-1,i.endIndex=-1,i._startingNewContour=!0,i}return n(t,e),t.prototype.moveTo=function(e,t){this.closePath(),this.hasDrawnAnything?this.currentX===e&&this.currentY===t||(this._startingNewContour=!0):this._startingNewContour=!0,this.currentX=e,this.currentY=t,this.lastPathStartX=e,this.lastPathStartY=t},t.prototype._$getContourForClosedShapes=function(){var e;return this.hasDrawnAnything?(e=[],this._contours.push(e),this._startingNewContour=!1):e=this._contours[0],e},t.prototype._$getContourForLines=function(){var e;return this.hasDrawnAnything?this._startingNewContour?(e=[],this._contours.push(e),this._startingNewContour=!1):e=this._contours[this._contours.length-1]:e=this._contours[0],e},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./GraphicsDataRendererBase":137}],136:[function(e,t,r){"use strict";var n=Object.create(null);Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,n.CurveAccuracy=20,n.VertexComponentCount=2},{}],137:[function(e,t,r){"use strict";var n=e("../PackedArrayBuffer"),i=e("../../flash/errors/NotImplementedError"),o=e("../../mic/VirtualDom"),a=o.default.WebGLRenderingContext,u=function(){function e(e,t,r,n,i){this._graphics=null,this._context=null,this._isDirty=!0,this._vertices=null,this._colors=null,this._indices=null,this._vertexBuffer=null,this._colorBuffer=null,this._indexBuffer=null,this._currentX=0,this._currentY=0,this._hasDrawnAnything=!1,this._lastPathStartX=0,this._lastPathStartY=0,this._graphics=e,this._context=e.$renderer.context,this.__initializeBuffers(),this._hasDrawnAnything=!1,this._lastPathStartX=t,this._lastPathStartY=r,this.moveTo(n,i),this.becomeDirty()}return e.prototype.bezierCurveTo=function(e,t,r,n,o,a){throw new i.default},e.prototype.closePath=function(){!this._hasDrawnAnything||this._currentX==this._lastPathStartX&&this._currentY==this._lastPathStartY||this.lineTo(this._lastPathStartX,this._lastPathStartY)},e.prototype.curveTo=function(e,t,r,n){throw new i.default},e.prototype.drawCircle=function(e,t,r){throw new i.default},e.prototype.drawEllipse=function(e,t,r,n){throw new i.default},e.prototype.drawRect=function(e,t,r,n){throw new i.default},e.prototype.drawRoundRect=function(e,t,r,n,o,a){throw void 0===a&&(a=NaN),new i.default},e.prototype.lineTo=function(e,t){throw new i.default},e.prototype.moveTo=function(e,t){throw new i.default},e.prototype.update=function(){this._$syncBuffers()},e.prototype.render=function(e){console.warn("Do not call GraphicsDataRendererBase.$render().")},e.prototype.dispose=function(){this.vertexBuffer&&this.vertexBuffer.dispose(),this.colorBuffer&&this.colorBuffer.dispose(),this.indexBuffer&&this.indexBuffer.dispose(),this._vertexBuffer=this._colorBuffer=this._indexBuffer=null,this._vertices=this._colors=this._indices=null,this._context=null},e.prototype.becomeDirty=function(){this._hasDrawnAnything=!0,this._isDirty=!0},Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){return this._vertices},set:function(e){this._vertices=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this._colors},set:function(e){this._colors=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indices",{get:function(){return this._indices},set:function(e){this._indices=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffer",{get:function(){return this._vertexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorBuffer",{get:function(){return this._colorBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDrawnAnything",{get:function(){return this._hasDrawnAnything},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentX",{get:function(){return this._currentX},set:function(e){this._currentX=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentY",{get:function(){return this._currentY},set:function(e){this._currentY=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastPathStartX",{get:function(){return this._lastPathStartX},set:function(e){this._lastPathStartX=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastPathStartY",{get:function(){return this._lastPathStartY},set:function(e){this._lastPathStartY=e},enumerable:!0,configurable:!0}),e.prototype._$syncBuffers=function(){this._isDirty&&(this._vertexBuffer.setNewData(this._vertices),this._vertexBuffer.becomeDirty(),this._colorBuffer.setNewData(this._colors),this._colorBuffer.becomeDirty(),this._indexBuffer.setNewData(this._indices),this._indexBuffer.becomeDirty(),this._isDirty=!1)},e.prototype.__initializeBuffers=function(){this._vertices=[],this._colors=[],this._indices=[];var e=this.context;this._vertexBuffer=n.default.create(e,this._vertices,a.FLOAT,a.ARRAY_BUFFER),this._colorBuffer=n.default.create(e,this._colors,a.FLOAT,a.ARRAY_BUFFER),this._indexBuffer=n.default.create(e,this._indices,a.UNSIGNED_SHORT,a.ELEMENT_ARRAY_BUFFER)},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../flash/errors/NotImplementedError":51,"../../mic/VirtualDom":107,"../PackedArrayBuffer":118}],138:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("libtess"),o=e("./FillRendererBase"),a=e("./GraphicsConst"),u=e("../RenderHelper"),l=e("../../flash/errors/NotImplementedError"),s=e("../../mic/MathUtil"),c=function(e){function t(t,r,n,i,o){var a=e.call(this,t,r,n)||this;return a._r=0,a._g=0,a._b=0,a._a=1,a._a=s.default.clamp(o,0,1),a._r=(i>>>16&255)/255,a._g=(i>>>8&255)/255,a._b=(255&i)/255,a}return n(t,e),t.prototype.bezierCurveTo=function(e,t,r,n,i,o){var u=this._$getContourForLines();this.hasDrawnAnything&&!this._startingNewContour||u.push(this.currentX,this.currentY);for(var l=this.currentX,s=this.currentY,c=1;c<=a.default.CurveAccuracy;c++){var f=c/a.default.CurveAccuracy,d=1-f,h=d*d,p=h*d,_=f*f,g=_*f,b=p*l+3*h*f*e+3*d*_*r+g*i,y=p*s+3*h*f*t+3*d*_*n+g*o;u.push(b,y)}this.currentX=i,this.currentY=o,this.becomeDirty(),this._startingNewContour=!1},t.prototype.curveTo=function(e,t,r,n){var i=this._$getContourForLines();this.hasDrawnAnything&&!this._startingNewContour||i.push(this.currentX,this.currentY);for(var o=this.currentX,u=this.currentY,l=1;l<=a.default.CurveAccuracy;l++){var s=l/a.default.CurveAccuracy,c=o+(e-o)*s,f=u+(t-u)*s;c+=(e+(r-e)*s-c)*s,f+=(t+(n-t)*s-f)*s,i.push(c,f)}this.currentX=r,this.currentY=n,this.becomeDirty(),this._startingNewContour=!1},t.prototype.drawCircle=function(e,t,r){this.moveTo(e,t);var n=this._$getContourForClosedShapes(),i=Math.PI/2;n.push(this.currentX+r,this.currentY);for(var o=0,u=0;u<4;u++){for(var l=1;l<=a.default.CurveAccuracy;l++){var s=o-l/a.default.CurveAccuracy*i,c=e+r*Math.cos(s),f=t+r*Math.sin(s);n.push(c,f)}o-=i}this.currentX=e+r,this.currentY=t,this.lastPathStartX=e+r,this.lastPathStartY=t,this.becomeDirty(),this._startingNewContour=!1},t.prototype.drawEllipse=function(e,t,r,n){this.moveTo(e,t+n/2);var i=this._$getContourForClosedShapes(),o=e+r/2,u=t+n/2,l=Math.PI/2;i.push(this.currentX,this.currentY);for(var s=Math.PI,c=0;c<4;c++){for(var f=1;f<=a.default.CurveAccuracy;f++){var d=s-f/a.default.CurveAccuracy*l,h=o+r/2*Math.cos(d),p=u+n/2*Math.sin(d);i.push(h,p)}s-=l}this.currentX=e+r,this.currentY=t+n/2,this.lastPathStartX=e+r,this.lastPathStartY=t+n/2,this.becomeDirty(),this._startingNewContour=!1},t.prototype.drawRect=function(e,t,r,n){this.moveTo(e,t);var i=this._$getContourForClosedShapes();i.push(e,t),i.push(e+r,t),i.push(e+r,t+n),i.push(e,t+n),this.currentX=e,this.currentY=t,this.becomeDirty(),this._startingNewContour=!1},t.prototype.drawRoundRect=function(e,t,r,n,i,o){throw void 0===o&&(o=NaN),new l.default},t.prototype.lineTo=function(e,t){var r=this._$getContourForLines();this.hasDrawnAnything&&!this._startingNewContour||r.push(this.currentX,this.currentY),r.push(e,t),this.currentX=e,this.currentY=t,this.becomeDirty(),this._startingNewContour=!1},t.prototype.update=function(){if(this.isDirty){var t=this.graphics.$renderer.tessellator;t.gluTessProperty(i.gluEnum.GLU_TESS_WINDING_RULE,i.windingRule.GLU_TESS_WINDING_ODD),t.gluTessNormal(0,0,1);var r=[];t.gluTessBeginPolygon(r);for(var n=0;n<this._contours.length;n++){var o=this._contours[n];if(o.length>0){t.gluTessBeginContour();for(var u=0;u<o.length;u+=a.default.VertexComponentCount){var l=[o[u],o[u+1]];t.gluTessVertex(l,l)}t.gluTessEndContour()}}t.gluTessEndPolygon();for(var s=0,n=0;n<r.length;++n)s+=r[n].length;for(var c=s/a.default.VertexComponentCount,f=this.vertices=new Array(s),d=this.colors=new Array(4*c),h=this.indices=new Array(c),p=0,n=0;n<r.length;n++)for(var _=r[n],u=0;u<_.length;u++)f[p]=_[u],++p;for(var g=this._r,b=this._g,y=this._b,m=this._a,n=0;n<c;++n)d[4*n]=g*m,d[4*n+1]=b*m,d[4*n+2]=y*m,d[4*n+3]=m,h[n]=n;e.prototype.update.call(this)}},t.prototype.render=function(e){if(this.vertices.length>0){var t=e.currentRenderTarget;u.default.renderPrimitives2(e,t,this.vertexBuffer,this.colorBuffer,this.indexBuffer,!1,t.isRoot,!1)}},t}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=c},{"../../flash/errors/NotImplementedError":51,"../../mic/MathUtil":106,"../RenderHelper":119,"./FillRendererBase":135,"./GraphicsConst":136,libtess:217}],139:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./StrokeRendererBase"),o=e("./GraphicsConst"),a=e("../RenderHelper"),u=e("../../flash/errors/NotImplementedError"),l=e("../../mic/MathUtil"),s=function(e){function t(t,r,n,i,o,a,u,s){var c=e.call(this,t,r,n,i,o)||this;return c._r=0,c._g=0,c._b=0,c._a=1,c._w=1,c._a=l.default.clamp(s,0,1),c._r=(u>>>16&255)/255,c._g=(u>>>8&255)/255,c._b=(255&u)/255,c._w=a,c}return n(t,e),t.prototype.bezierCurveTo=function(e,t,r,n,i,a){if(this._w>0){for(var u=this.currentX,l=this.currentY,s=1;s<=o.default.CurveAccuracy;s++){var c=s/o.default.CurveAccuracy,f=1-c,d=f*f,h=d*f,p=c*c,_=p*c,g=h*u+3*d*c*e+3*f*p*r+_*i,b=h*l+3*d*c*t+3*f*p*n+_*a;this.lineTo(g,b)}this.becomeDirty()}this.currentX=i,this.currentY=a},t.prototype.curveTo=function(e,t,r,n){if(this._w>0){for(var i=this.currentX,a=this.currentY,u=1;u<=o.default.CurveAccuracy;u++){var l=u/o.default.CurveAccuracy,s=i+(e-i)*l,c=a+(t-a)*l;s+=(e+(r-e)*l-s)*l,c+=(t+(n-t)*l-c)*l,this.lineTo(s,c)}this.becomeDirty()}this.currentX=r,this.currentY=n},t.prototype.drawCircle=function(e,t,r){if(this.moveTo(e-r,t),this._w>0){for(var n=Math.PI/2,i=Math.PI,a=0;a<4;a++){for(var u=1;u<=o.default.CurveAccuracy;u++){var l=i-u/o.default.CurveAccuracy*n,s=e+r*Math.cos(l),c=t+r*Math.sin(l);this.lineTo(s,c)}i-=n}this.becomeDirty()}this.currentX=e+r,this.currentY=t,this.lastPathStartX=e+r,this.lastPathStartY=t},t.prototype.drawEllipse=function(e,t,r,n){if(this.moveTo(e,t+n/2),this._w>0){for(var i=e+r/2,a=t+n/2,u=Math.PI/2,l=Math.PI,s=0;s<4;s++){for(var c=1;c<=o.default.CurveAccuracy;c++){var f=l-c/o.default.CurveAccuracy*u,d=i+r/2*Math.cos(f),h=a+n/2*Math.sin(f);this.lineTo(d,h)}l-=u}this.becomeDirty()}this.currentX=e+r,this.currentY=t+n/2,this.lastPathStartX=e+r,this.lastPathStartY=t+n/2},t.prototype.drawRect=function(e,t,r,n){this.moveTo(e,t),this.lineTo(e,t+n),this.lineTo(e+r,t+n),this.lineTo(e+r,t),this.lineTo(e,t),this.becomeDirty()},t.prototype.drawRoundRect=function(e,t,r,n,i,o){throw void 0===o&&(o=NaN),new u.default},t.prototype.lineTo=function(e,t){if(this._w>0){var r=this._$getSimLineVertices(this.currentX,this.currentY,e,t,this._w);if(r.length>0){var n=this.vertices.length/o.default.VertexComponentCount;Array.prototype.push.apply(this.vertices,r);var i=this._r,a=this._g,u=this._b,l=this._a,s=[i*l,a*l,u*l,l,i*l,a*l,u*l,l,i*l,a*l,u*l,l,i*l,a*l,u*l,l];Array.prototype.push.apply(this.colors,s),this.indices.push(n,n+1,n+2,n+1,n+2,n+3),this.becomeDirty()}}this.currentX=e,this.currentY=t},t.prototype.render=function(e){if(this.vertices.length>0){var t=e.currentRenderTarget;a.default.renderPrimitives2(e,t,this.vertexBuffer,this.colorBuffer,this.indexBuffer,!1,t.isRoot,!1)}},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"../../flash/errors/NotImplementedError":51,"../../mic/MathUtil":106,"../RenderHelper":119,"./GraphicsConst":136,"./StrokeRendererBase":140}],140:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./GraphicsDataRendererBase"),o=function(e){function t(t,r,n,i,o){var a=e.call(this,t,r,n,i,o)||this;return a._lineVerticesStorage=null,a._lineVerticesStorage=[[0,0],[0,0],[0,0],[0,0]],a}return n(t,e),t.prototype.moveTo=function(e,t){this.graphics.$isFilling&&this.closePath(),this.currentX=e,this.currentY=t,this.lastPathStartX=e,this.lastPathStartY=t},t.prototype._$getSimLineVertices=function(e,t,r,n,i){if(i<0)return[];var o=i/2,a=this._lineVerticesStorage,u=a[0],l=a[1],s=a[2],c=a[3];if(e===r)u[0]=e-o,u[1]=t>n?t+o:t-o,l[0]=e+o,l[1]=t>n?t+o:t-o,s[0]=r-o,s[1]=t>n?n-o:n+o,c[0]=r+o,c[1]=t>n?n-o:n+o;else{var f=(n-t)/(r-e),d=1/Math.sqrt(1+f*f),h=Math.sqrt(1-d*d),p=o*h,_=o*d,g=_,b=p;e>r?(e+=g,r-=g):(e-=g,r+=g),t>n?(t+=b,n-=b):(t-=b,n+=b),u[0]=e-p,l[0]=e+p,s[0]=r-p,c[0]=r+p,f>=0?(u[1]=t+_,l[1]=t-_,s[1]=n+_,c[1]=n-_):(u[1]=t-_,l[1]=t+_,s[1]=n-_,c[1]=n+_)}return[u[0],u[1],l[0],l[1],s[0],s[1],c[0],c[1]]},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./GraphicsDataRendererBase":137}],141:[function(e,t,r){"use strict";var n=e("./BrushType");r.BrushType=n.default;var i=e("./FillRendererBase");r.FillRendererBase=i.default;var o=e("./GraphicsConst");r.GraphicsConst=o.default;var a=e("./GraphicsDataRendererBase");r.GraphicsDataRendererBase=a.default;var u=e("./SolidFillRenderer");r.SolidFillRenderer=u.default;var l=e("./SolidStrokeRenderer");r.SolidStrokeRenderer=l.default;var s=e("./StrokeRendererBase");r.StrokeRendererBase=s.default},{"./BrushType":134,"./FillRendererBase":135,"./GraphicsConst":136,"./GraphicsDataRendererBase":137,"./SolidFillRenderer":138,"./SolidStrokeRenderer":139,"./StrokeRendererBase":140}],142:[function(e,t,r){"use strict";var n=e("./BitmapTargetBase");r.BitmapTargetBase=n.default;var i=e("./FilterBase");r.FilterBase=i.default;var o=e("./FilterManager");r.FilterManager=o.default;var a=e("./FragmentShaders");r.FragmentShaders=a.default;var u=e("./PackedArrayBuffer");r.PackedArrayBuffer=u.default;var l=e("./RenderHelper");r.RenderHelper=l.default;var s=e("./ShaderBase");r.ShaderBase=s.default;var c=e("./ShaderID");r.ShaderID=c.default;var f=e("./ShaderManager");r.ShaderManager=f.default;var d=e("./VertexShaders");r.VertexShaders=d.default;var h=e("./WebGLDataType");r.WebGLDataType=h.default;var p=e("./WebGLRenderer");r.WebGLRenderer=p.default;var _=e("./WebGLUtils");r.WebGLUtils=_.default;var g=e("./filters/index");r.filters=g;var b=e("./shaders/index");r.shaders=b;var y=e("./graphics/index");r.graphics=y;var m=e("./targets/index");r.targets=m},{"./BitmapTargetBase":114,"./FilterBase":115,"./FilterManager":116,"./FragmentShaders":117,
"./PackedArrayBuffer":118,"./RenderHelper":119,"./ShaderBase":120,"./ShaderID":121,"./ShaderManager":122,"./VertexShaders":123,"./WebGLDataType":124,"./WebGLRenderer":125,"./WebGLUtils":126,"./filters/index":133,"./graphics/index":141,"./shaders/index":153,"./targets/index":156}],143:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VertexShaders"),o=e("../FragmentShaders"),a=e("./BufferedShader"),u=e("../WebGLDataType"),l=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)||this}return n(t,e),t.prototype.setStrength=function(e){e<0&&(e=1),this._uniforms.get("uStrength").value=e},t.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},t.prototype.setResolution=function(e){e<0&&(e=1),this._uniforms.get("uResolution").value=e},t.prototype.setBlurDirection=function(e){this._uniforms.get("uBlurDirection").value=[e[0],e[1]]},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var i;i=Object.create(null),i.name="uStrength",i.type=u.default.U1F,i.value=5,r.set(i.name,i),i=Object.create(null),i.name="uResolution",i.type=u.default.U1F,i.value=1,r.set(i.name,i),i=Object.create(null),i.name="uBlurDirection",i.type=u.default.U2F,i.value=[1,0],r.set(i.name,i)},t}(a.default);l.SHADER_CLASS_NAME="Blur2Shader",l.FRAGMENT_SOURCE=o.default.blur2,l.VERTEX_SOURCE=i.default.blur2,Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../FragmentShaders":117,"../VertexShaders":123,"../WebGLDataType":124,"./BufferedShader":146}],144:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VertexShaders"),o=e("../FragmentShaders"),a=e("./BufferedShader"),u=e("../WebGLDataType"),l=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)||this}return n(t,e),t.prototype.setStrength=function(e){e<0&&(e=1),this._uniforms.get("uStrength").value=e},t.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var i;i=Object.create(null),i.name="uStrength",i.type=u.default.U1F,i.value=5,r.set(i.name,i)},t}(a.default);l.SHADER_CLASS_NAME="BlurXShader",l.FRAGMENT_SOURCE=o.default.blur,l.VERTEX_SOURCE=i.default.blurX,Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../FragmentShaders":117,"../VertexShaders":123,"../WebGLDataType":124,"./BufferedShader":146}],145:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VertexShaders"),o=e("../FragmentShaders"),a=e("./BufferedShader"),u=e("../WebGLDataType"),l=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)||this}return n(t,e),t.prototype.setStrength=function(e){e<0&&(e=1),this._uniforms.get("uStrength").value=e},t.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var i;i=Object.create(null),i.name="uStrength",i.type=u.default.U1F,i.value=5,r.set(i.name,i)},t}(a.default);l.SHADER_CLASS_NAME="BlurYShader",l.FRAGMENT_SOURCE=o.default.blur,l.VERTEX_SOURCE=i.default.blurY,Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../FragmentShaders":117,"../VertexShaders":123,"../WebGLDataType":124,"./BufferedShader":146}],146:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/geom/Matrix3D"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("../ShaderBase"),l=e("../WebGLDataType"),s=function(e){function t(t,r,n){return e.call(this,t,r,n,null,null)||this}return n(t,e),t.prototype.setTexture=function(e){this._uniforms.get("uSampler").texture=e},t.prototype.setHollow=function(e){this._uniforms.get("uHollow").value=e},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var o,a=new i.default,u=t.renderer.view.width,s=t.renderer.view.height;a.setOrthographicProjection(0,u,s,0,-1e3,1e3),o=Object.create(null),o.name="uSampler",o.type=l.default.USampler2D,o.value=0,o.texture=null,r.set(o.name,o),o=Object.create(null),o.name="uProjectionMatrix",o.type=l.default.UMat4,o.value=a.toArray(),o.transpose=!1,r.set(o.name,o),o=Object.create(null),o.name="uHollow",o.type=l.default.UBool,o.value=!0,r.set(o.name,o)},t}(u.default);s.SHADER_CLASS_NAME="BufferedShader",s.FRAGMENT_SOURCE=a.default.buffered,s.VERTEX_SOURCE=o.default.buffered,Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":117,"../ShaderBase":120,"../VertexShaders":123,"../WebGLDataType":124}],147:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VertexShaders"),o=e("../FragmentShaders"),a=e("./BufferedShader"),u=e("../WebGLDataType"),l=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)||this}return n(t,e),t.prototype.setColorMatrix=function(e){return e.length<20?void console.warn("ColorTransformShader.setColorMatrix needs a 4x5 matrix."):void(this._uniforms.get("uColorMatrix").value=e.slice())},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var i,o=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];i=Object.create(null),i.name="uColorMatrix",i.type=u.default.U1FV,i.value=o,r.set(i.name,i)},t}(a.default);l.SHADER_CLASS_NAME="ColorTransformShader",l.FRAGMENT_SOURCE=o.default.colorTransform,l.VERTEX_SOURCE=i.default.buffered,Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../FragmentShaders":117,"../VertexShaders":123,"../WebGLDataType":124,"./BufferedShader":146}],148:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VertexShaders"),o=e("../FragmentShaders"),a=e("./BufferedShader"),u=e("../WebGLDataType"),l=e("../../flash/geom/Matrix3D"),s=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)||this}return n(t,e),t.prototype.setFlipX=function(e){this._uniforms.get("uFlipX").value=e},t.prototype.setFlipY=function(e){this._uniforms.get("uFlipY").value=e},t.prototype.setOriginalSize=function(e){this._uniforms.get("uOriginalSize").value=e.slice()},t.prototype.setFitSize=function(e){this._uniforms.get("uFitSize").value=e.slice()},t.prototype.setAlpha=function(e){this._uniforms.get("uAlpha").value=e},t.prototype.setTransform=function(e){this._uniforms.get("uTransformMatrix").value=e.toArray()},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var i,o=new l.default;o.identity(),i=Object.create(null),i.name="uFlipX",i.type=u.default.UBool,i.value=!1,r.set(i.name,i),i=Object.create(null),i.name="uFlipY",i.type=u.default.UBool,i.value=!1,r.set(i.name,i),i=Object.create(null),i.name="uOriginalSize",i.type=u.default.U2F,i.value=[0,0],r.set(i.name,i),i=Object.create(null),i.name="uFitSize",i.type=u.default.U2F,i.value=[0,0],r.set(i.name,i),i=Object.create(null),i.name="uTransformMatrix",i.type=u.default.UMat4,i.value=o.toArray(),i.transpose=!1,r.set(i.name,i),i=Object.create(null),i.name="uAlpha",i.type=u.default.U1F,i.value=1,r.set(i.name,i)},t}(a.default);s.SHADER_CLASS_NAME="CopyImageShader",s.FRAGMENT_SOURCE=o.default.copyImage,s.VERTEX_SOURCE=i.default.copyImage,Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":117,"../VertexShaders":123,"../WebGLDataType":124,"./BufferedShader":146}],149:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VertexShaders"),o=e("../FragmentShaders"),a=e("./BufferedShader"),u=e("../WebGLDataType"),l=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)||this}return n(t,e),t.prototype.setResolutionXY=function(e){this._uniforms.get("uResolution").value=e.slice()},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var i;i=Object.create(null),i.name="uResolution",i.type=u.default.U2F,i.value=[1,1],r.set(i.name,i)},t}(a.default);l.SHADER_CLASS_NAME="FxaaShader",l.FRAGMENT_SOURCE=o.default.fxaa,l.VERTEX_SOURCE=i.default.fxaa,Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../FragmentShaders":117,"../VertexShaders":123,"../WebGLDataType":124,"./BufferedShader":146}],150:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/geom/Matrix3D"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("../ShaderBase"),l=e("../WebGLDataType"),s=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE,null,null)||this}return n(t,e),t.prototype.setProjection=function(e){this._uniforms.get("uProjectionMatrix").value=e.toArray()},t.prototype.setTransform=function(e){this._uniforms.get("uTransformMatrix").value=e.toArray()},t.prototype.setAlpha=function(e){this._uniforms.get("uAlpha").value=e},t.prototype.setFlipX=function(e){this._uniforms.get("uFlipX").value=e},t.prototype.setFlipY=function(e){this._uniforms.get("uFlipY").value=e},t.prototype.setOriginalSize=function(e){this._uniforms.get("uOriginalSize").value=e.slice()},t.prototype.setHollow=function(e){this._uniforms.get("uHollow").value=e},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var o,a=new i.default,u=new i.default,s=t.renderer.view.width,c=t.renderer.view.height;u.setOrthographicProjection(0,s,c,0,-1e3,1e3),o=Object.create(null),o.name="uProjectionMatrix",o.type=l.default.UMat4,o.value=u.toArray(),o.transpose=!1,r.set(o.name,o),o=Object.create(null),o.name="uTransformMatrix",o.type=l.default.UMat4,o.value=a.toArray(),o.transpose=!1,r.set(o.name,o),o=Object.create(null),o.name="uAlpha",o.type=l.default.U1F,o.value=1,r.set(o.name,o),o=Object.create(null),o.name="uFlipX",o.type=l.default.UBool,o.value=!1,r.set(o.name,o),o=Object.create(null),o.name="uFlipY",o.type=l.default.UBool,o.value=!1,r.set(o.name,o),o=Object.create(null),o.name="uOriginalSize",o.type=l.default.U2F,o.value=[0,0],r.set(o.name,o),o=Object.create(null),o.name="uHollow",o.type=l.default.UBool,o.value=!0,r.set(o.name,o)},t}(u.default);s.SHADER_CLASS_NAME="Primitive2Shader",s.FRAGMENT_SOURCE=a.default.primitive,s.VERTEX_SOURCE=o.default.primitive2,Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":117,"../ShaderBase":120,"../VertexShaders":123,"../WebGLDataType":124}],151:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../flash/geom/Matrix3D"),o=e("../VertexShaders"),a=e("../FragmentShaders"),u=e("../ShaderBase"),l=e("../WebGLDataType"),s=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE,null,null)||this}return n(t,e),t.prototype.setProjection=function(e){this._uniforms.get("uProjectionMatrix").value=e.toArray()},t.prototype.setTransform=function(e){this._uniforms.get("uTransformMatrix").value=e.toArray()},t.prototype.setAlpha=function(e){this._uniforms.get("uAlpha").value=e},t.prototype.setHollow=function(e){this._uniforms.get("uHollow").value=e},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var o,a=new i.default,u=new i.default,s=t.renderer.view.width,c=t.renderer.view.height;u.setOrthographicProjection(0,s,c,0,-1e3,1e3),o=Object.create(null),o.name="uProjectionMatrix",o.type=l.default.UMat4,o.value=u.toArray(),o.transpose=!1,r.set(o.name,o),o=Object.create(null),o.name="uTransformMatrix",o.type=l.default.UMat4,o.value=a.toArray(),o.transpose=!1,r.set(o.name,o),o=Object.create(null),o.name="uAlpha",o.type=l.default.U1F,o.value=1,r.set(o.name,o),o=Object.create(null),o.name="uHollow",o.type=l.default.UBool,o.value=!0,r.set(o.name,o)},t}(u.default);s.SHADER_CLASS_NAME="PrimitiveShader",s.FRAGMENT_SOURCE=a.default.primitive,s.VERTEX_SOURCE=o.default.primitive,Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":117,"../ShaderBase":120,"../VertexShaders":123,"../WebGLDataType":124}],152:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VertexShaders"),o=e("../FragmentShaders"),a=e("./BufferedShader"),u=e("../WebGLDataType"),l=function(e){function t(r){return e.call(this,r,t.VERTEX_SOURCE,t.FRAGMENT_SOURCE)||this}return n(t,e),t.prototype.setFlipX=function(e){this._uniforms.get("uFlipX").value=e},t.prototype.setFlipY=function(e){this._uniforms.get("uFlipY").value=e},t.prototype.setOriginalSize=function(e){this._uniforms.get("uOriginalSize").value=e.slice()},t.prototype.setFitSize=function(e){this._uniforms.get("uFitSize").value=e.slice()},t.prototype._$localInit=function(t,r,n){e.prototype._$localInit.call(this,t,r,n);var i;i=Object.create(null),i.name="uFlipX",i.type=u.default.UBool,i.value=!1,r.set(i.name,i),i=Object.create(null),i.name="uFlipY",i.type=u.default.UBool,i.value=!1,r.set(i.name,i),i=Object.create(null),i.name="uOriginalSize",i.type=u.default.U2F,i.value=[0,0],r.set(i.name,i),i=Object.create(null),i.name="uFitSize",i.type=u.default.U2F,i.value=[0,0],r.set(i.name,i)},t}(a.default);l.SHADER_CLASS_NAME="ReplicateShader",l.FRAGMENT_SOURCE=o.default.buffered,l.VERTEX_SOURCE=i.default.replicate,Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../FragmentShaders":117,"../VertexShaders":123,"../WebGLDataType":124,"./BufferedShader":146}],153:[function(e,t,r){"use strict";var n=e("./BlurXShader");r.BlurXShader=n.default;var i=e("./BlurYShader");r.BlurYShader=i.default;var o=e("./BufferedShader");r.BufferedShader=o.default;var a=e("./ColorTransformShader");r.ColorTransformShader=a.default;var u=e("./FxaaShader");r.FxaaShader=u.default;var l=e("./PrimitiveShader");r.PrimitiveShader=l.default;var s=e("./ReplicateShader");r.ReplicateShader=s.default;var c=e("./Blur2Shader");r.Blur2Shader=c.default;var f=e("./CopyImageShader");r.CopyImageShader=f.default;var d=e("./Primitive2Shader");r.Primitive2Shader=d.default},{"./Blur2Shader":143,"./BlurXShader":144,"./BlurYShader":145,"./BufferedShader":146,"./ColorTransformShader":147,"./CopyImageShader":148,"./FxaaShader":149,"./Primitive2Shader":150,"./PrimitiveShader":151,"./ReplicateShader":152}],154:[function(e,t,r){"use strict";function n(e){if(!s){var t=[0,1,1,1,0,0,1,0],r=[0,1,2,1,2,3];c.textureCoords=a.default.create(e,t,l.FLOAT,l.ARRAY_BUFFER),c.textureIndices=a.default.create(e,r,l.UNSIGNED_SHORT,l.ELEMENT_ARRAY_BUFFER),s=!0}}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../BitmapTargetBase"),a=e("../PackedArrayBuffer"),u=e("../../mic/VirtualDom"),l=u.default.WebGLRenderingContext,s=!1,c=function(e){function t(t,r){var i=e.call(this,t)||this;return i._isRoot=!1,i._texture=null,s||n(t.context),i._isRoot=r,i}return i(t,e),t.prototype.dispose=function(){this.context.deleteTexture(this.texture),this._texture=null,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return this._isRoot},enumerable:!0,configurable:!0}),t}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=c},{"../../mic/VirtualDom":107,"../BitmapTargetBase":114,"../PackedArrayBuffer":118}],155:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../mic/MathUtil"),o=e("../../mic/VirtualDom"),a=e("./BufferedBitmapTarget"),u=o.default.WebGLRenderingContext,l=function(e){function t(t,r,n){void 0===r&&(r=null),void 0===n&&(n=!1);var i=e.call(this,t,n)||this;return i._frameBuffer=null,i._depthStencilBuffer=null,i._originalWidth=0,i._originalHeight=0,i._fitWidth=0,i._fitHeight=0,i._image=null,i._isStencil=!1,i._isInitialized=!1,i.__initialize(t.view.width,t.view.height,r),i}return n(t,e),t.prototype.dispose=function(){var t=this.context;t.deleteTexture(this.texture),t.deleteFramebuffer(this.frameBuffer),t.deleteRenderbuffer(this.depthStencilBuffer),this._texture=null,this._frameBuffer=null,this._depthStencilBuffer=null,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"originalWidth",{get:function(){return this._originalWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){return this._originalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitWidth",{get:function(){return this._fitWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitHeight",{get:function(){return this._fitHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameBuffer",{get:function(){return this._frameBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthStencilBuffer",{get:function(){return this._depthStencilBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStencil",{get:function(){return this._isStencil},set:function(e){this._isStencil=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.context.bindFramebuffer(u.FRAMEBUFFER,this._frameBuffer)},t.prototype.clear=function(){this.activate();var e=this.context;e.viewport(0,0,this.fitWidth,this.fitHeight),e.clearColor(0,0,0,0),e.clearDepth(0),e.clearStencil(0),e.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT)},t.prototype.resize=function(e,t){this.__resize(e,t)},t.prototype.updateImageContent=function(){if(null!==this.texture&&null!==this.image){var e=this.context;e.bindTexture(u.TEXTURE_2D,this.texture),e.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,this.image),e.bindTexture(u.TEXTURE_2D,null)}},t.prototype.updateImageSize=function(){var e=this.image;if(null!==this.texture&&null!==e){try{e.width=i.default.power2Roundup(e.width),e.height=i.default.power2Roundup(e.height)}catch(e){}this._originalWidth=this._fitWidth=e.width,this._originalHeight=this._fitHeight=e.height}},t.prototype.__initialize=function(e,t,r){var n=this;this._image=r;var i=this.context,o=function(e){i.deleteFramebuffer(n.frameBuffer),i.deleteRenderbuffer(n.depthStencilBuffer),i.deleteTexture(n.texture),console.warn(e)};if(!this.isRoot){var a=this._frameBuffer=i.createFramebuffer();if(null===a)return o("Failed to create the frame buffer.");var l=this._depthStencilBuffer=i.createRenderbuffer();if(null===l)return o("Failed to create the depth/stencil buffer.");var s=this._texture=i.createTexture();if(null===s)return o("Failed to create the underlying texture.")}if(this.__resize(e,t),!this.isRoot){i.bindFramebuffer(u.FRAMEBUFFER,this.frameBuffer),i.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,this.texture,0),i.bindRenderbuffer(u.RENDERBUFFER,this.depthStencilBuffer),i.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,this.depthStencilBuffer);var c=i.checkFramebufferStatus(u.FRAMEBUFFER);if(c!==u.FRAMEBUFFER_COMPLETE)return o("Frame buffer is not complete: code 0x"+c.toString(16))}i.bindRenderbuffer(u.RENDERBUFFER,null),i.bindTexture(u.TEXTURE_2D,null),i.bindFramebuffer(u.FRAMEBUFFER,null),this._isInitialized=!0},t.prototype.__resize=function(e,t){var r=this.context,n=this.image,o=this.isRoot,a=this.texture;null===n?(e|=0,t|=0,this._originalWidth=e,this._originalHeight=t,i.default.isPowerOfTwo(e)||(e=i.default.power2Roundup(e)),i.default.isPowerOfTwo(t)||(t=i.default.power2Roundup(t)),this._fitWidth=e,this._fitHeight=t):(e=this._originalWidth=this._fitWidth=n.width,t=this._originalHeight=this._fitHeight=n.height),null!==a&&(r.bindTexture(u.TEXTURE_2D,this.texture),r.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),r.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),r.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),r.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE)),null!==n?null!==a&&(this.isInitialized?r.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,n):r.texImage2D(u.TEXTURE_2D,0,u.RGBA,e,t,0,u.RGBA,u.UNSIGNED_BYTE,null)):(r.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,0),null!==a&&r.texImage2D(u.TEXTURE_2D,0,u.RGBA,e,t,0,u.RGBA,u.UNSIGNED_BYTE,null)),o||(r.bindRenderbuffer(u.RENDERBUFFER,this.depthStencilBuffer),r.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,e,t)),r.bindRenderbuffer(u.RENDERBUFFER,null),r.bindTexture(u.TEXTURE_2D,null)},t}(a.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{"../../mic/MathUtil":106,"../../mic/VirtualDom":107,"./BufferedBitmapTarget":154}],156:[function(e,t,r){"use strict";var n=e("./BufferedBitmapTarget");r.BufferedImageTarget=n.default;var i=e("./RenderTarget2D");r.RenderTarget2D=i.default},{"./BufferedBitmapTarget":154,"./RenderTarget2D":155}],157:[function(e,t,r){"use strict";var n=e("./danmaku_api/Display"),i=e("./danmaku_api/Functions"),o=e("./danmaku_api/Utils"),a=e("./danmaku_api/Bitmap"),u=e("./danmaku_api/Player"),l=e("./danmaku_api/ScriptManager"),s=e("./danmaku_api/Storage"),c=e("./danmaku_api/Tween"),f=e("./danmaku_api/Global"),d=Object.create(null);Object.defineProperty(r,"__esModule",{value:!0}),r.default=d,function(e){e.$G=e.Global=f.default,e.Bitmap=a.default,e.ScriptManager=l.default,e.Storage=s.default,e.Tween=new c.default,e.Utils=o.default,e.Player=u.default,e.$=e.Display=n.default,e.trace=i.trace,e.clear=i.clear,e.getTimer=i.getTimer,e.timer=i.timer,e.interval=i.interval,e.foreach=i.foreach,e.clone=i.clone,e.load=i.load}(d)},{"./danmaku_api/Bitmap":158,"./danmaku_api/Display":161,"./danmaku_api/Functions":162,"./danmaku_api/Global":163,"./danmaku_api/Player":165,"./danmaku_api/ScriptManager":167,"./danmaku_api/Storage":168,"./danmaku_api/Tween":169,"./danmaku_api/Utils":171}],158:[function(e,t,r){"use strict";var n=e("../../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),i=e("../../../../lib/glantern/src/gl/flash/geom/Rectangle"),o=function(){function e(){}return e.createBitmapData=function(e,t,r,i){throw void 0===r&&(r=!0),void 0===i&&(i=4294967295),new n.default},e.createRectangle=function(e,t,r,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),new i.default(e,t,r,n)},e.createBitmap=function(e){throw new n.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51,"../../../../lib/glantern/src/gl/flash/geom/Rectangle":68}],159:[function(e,t,r){"use strict";var n=function(){function e(){}return e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],160:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../danmaku/scripted/dco/DCOHelper"),o=e("../../../../lib/glantern/src/gl/flash/text/TextField"),a=e("../../mic/Engine"),u=function(e){function t(t,r,n,o){var u=e.call(this,t,r)||this;return u._extraCreateParams=null,u._createParams=null,u._createParams=i.default.fillInCreateParams(a.default.instance,u,n),u._extraCreateParams=o,i.default.applyGeneralCreateParams(u,u._createParams),u}return n(t,e),Object.defineProperty(t.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraCreateParams",{get:function(){return this._extraCreateParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCreatedByDanmaku",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../../../lib/glantern/src/gl/flash/text/TextField":86,"../../danmaku/scripted/dco/DCOHelper":189,"../../mic/Engine":208}],161:[function(e,t,r){"use strict";var n=e("../../danmaku/scripted/dco/DCShape"),i=e("./CommentField"),o=e("../../../../lib/glantern/src/gl/flash/geom/Matrix"),a=e("../../../../lib/glantern/src/gl/flash/geom/Point"),u=e("../../../../lib/glantern/src/gl/flash/filters/BitmapFilterQuality"),l=e("../../../../lib/glantern/src/gl/flash/filters/GlowFilter"),s=e("../../../../lib/glantern/src/gl/flash/filters/BlurFilter"),c=e("../../../../lib/glantern/src/gl/flash/geom/Vector3D"),f=e("../../../../lib/glantern/src/gl/flash/geom/Matrix3D"),d=e("../../../../lib/glantern/src/gl/flash/geom/ColorTransform"),h=e("../../../../lib/glantern/src/gl/flash/text/TextFormat"),p=e("../../../../lib/glantern/src/gl/mic/CommonUtil"),_=e("../../../../lib/glantern/src/gl/mic/VirtualDom"),g=e("../../../../lib/glantern/src/gl/flash/errors/NotSupportedError"),b=e("../../danmaku/scripted/dco/DCCanvas"),y=e("../../danmaku/scripted/dco/DCButton"),m=e("../../mic/Engine"),v=e("../../danmaku/scripted/ScriptedDanmakuProvider"),w=e("../../danmaku/scripted/dco/DCOHelper"),P=function(){function e(){}return Object.defineProperty(e,"fullScreenWidth",{get:function(){return _.default.screenWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fullScreenHeight",{get:function(){return _.default.screenHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"width",{get:function(){return m.default.instance.view.width},enumerable:!0,configurable:!0}),Object.defineProperty(e,"height",{get:function(){return m.default.instance.view.height},enumerable:!0,configurable:!0}),e.createMatrix=function(e,t,r,n,i,a){return void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===a&&(a=0),new o.default(e,t,r,n,i,a)},e.createPoint=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),new a.default(e,t)},e.createComment=function(e,t){var r=v.default.instance,n=r.layer,o=new i.default(n.stage,n,t,w.default.getExtraCreateParams());return o.text=e,o.textColor=16777215,o.defaultTextFormat.font="SimHei",n.addChild(o),r.registerElement(o),o},e.createShape=function(e){var t=v.default.instance,r=t.layer,i=new n.default(r.stage,r,e,w.default.getExtraCreateParams());return r.addChild(i),t.registerElement(i),i},e.createCanvas=function(e){var t=v.default.instance,r=t.layer,n=new b.default(r.stage,r,e,w.default.getExtraCreateParams());return r.addChild(n),t.registerElement(n),n},e.createButton=function(e,t){var r="string"!=typeof e?e:t;r=r||Object.create(null);var n=("string"==typeof e?e:r.text||"",v.default.instance),i=n.layer,o=new y.default(i.stage,i,r,w.default.getExtraCreateParams());return i.addChild(o),n.registerElement(o),o},e.createGlowFilter=function(e,t,r,n,i,o,a,s){void 0===e&&(e=16711680),void 0===t&&(t=1),void 0===r&&(r=6),void 0===n&&(n=6),void 0===i&&(i=2),void 0===o&&(o=u.default.LOW),void 0===a&&(a=!1),void 0===s&&(s=!1);var c=v.default.instance.layer.stage.$worldRenderer;return new l.default(c.filterManager,e,t,r,n,i,o,a,s)},e.createBlurFilter=function(e,t,r){void 0===e&&(e=4),void 0===t&&(t=4),void 0===r&&(r=u.default.LOW);var n=v.default.instance.layer.stage.$worldRenderer;return new s.default(n.filterManager,e,t,r)},e.toIntVector=function(e){return Object.defineProperty(e,"as3Type",{get:function(){return"Vector.<int>"}}),e},e.toUIntVector=function(e){return Object.defineProperty(e,"as3Type",{get:function(){return"Vector.<uint>"}}),e},e.toNumberVector=function(e){return Object.defineProperty(e,"as3Type",{get:function(){return"Vector.<number>"}}),e},e.createVector3D=function(e,t,r,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),new c.default(e,t,r,n)},e.createMatrix3D=function(e){return void 0===e&&(e=null),new f.default(e)},e.createColorTransform=function(){return new d.default},e.createTextFormat=function(){return new h.default},e.createGraphic=function(){throw new g.default},e.projectVector=function(e,t){return e.transformVector(t)},e.projectVectors=function(e,t,r,n){for(void 0===n&&(n=null);r.length>0;)r.pop();if(t.length%3!==0)return void p.default.trace("Display.projectVectors input vertex Vector must be a multiple of 3.");var i=[];e.transformVectors(t,i);for(var o=0;o<i.length/3;o++){var a=i[3*o],u=i[3*o+1];r.push(a,u)}},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=P},{"../../../../lib/glantern/src/gl/flash/errors/NotSupportedError":52,"../../../../lib/glantern/src/gl/flash/filters/BitmapFilterQuality":58,"../../../../lib/glantern/src/gl/flash/filters/BlurFilter":59,"../../../../lib/glantern/src/gl/flash/filters/GlowFilter":60,"../../../../lib/glantern/src/gl/flash/geom/ColorTransform":62,"../../../../lib/glantern/src/gl/flash/geom/Matrix":63,"../../../../lib/glantern/src/gl/flash/geom/Matrix3D":64,"../../../../lib/glantern/src/gl/flash/geom/Point":67,"../../../../lib/glantern/src/gl/flash/geom/Vector3D":70,"../../../../lib/glantern/src/gl/flash/text/TextFormat":89,"../../../../lib/glantern/src/gl/mic/CommonUtil":102,"../../../../lib/glantern/src/gl/mic/VirtualDom":107,"../../danmaku/scripted/ScriptedDanmakuProvider":186,"../../danmaku/scripted/dco/DCButton":187,"../../danmaku/scripted/dco/DCCanvas":188,"../../danmaku/scripted/dco/DCOHelper":189,"../../danmaku/scripted/dco/DCShape":190,"../../mic/Engine":208,"./CommentField":160}],162:[function(e,t,r){"use strict";function n(e){console.debug(e)}function i(){throw new f.default}function o(){return h.default.instance.elapsedMillis}function a(e,t){return p.default.setTimeout(e,t)}function u(e,t,r){void 0===r&&(r=1);var n="string"==typeof e?Function(e):e,i=0,o=p.default.setInterval(function(){++i,n(),r>0&&i>=r&&p.default.clearInterval(o)},t);return o}function l(e,t){if(e)for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])}function s(e){return d.default.deepClone(e)}function c(e,t){var r=["libBitmap","libStorage"],n=r.indexOf(e);if(n>=0)switch(n){case 0:break;case 1:}throw new f.default}var f=e("../../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),d=e("../../../../lib/glantern/src/gl/mic/CommonUtil"),h=e("../../mic/Engine"),p=e("../../../../lib/glantern/src/gl/mic/VirtualDom");r.trace=n,r.clear=i,r.getTimer=o,r.timer=a,r.interval=u,r.foreach=l,r.clone=s,r.load=c},{"../../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51,"../../../../lib/glantern/src/gl/mic/CommonUtil":102,"../../../../lib/glantern/src/gl/mic/VirtualDom":107,"../../mic/Engine":208}],163:[function(e,t,r){"use strict";var n=new Map,i=function(){function e(){}
return e._set=function(e,t){n.set(e,t)},e._get=function(e){n.get(e)},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{}],164:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"NONE",{get:function(){return"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BACK",{get:function(){return"Back"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BOUNCE",{get:function(){return"Bounce"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CIRCULAR",{get:function(){return"Circular"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CUBIC",{get:function(){return"Cubic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ELASTIC",{get:function(){return"Elastic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EXPONENTIAL",{get:function(){return"Exponential"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SINE",{get:function(){return"Sine"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"QUINTIC",{get:function(){return"Quintic"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LINEAR",{get:function(){return"Linear"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],165:[function(e,t,r){"use strict";var n=e("../../interactive/video/VideoPlayerState"),i=e("./PlayerState"),o=e("../../../../lib/glantern/src/gl/flash/media/Sound"),a=e("../../../../lib/glantern/src/gl/mic/CommonUtil"),u=e("../../../../lib/glantern/src/gl/flash/net/URLRequest"),l=e("../../danmaku/scripted/ScriptedDanmakuProvider"),s=e("../../../../lib/glantern/src/gl/mic/VirtualDom"),c=e("../../../../lib/glantern/src/gl/flash/errors/NotSupportedError"),f=e("../../mic/Engine"),d=e("../BiliApiContract"),h=function(){function e(){}return e.play=function(){var t=e._videoPlayer;t&&t.play()},e.pause=function(){var t=e._videoPlayer;t&&t.pause()},e.seek=function(t){var r=e._videoPlayer;r&&(r.currentTime=t)},e.jump=function(e,t,r){void 0===t&&(t=1),void 0===r&&(r=!1);var n=a.default.formatString("http://www.bilibili.com/video/{0}/index_{1}.html",e,t);r?s.default.openWindow(n,"_blank"):s.default.assignLocation(n)},Object.defineProperty(e,"state",{get:function(){var t=e._videoPlayer;if(null===t)return i.default.INVALID;var r=t.state;switch(r){case n.default.Playing:case n.default.Seeking:return i.default.PLAYING;case n.default.Paused:return i.default.PAUSE;case n.default.Created:case n.default.Initialized:case n.default.Loaded:case n.default.Stopped:return i.default.STOP;default:return i.default.INVALID}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"time",{get:function(){return f.default.instance.videoMillis},enumerable:!0,configurable:!0}),e.commentTrigger=function(e,t){return void 0===t&&(t=1e3),d.default.ScriptManager.addCommentTrigger(e,t)},e.keyTrigger=function(e,t,r){return void 0===t&&(t=1e3),void 0===r&&(r=!1),d.default.ScriptManager.addKeyTrigger(e,t,r)},e.setMask=function(e){l.default.instance.layer.mask=e},e.createSound=function(e,t){void 0===t&&(t=null);var r=new u.default(e),n=new o.default(r);if(a.default.isFunction(t)){var i=function(){return function(){t(),n.removeEventListener(o.default.COMPLETE,i)}}();n.addEventListener(o.default.COMPLETE,i)}return n},Object.defineProperty(e,"commentList",{get:function(){for(var e=[],t=f.default.instance.danmakuController.getProviders(),r=0;r<t.length;++r)for(var n=t[r],i=0;i<n.fullDanmakuList.length;++i)e.push(n.fullDanmakuList[i].getCommentData());return e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"refreshRate",{get:function(){return 1/f.default.instance.fps},set:function(e){throw new c.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"width",{get:function(){return f.default.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"height",{get:function(){return f.default.instance.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"videoWidth",{get:function(){var t=e._videoPlayer;return t?t.videoWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"videoHeight",{get:function(){var t=e._videoPlayer;return t?t.videoHeight:0},enumerable:!0,configurable:!0}),e.$init=function(){e._videoPlayer=f.default.instance.videoPlayer},e}();h._videoPlayer=null,Object.defineProperty(r,"__esModule",{value:!0}),r.default=h},{"../../../../lib/glantern/src/gl/flash/errors/NotSupportedError":52,"../../../../lib/glantern/src/gl/flash/media/Sound":73,"../../../../lib/glantern/src/gl/flash/net/URLRequest":78,"../../../../lib/glantern/src/gl/mic/CommonUtil":102,"../../../../lib/glantern/src/gl/mic/VirtualDom":107,"../../danmaku/scripted/ScriptedDanmakuProvider":186,"../../interactive/video/VideoPlayerState":203,"../../mic/Engine":208,"../BiliApiContract":157,"./PlayerState":166}],166:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"PLAYING",{get:function(){return"playing"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STOP",{get:function(){return"stop"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PAUSE",{get:function(){return"pause"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INVALID",{get:function(){return"invalid"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],167:[function(e,t,r){"use strict";function n(e){for(var t=l.default.instance.elapsedMillis,r=s,n=0;n<r.length;++n){var i=r[n];t>i.timestamp+i.timeout&&(o.default.removeAt(r,n),--n),i.func(e)}}function i(e){for(var t=l.default.instance.elapsedMillis,r=c,n=0;n<r.length;++n){var i=r[n];if(t>i.timestamp+i.timeout&&(o.default.removeAt(r,n),--n),e.keyUp===i.up){var a=e.keyCode,u=96<=a&&a<=105||33<=a&&a<=40;if(!u)continue;i.func(a)}}}var o=e("../../../../lib/glantern/src/gl/mic/CommonUtil"),a=e("../../mic/bulletproof/events/BPEvents"),u=e("../../danmaku/scripted/ScriptedDanmakuProvider"),l=e("../../mic/Engine"),s=[],c=[],f=[],d=function(){function e(){}return e.addCommentTrigger=function(e,t){if(!o.default.isFunction(e))return-1;for(var r=s,n=0;n<r.length;++n)if(r[n].func===e)return-1;var i={timestamp:l.default.instance.elapsedMillis,timeout:t,func:e};return r.push(i),r.length-1},e.addKeyTrigger=function(e,t,r){if(!o.default.isFunction(e))return-1;for(var n=c,i=0;i<n.length;++i)if(n[i].func===e)return-1;var a={up:r,timestamp:l.default.instance.elapsedMillis,timeout:t,func:e};return n.push(a),n.length-1},e.addTimer=function(e){var t=f;t.indexOf(e)<0&&t.push(e)},e.clearTimer=function(){for(var e=f,t=0;t<e.length;++t)e[t].dispose();for(;e.length>0;)e.pop()},e.clearEl=function(){for(var e=u.default.instance.layer;e.numChildren>0;){var t=e.getChildAt(0);e.removeChildAt(0),t.dispose()}},e.clearTrigger=function(){var e=l.default.instance;e.removeEventListener(a.default.COMMENT_ADDED,n),e.removeEventListener(a.default.COMMENT_KEY,i);for(var t=[s,c],r=0;r<t.length;++r){var o=t[r];o.splice(0,o.length)}},e.$init=function(){var e=l.default.instance;e.addEventListener(a.default.COMMENT_ADDED,n),e.addEventListener(a.default.COMMENT_KEY,i)},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=d},{"../../../../lib/glantern/src/gl/mic/CommonUtil":102,"../../danmaku/scripted/ScriptedDanmakuProvider":186,"../../mic/Engine":208,"../../mic/bulletproof/events/BPEvents":210}],168:[function(e,t,r){"use strict";var n=e("../../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),i=function(){function e(){}return e.loadRank=function(e,t){throw void 0===t&&(t=null),new n.default},e.uploadScore=function(e,t,r,i){throw void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=null),new n.default},e.saveData=function(e,t,r){throw void 0===t&&(t=null),void 0===r&&(r=null),new n.default},e.loadData=function(e,t){throw void 0===e&&(e=null),void 0===t&&(t=null),new n.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51}],169:[function(e,t,r){"use strict";var n=e("../../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),i=function(){function e(){}return e.prototype.tween=function(e,t,r,i,o){throw new n.default},e.prototype.to=function(e,t,r,i){throw new n.default},e.prototype.bezier=function(e,t,r,i){throw new n.default},e.prototype.scale=function(e,t){throw new n.default},e.prototype.delay=function(e,t){throw new n.default},e.prototype.reverse=function(e){throw new n.default},e.prototype.repeat=function(e,t){throw new n.default},e.prototype.slice=function(e,t,r){throw new n.default},e.prototype.serial=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];throw new n.default},e.prototype.parallel=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];throw new n.default},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51}],170:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../lib/glantern/src/gl/fl/transitions/Tween"),o=e("../../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),a=function(e){function t(t,r,n,i,o,a,u){void 0===u&&(u=!1);var l=e.call(this,t,r,n,i,o,a,u)||this;return l.stopOnComplete=!0,l}return n(t,e),t.prototype.play=function(){throw new o.default},t.prototype.stop=function(){throw new o.default},t.prototype.gotoAndPlay=function(e){throw new o.default},t.prototype.gotoAndStop=function(e){throw new o.default},t.prototype.togglePause=function(){throw new o.default},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../../../lib/glantern/src/gl/fl/transitions/Tween":2,"../../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51}],171:[function(e,t,r){"use strict";var n=e("../../../../lib/glantern/src/gl/mic/MathUtil"),i=e("../../../../lib/glantern/src/gl/mic/glantern/GLUtil"),o=e("../BiliApiContract"),a=new Date,u=function(){function e(){}return e.hue=function(e){e%=360;var t=e/60*255,r=n.default.clamp(510-t,0,255),i=n.default.clamp(e<180?t:t-510,0,255),o=n.default.clamp(e<180?t-510:t,0,255);return 255<<24|r<<16|i<<8|o},e.rgb=function(e,t,r){return i.default.rgb(e,t,r)},e.formatTimes=function(e){return a.setTime(1e3*e),a.toLocaleString()},e.delay=function(e,t){return o.default.timer(e,t)},e.interval=function(e,t,r){return o.default.interval(e,t,r)},e.distance=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},e.rand=function(e,t){return console.assert(e<t,"'max' must be bigger than 'min'."),Math.random()*(t-e)+e},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../../../lib/glantern/src/gl/mic/MathUtil":106,"../../../../lib/glantern/src/gl/mic/glantern/GLUtil":108,"../BiliApiContract":157}],172:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}var i=e("./Display");r.Display=i.default;var o=e("./Global");r.Global=o.default;var a=e("./Utils");r.Utils=a.default;var u=e("./Storage");r.Storage=u.default;var l=e("./CommentBitmap");r.CommentBitmap=l.default;var s=e("./Bitmap");r.Bitmap=s.default;var c=e("./ScriptManager");r.ScriptManager=c.default;var f=e("./Tween");r.Tween=f.default;var d=e("./TweenImpl");r.TweenImpl=d.default;var h=e("./Player");r.Player=h.default;var p=e("./PlayerState");r.PlayerState=p.default;var _=e("./MotionEasing");r.MotionEasing=_.default;var g=e("./CommentField");r.CommentField=g.default,n(e("./Functions"))},{"./Bitmap":158,"./CommentBitmap":159,"./CommentField":160,"./Display":161,"./Functions":162,"./Global":163,"./MotionEasing":164,"./Player":165,"./PlayerState":166,"./ScriptManager":167,"./Storage":168,"./Tween":169,"./TweenImpl":170,"./Utils":171}],173:[function(e,t,r){"use strict";var n=e("./BiliApiContract");r.DanmakuApiContainer=n.default;var i=e("./danmaku_api/index");r.danmaku_api=i;var o=e("./xml/index");r.xml=o},{"./BiliApiContract":157,"./danmaku_api/index":172,"./xml/index":175}],174:[function(e,t,r){"use strict";var n=new DOMParser,i=function(){function e(){}return e.parse=function(t){for(var r=n.parseFromString(t,"text/xml"),i=r.childNodes[0],o=i.childNodes.length,a=[],u=0;u<o;++u){var l=i.childNodes[u];switch(l.nodeName){case"d":var s=e.__parseNode(l);s&&a.push(s)}}return a.sort(function(e,t){return e.bornTime-t.bornTime}),a},e.__parseNode=function(e){var t=e.attributes.getNamedItem("p");if(!t)return null;var r=t.value,n=r.split(","),i=parseInt(n[1]);if(8!==i)return null;var o=Object.create(null);return o.bornTime=parseFloat(n[0]),o.mode=parseInt(n[1]),o.color=parseInt(n[2]),o.date=parseInt(n[3]),o.pool=parseInt(n[4]),o.senderCrc=n[5],o.id=parseInt(n[6]),o.text=e.textContent,o},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{}],175:[function(e,t,r){"use strict";var n=e("./BiliXmlParser");r.BiliXmlParser=n.default},{"./BiliXmlParser":174}],176:[function(e,t,r){"use strict";var n=e("./index");!function(e){e.Bulletproof=n}(window||{})},{"./index":199}],177:[function(e,t,r){"use strict";var n=e("./DanmakuProviderFlag"),i=function(){function e(e){this.enabled=!0,this.visible=!0,this._danmakuProviders=null,this._engine=null,this._engine=e,this._danmakuProviders=new Map}return e.prototype.dispose=function(){this._danmakuProviders.forEach(function(e){e.dispose()}),this._danmakuProviders.clear(),this._danmakuProviders=null},e.prototype.shouldCreateDanmaku=function(e){var t=!0,r=0,i=this.engine.options.globalDanmakuCountThreshold;return this._danmakuProviders.forEach(function(o){t&&0===(e.flags&n.default.UnlimitedCreation)&&(r+=o.displayingDanmakuList.length,r>i&&(t=!1))}),t},e.prototype.addProvider=function(e){e&&!this._danmakuProviders.has(e.danmakuKind)&&(this._danmakuProviders.set(e.danmakuKind,e),e.initialize())},e.prototype.removeProvider=function(e){e&&this._danmakuProviders.has(e.danmakuKind)&&this._danmakuProviders.delete(e.danmakuKind)},e.prototype.getProvider=function(e){var t=this._danmakuProviders.get(e);return t?t:null},e.prototype.getProviders=function(){var e=[];return this._danmakuProviders.forEach(function(t){e.push(t)}),e},e.prototype.update=function(e){this.enabled&&this._danmakuProviders.forEach(function(t){t.update(e)})},e.prototype.render=function(e){!this.visible},e.prototype.$update=function(e){this.update(e)},e.prototype.$render=function(e){this.render(e)},Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e.prototype.getNextAvailablePool=function(){return this._danmakuProviders.size},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./DanmakuProviderFlag":181}],178:[function(e,t,r){"use strict";var n;!function(e){e[e.Simple=0]="Simple",e[e.Mode7=7]="Mode7",e[e.Scripted=8]="Scripted"}(n||(n={})),Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],179:[function(e,t,r){"use strict";var n=e("../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),i=function(){function e(e){this._danmakuProvider=null,this._engine=null,this._danmakuProvider=e,this._engine=e.engine}return e.prototype.initialize=function(){},e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"danmakuKind",{get:function(){throw new n.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51}],180:[function(e,t,r){"use strict";var n=e("./DanmakuProviderFlag"),i=e("../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),o=function(){function e(e){this._displayingDanmakuList=null,this._controller=null,this._layoutManager=null,this._layer=null,this._engine=null,this._pool=-1,this._controller=e,this._displayingDanmakuList=[],this._engine=e.engine,this._pool=e.getNextAvailablePool()}return Object.defineProperty(e.prototype,"danmakuKind",{get:function(){throw new i.default},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.layoutManager.initialize()},e.prototype.update=function(e){this.updateDisplayingDanmakuList(e),this.layoutManager.performLayout(e)},e.prototype.addDanmaku=function(e,t){if(this.controller.shouldCreateDanmaku(this)){var r=this._$addDanmaku(e,t);return this.engine.raiseCommentEvent(r.getCommentData()),r}return null},Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayingDanmakuList",{get:function(){return this._displayingDanmakuList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullDanmakuList",{get:function(){throw new i.default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controller",{get:function(){return this._controller},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return n.default.None},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pool",{get:function(){return this._pool},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51,"./DanmakuProviderFlag":181}],181:[function(e,t,r){"use strict";var n;!function(e){e[e.None=0]="None",e[e.UnlimitedCreation=1]="UnlimitedCreation"}(n||(n={})),Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],182:[function(e,t,r){"use strict";var n=e("./DanmakuController");r.DanmakuController=n.default;var i=e("./DanmakuKind");r.DanmakuKind=i.default;var o=e("./DanmakuLayoutManagerBase");r.DanmakuLayoutManagerBase=o.default;var a=e("./DanmakuProviderBase");r.DanmakuProviderBase=a.default;var u=e("./scripted/index");r.scripted=u},{"./DanmakuController":177,"./DanmakuKind":178,"./DanmakuLayoutManagerBase":179,"./DanmakuProviderBase":180,"./scripted/index":193}],183:[function(e,t,r){"use strict";var n=e("../DanmakuKind"),i=function(){function e(e,t){this._content=null,this._bornTime=0,this._engine=null,this._layoutManager=null,this._danmakuProvider=null,this._layer=null,this._createParams=null,this._isExecuted=!1,this._layoutManager=e,this._danmakuProvider=e.danmakuProvider,this._engine=e.engine,this._createParams=t,this._layer=this.danmakuProvider.layer}return e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"danmakuKind",{get:function(){return n.default.Scripted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),e.prototype.getContent=function(){return this._content},e.prototype.getText=function(){return""},Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,t){this._content=e,this._bornTime="number"==typeof this.createParams.bornTime?this.createParams.bornTime:t},Object.defineProperty(e.prototype,"isExecuted",{get:function(){return this._isExecuted},enumerable:!0,configurable:!0}),e.prototype.execute=function(){this.isExecuted||e.__censor()&&(this.__runInVM(),this._isExecuted=!0)},Object.defineProperty(e.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bornTime",{get:function(){return this._bornTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lifeTime",{get:function(){return this.engine.options.codeDanmakuLifeTimeSecs},enumerable:!0,configurable:!0}),e.prototype.getCommentData=function(){return{txt:this.getContent(),time:this.bornTime.toString(),color:0,pool:this.danmakuProvider.pool,mode:8,fontSize:0}},e.__censor=function(){return!0},e.prototype.__runInVM=function(){this.danmakuProvider.eval(this.getContent())},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"../DanmakuKind":178}],184:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../lib/glantern/src/gl/flash/display/DisplayObjectContainer"),o=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t.prototype._$update=function(e){},t.prototype._$render=function(e){},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../../../lib/glantern/src/gl/flash/display/DisplayObjectContainer":27}],185:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../DanmakuLayoutManagerBase"),o=e("../DanmakuKind"),a=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.performLayout=function(e){},t.prototype.onStageResize=function(e,t){},Object.defineProperty(t.prototype,"danmakuProvider",{get:function(){return this._danmakuProvider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danmakuKind",{get:function(){return o.default.Scripted},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../DanmakuKind":178,"../DanmakuLayoutManagerBase":179}],186:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("vm"),o=e("../DanmakuProviderBase"),a=e("../DanmakuKind"),u=e("./ScriptedDanmakuLayoutManager"),l=e("./ScriptedDanmaku"),s=e("../DanmakuProviderFlag"),c=e("./ScriptedDanmakuLayer"),f=e("../../../../lib/glantern/src/gl/mic/CommonUtil"),d=e("../../bilibili/BiliApiContract"),h=e("../../../../lib/glantern/src/gl/flash/errors/ApplicationError"),p=e("../../bilibili/danmaku_api/ScriptManager"),_=e("../../bilibili/danmaku_api/Player"),g=function(e){function t(r){var n=e.call(this,r)||this;if(n._scriptContext=null,n._createdElements=null,t.instance)throw new h.default("A ScriptedDanamkuProvider is already created.");return n._layoutManager=new u.default(n),n._createdElements=[],n._scriptContext=i.createContext(d.default),t._instance=n,p.default.$init(),_.default.$init(),n}return n(t,e),t.prototype.eval=function(e){i.runInContext(e,this._scriptContext)},Object.defineProperty(t.prototype,"danmakuKind",{get:function(){return a.default.Scripted},enumerable:!0,configurable:!0}),t.prototype.addDanmaku=function(t,r){return e.prototype.addDanmaku.call(this,t,r)},t.prototype.dispose=function(){for(var e=this.layer;e.numChildren>0;){var t=e.getChildAt(0);e.removeChildAt(0),t.dispose()}e.parent.removeChild(this.layer),e.dispose(),this.layoutManager.dispose(),this._layoutManager=null;for(var r=this.displayingDanmakuList,n=0;n<r.length;++n)r[n].dispose();for(;r.length>0;)r.pop();this._layer=null,this._displayingDanmakuList=null},t.prototype.initialize=function(){e.prototype.initialize.call(this);var t=this.engine.stage;this._layer=new c.default(t,t),t.addChild(this.layer)},t.prototype.canCreateDanmaku=function(e){return!0},t.prototype.removeDanmaku=function(e){var t=this.displayingDanmakuList.indexOf(e);return!(t<0)&&(f.default.removeAt(this.displayingDanmakuList,t),e.dispose(),!0)},t.prototype.isDanmakuDead=function(e,t){var r=e.millisOfVideo;return r<t.bornTime?t.isExecuted:t.bornTime+1e3*t.lifeTime<r},t.prototype.update=function(t){e.prototype.update.call(this,t);for(var r=t.millisOfVideo,n=0;n<this.displayingDanmakuList.length;++n){var i=this.displayingDanmakuList[n];!i.isExecuted&&r>=i.bornTime&&i.execute()}this.__removeDeadDCObjects(),this.__applyMotionGroups()},t.prototype.updateDisplayingDanmakuList=function(e){for(var t=0;t<this.displayingDanmakuList.length;++t){var r=this.displayingDanmakuList[t];this.isDanmakuDead(e,r)&&(this.removeDanmaku(r),--t)}},Object.defineProperty(t.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayingDanmakuList",{get:function(){return this._displayingDanmakuList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullDanmakuList",{get:function(){return this._displayingDanmakuList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return s.default.UnlimitedCreation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scriptContext",{get:function(){return this._scriptContext},enumerable:!0,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t.prototype.registerElement=function(e){this._createdElements.indexOf(e)<0&&this._createdElements.push(e)},t.prototype._$addDanmaku=function(e,t){t||(t=f.default.deepClone(this.engine.options));var r=new l.default(this.layoutManager,t);return r.initialize(e,this.engine.videoMillis),this.displayingDanmakuList.push(r),r},t.prototype.__applyMotionGroups=function(){for(var e=this.engine.videoMillis,r=this._createdElements,n=0;n<r.length;++n){var i=r[n];i.isCreatedByDanmaku&&(i.createParams.motion?t.__applyMotion(i.createParams.motion,e):i.createParams.motionGroup&&t.__applyMotionGroup(i.createParams.motionGroup,e))}},t.__applyMotionGroup=function(e,r){if(e)for(var n=0;n<e.length;++n){var i=e[n];t.__applyMotion(i,r)}},t.__applyMotion=function(e,t){var r=["x","y","alpha","rotationZ","rotationY"];if(e.createdTime<=t&&t<=e.createdTime+e.maximumLifeTime)for(var n=0;n<r.length;++n){var i=e[r[n]];if(i){var o=t-e.createdTime;if(f.default.isUndefined(i.startDelay)||(o-=i.startDelay),o<=1e3*i.lifeTime){var a=i.fromValue+(i.toValue-i.fromValue)/(1e3*i.lifeTime)*o;e.sourceObject[r[n]]=a}}}},t.prototype.__removeDeadDCObjects=function(){for(var e=this.engine,t=this._createdElements,r=0;r<t.length;++r){var n=t[r];n.isCreatedByDanmaku&&n.extraCreateParams.bornTime+1e3*n.createParams.lifeTime<e.videoMillis&&(f.default.removeAt(this._createdElements,r),n.parent.removeChild(n),n.dispose(),--r)}},t}(o.default);g._instance=null,Object.defineProperty(r,"__esModule",{value:!0}),r.default=g},{"../../../../lib/glantern/src/gl/flash/errors/ApplicationError":47,"../../../../lib/glantern/src/gl/mic/CommonUtil":102,"../../bilibili/BiliApiContract":157,"../../bilibili/danmaku_api/Player":165,"../../bilibili/danmaku_api/ScriptManager":167,"../DanmakuKind":178,"../DanmakuProviderBase":180,"../DanmakuProviderFlag":181,"./ScriptedDanmaku":183,"./ScriptedDanmakuLayer":184,"./ScriptedDanmakuLayoutManager":185,vm:234}],187:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../fl/controls/Button"),o=e("./DCOHelper"),a=e("../../../mic/Engine"),u=function(e){function t(t,r,n,i){var u=e.call(this,t,r)||this;return u._extraCreateParams=null,u._createParams=null,u._createParams=o.default.fillInCreateParams(a.default.instance,u,n),u._extraCreateParams=i,o.default.applyGeneralCreateParams(u,u._createParams),u}return n(t,e),Object.defineProperty(t.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraCreateParams",{get:function(){return this._extraCreateParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCreatedByDanmaku",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../../fl/controls/Button":194,"../../../mic/Engine":208,"./DCOHelper":189}],188:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../../lib/glantern/src/gl/mx/containers/Canvas"),o=e("./DCOHelper"),a=e("../../../mic/Engine"),u=function(e){function t(t,r,n,i){var u=e.call(this,t,r)||this;return u._extraCreateParams=null,u._createParams=null,u._createParams=o.default.fillInCreateParams(a.default.instance,u,n),u._extraCreateParams=i,o.default.applyGeneralCreateParams(u,u._createParams),u}return n(t,e),Object.defineProperty(t.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraCreateParams",{get:function(){return this._extraCreateParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCreatedByDanmaku",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../../../../lib/glantern/src/gl/mx/containers/Canvas":111,"../../../mic/Engine":208,"./DCOHelper":189}],189:[function(e,t,r){"use strict";var n=e("../../../mic/Engine"),i=e("../../../../../lib/glantern/src/gl/mic/CommonUtil"),o=function(){function e(){}return e.fillInCreateParams=function(e,t,r){function n(t){for(var r=["x","y","alpha","rotationZ","rotationY"],n=0,o=0,a=0;a<r.length;++a){var u=t[r[a]];u&&(i.default.isUndefined(u.lifeTime)&&(u.lifeTime=1e3*e.options.codeDanmakuLifeTimeSecs),n="number"==typeof u.startDelay?Math.max(n,1e3*u.lifeTime+u.startDelay):Math.max(n,1e3*u.lifeTime),o=Math.max(o,1e3*u.lifeTime))}return{maxLife:n,literalMaxLife:o}}var o=Object.create(null);o.color=r.color,o.alpha=r.alpha,o.fontsize=r.fontsize,o.lifeTime=void 0!==r.lifeTime?r.lifeTime:Number.MAX_VALUE,o.parent=r.parent,o.x=r.x,o.y=r.y,r.motion&&r.motionGroup&&console.warn("'motion' and 'motionGroup' are both set!");var a=e.videoMillis;if(r.motion){var u=r.motion;u.sourceObject=t,u.createdTime=a;var l=n(u);u.maximumLifeTime=l.maxLife}if(r.motionGroup)for(var s=0;s<r.motionGroup.length;++s){var u=r.motionGroup[s];u.sourceObject=t,u.createdTime=a;var l=n(u);u.maximumLifeTime=l.maxLife,a+=l.literalMaxLife}o.motion=r.motion,o.motionGroup=r.motionGroup;var c=["color","alpha","fontsize","lifeTime","parent","x","y","motion","motionGroup"];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&c.indexOf(f)<0&&(o[f]=r[f]);return o},e.applyGeneralCreateParams=function(e,t){i.default.isUndefined(t.alpha)||(e.alpha=t.alpha),i.default.isUndefined(t.x)||(e.x=t.x),i.default.isUndefined(t.y)||(e.y=t.y)},e.applyButtonCreateParams=function(t,r){e.applyGeneralCreateParams(t,r)},e.getExtraCreateParams=function(){return{bornTime:n.default.instance.elapsedMillis}},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../../../../lib/glantern/src/gl/mic/CommonUtil":102,"../../../mic/Engine":208}],190:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./DCOHelper"),o=e("../../../../../lib/glantern/src/gl/flash/display/Shape"),a=e("../../../mic/Engine"),u=function(e){function t(t,r,n,o){var u=e.call(this,t,r)||this;return u._extraCreateParams=null,u._createParams=null,
u._createParams=i.default.fillInCreateParams(a.default.instance,u,n),u._extraCreateParams=o,i.default.applyGeneralCreateParams(u,u._createParams),u}return n(t,e),Object.defineProperty(t.prototype,"createParams",{get:function(){return this._createParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraCreateParams",{get:function(){return this._extraCreateParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCreatedByDanmaku",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../../../../lib/glantern/src/gl/flash/display/Shape":38,"../../../mic/Engine":208,"./DCOHelper":189}],191:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../../lib/glantern/src/gl/flash/utils/Timer"),o=e("../../../../../lib/glantern/src/gl/flash/events/TimerEvent"),a=function(e){function t(t,r,n){void 0===n&&(n=1);var i=e.call(this,r,n)||this;return i._closure=null,i._funcSource=null,i._closureIsFunction=!1,"string"==typeof t?(i._funcSource=t,i._closure=new Function(i._funcSource),i._closureIsFunction=!1):(i._closure=t,i._closureIsFunction=!0),i.addEventListener(o.default.TIMER,i.__closureTimerHandler.bind(i)),i.addEventListener(o.default.TIMER_COMPLETE,i.__closureTimerCompleteHandler.bind(i)),i}return n(t,e),t.prototype.__closureTimerHandler=function(){try{this._closure()}catch(e){console.error(e)}},t.prototype.__closureTimerCompleteHandler=function(){this._closure=null},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../../../../lib/glantern/src/gl/flash/events/TimerEvent":56,"../../../../../lib/glantern/src/gl/flash/utils/Timer":97}],192:[function(e,t,r){"use strict";var n=e("./DCCanvas");r.DCCanvas=n.default;var i=e("./DCOHelper");r.DCOHelper=i.default;var o=e("./DCShape");r.DCShape=o.default;var a=e("./FiniteTimer");r.FiniteTimer=a.default},{"./DCCanvas":188,"./DCOHelper":189,"./DCShape":190,"./FiniteTimer":191}],193:[function(e,t,r){"use strict";var n=e("./ScriptedDanmaku");r.ScriptedDanmaku=n.default;var i=e("./ScriptedDanmakuLayoutManager");r.ScriptedDanmakuLayoutManager=i.default;var o=e("./ScriptedDanmakuProvider");r.ScriptedDanmakuProvider=o.default;var a=e("./ScriptedDanmakuLayer");r.ScriptedDanmakuLayer=a.default;var u=e("./dco/index");r.dco=u},{"./ScriptedDanmaku":183,"./ScriptedDanmakuLayer":184,"./ScriptedDanmakuLayoutManager":185,"./ScriptedDanmakuProvider":186,"./dco/index":192}],194:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../core/UIComponent"),o=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../core/UIComponent":195}],195:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../lib/glantern/src/gl/flash/display/DisplayObjectContainer"),o=e("../../../../lib/glantern/src/gl/flash/display/Graphics"),a=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._graphics=null,n._styles=null,n._graphics=new o.default(n,t.$worldRenderer),n._styles=new Map,n}return n(t,e),Object.defineProperty(t.prototype,"graphics",{get:function(){return this._graphics},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.graphics.dispose(),this._graphics=null,e.prototype.dispose.call(this)},t.prototype.setStyle=function(e,t){this._styles.set(e,t)},t.prototype.getStyle=function(e){return this._styles.get(e)},t.prototype.move=function(e,t){this.x=e,this.y=t},t.prototype.setSize=function(e,t){this.width=e,this.height=t},t.prototype._$update=function(e){},t.prototype._$render=function(e){this.graphics.$render(e)},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"../../../../lib/glantern/src/gl/flash/display/DisplayObjectContainer":27,"../../../../lib/glantern/src/gl/flash/display/Graphics":29}],196:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../lib/glantern/src/gl/mic/ErrorBase"),o=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"OutOfRangeError"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../../../lib/glantern/src/gl/mic/ErrorBase":104}],197:[function(e,t,r){"use strict";var n=e("./OutOfRangeError");r.OutOfRangeError=n.default},{"./OutOfRangeError":196}],198:[function(e,t,r){"use strict";var n=e("./errors/index");r.errors=n},{"./errors/index":197}],199:[function(e,t,r){"use strict";function n(e,t){for(var r in t)e.hasOwnProperty(r)?n(e[r],t[r]):e[r]=t[r]}var i="0.6.0-alpha";r.version=i;var o="Bulletproof/"+i+" (BiliBili, like BSE, like CCL, like Flash)";r.userAgent=o;var a=e("./bilibili/index");r.bilibili=a;var u=e("./danmaku/index");r.danmaku=u;var l=e("./interactive/index");r.interactive=l;var s=e("./mic/index");r.mic=s;var c=e("../../lib/glantern/src/gl/index"),f=e("./flash/index"),d=s.DefaultEngineOptions;r.defaultOptions=d;var h=s.Engine;r.Engine=h;var p=c.flash;r.flash=p;var _=c.fl;r.fl=_;var g=c.mx;r.mx=g;var b=c.mic,y=c.webgl;r.webgl=y;var m=c.injectToGlobal;r.injectToGlobal=m;var v=c.isSupported;r.isSupported=v;var w=c.checkSupportStatus;r.checkSupportStatus=w,n(p,f),n(s,b)},{"../../lib/glantern/src/gl/index":99,"./bilibili/index":173,"./danmaku/index":182,"./flash/index":198,"./interactive/index":200,"./mic/index":215}],200:[function(e,t,r){"use strict";var n=e("./video/index");r.video=n},{"./video/index":206}],201:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./VideoPlayerState"),o=e("../../../../lib/glantern/src/gl/flash/errors/NotImplementedError"),a=e("../../../../lib/glantern/src/gl/flash/events/EventDispatcher"),u=function(e){function t(){return e.call(this)||this}return n(t,e),Object.defineProperty(t.prototype,"currentTime",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentRatio",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoPlay",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultMuted",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPlaybackRate",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){throw new o.default},set:function(e){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateText",{get:function(){return i.default[this.state]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seeking",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileURL",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasVideo",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){throw new o.default},enumerable:!0,configurable:!0}),t}(a.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=u},{"../../../../lib/glantern/src/gl/flash/errors/NotImplementedError":51,"../../../../lib/glantern/src/gl/flash/events/EventDispatcher":54,"./VideoPlayerState":203}],202:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../../../lib/glantern/src/gl/mic/EventBase"),o=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t,"VIDEO_ENDED",{get:function(){return"videoEnded"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VIDEO_PLAY",{get:function(){return"videoPlay"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VIDEO_PAUSE",{get:function(){return"videoPause"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VIDEO_PLAYING",{get:function(){return"videoPlaying"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VIDEO_SEEKED",{get:function(){return"videoSeeked"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VIDEO_SEEKING",{get:function(){return"videoSeeking"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VIDEO_LOADED_DATA",{get:function(){return"videoLoadedData"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VIDEO_TIME_UPDATE",{get:function(){return"videoTimeUpdate"},enumerable:!0,configurable:!0}),t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../../../lib/glantern/src/gl/mic/EventBase":105}],203:[function(e,t,r){"use strict";var n;!function(e){e[e.Invalid=-1]="Invalid",e[e.Created=0]="Created",e[e.Initialized=1]="Initialized",e[e.Loaded=2]="Loaded",e[e.Playing=3]="Playing",e[e.Paused=4]="Paused",e[e.Stopped=5]="Stopped",e[e.Seeking=6]="Seeking"}(n||(n={})),Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],204:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../VideoPlayerBase"),o=e("../VideoPlayerState"),a=e("../../../../../lib/glantern/src/gl/mic/MathUtil"),u=e("../VideoPlayerEvent"),l=e("../../../../../lib/glantern/src/gl/mic/EventBase"),s=e("../../../../../lib/glantern/src/gl/mic/VirtualDom"),c=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this)||this;return r._videoElement=null,r._state=o.default.Invalid,r._originalStateBeforeSeeking=o.default.Invalid,r._eventHandlers=null,t&&t instanceof HTMLVideoElement||(t=s.default.createElement("video")),r._videoElement=t,r._eventHandlers=[],r._state=o.default.Created,r}return n(t,e),t.prototype.initialize=function(e,t){function r(e,t){var r=t.bind(o);i.push({name:e,handler:r}),n.addEventListener(e,r)}var n=this._videoElement,i=this._eventHandlers;n.width=e,n.height=t;var o=this;r("ended",this.__onEnded),r("play",this.__onPlay),r("playing",this.__onPlaying),r("pause",this.__onPause),r("loadeddata",this.__onLoadedData),r("seeked",this.__onSeeked),r("seeking",this.__onSeeking),r("timeupdate",this.__onTimeUpdate)},t.prototype.dispose=function(){for(var t=this.view,r=t.parentElement,n=this._eventHandlers,i=0;i<n.length;++i)t.removeEventListener(n[i].name,n[i].handler);r&&r.removeChild(t),n.splice(0,n.length),this._state=o.default.Invalid,this._videoElement=null,this._eventHandlers=null,e.prototype.dispose.call(this)},t.prototype.load=function(e){if(this._state!==o.default.Invalid){this.unload();try{return this.view.src=e,this._state=o.default.Loaded,!0}catch(e){return!1}}},t.prototype.unload=function(){this.hasVideo&&(this.stop(),this.view.src=null,this._state=o.default.Initialized)},t.prototype.play=function(){this.hasVideo&&(this.view.play(),this._state=o.default.Playing)},t.prototype.pause=function(){this.hasVideo&&(this.view.pause(),this._state=o.default.Paused)},t.prototype.resume=function(){this.hasVideo&&this._state===o.default.Paused&&this.play()},t.prototype.stop=function(){this.hasVideo&&(this.view.pause(),this.view.currentTime=0,this._state=o.default.Stopped)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.hasVideo?this.view.currentTime:0},set:function(e){this.hasVideo&&(this.view.currentTime=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentRatio",{get:function(){return this.hasVideo?this.currentTime/this.duration:0},set:function(e){this.hasVideo&&(e=a.default.clamp(e,0,1),this.currentTime=e*this.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.hasVideo?this.view.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoPlay",{get:function(){var e=this.view;return!!e&&e.autoplay},set:function(e){var t=this.view;t&&(t.autoplay=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){var e=this.view;return!!e&&e.loop},set:function(e){var t=this.view;t&&(t.loop=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){var e=this.view;return!!e&&e.muted},set:function(e){var t=this.view;t&&(t.muted=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultMuted",{get:function(){var e=this.view;return!!e&&e.defaultMuted},set:function(e){var t=this.view;t&&(t.defaultMuted=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){var e=this.view;return e?e.playbackRate:0},set:function(e){var t=this.view;t&&(t.playbackRate=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPlaybackRate",{get:function(){var e=this.view;return e?e.defaultPlaybackRate:0},set:function(e){var t=this.view;t&&(t.defaultPlaybackRate=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){var e=this.view;return e?e.volume/200:0},set:function(e){var t=this.view;t&&(e=a.default.clamp(e,0,1),t.volume=200*e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this.state===o.default.Playing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.state===o.default.Paused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seeking",{get:function(){var e=this.view;return!!e&&e.seeking},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){var e=this.view;return e?e.videoWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){var e=this.view;return e?e.videoHeight:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileURL",{get:function(){var e=this.view;return e?e.currentSrc:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasVideo",{get:function(){return this.state>o.default.Initialized},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._videoElement},enumerable:!0,configurable:!0}),t.prototype.__onEnded=function(e){this._state=o.default.Stopped,this.dispatchEvent(l.default.create(u.default.VIDEO_ENDED))},t.prototype.__onPlay=function(e){this._state=o.default.Playing,this.dispatchEvent(l.default.create(u.default.VIDEO_PLAY))},t.prototype.__onPause=function(e){this._state=o.default.Paused,this.dispatchEvent(l.default.create(u.default.VIDEO_PAUSE))},t.prototype.__onPlaying=function(e){this._state=o.default.Playing,this.dispatchEvent(l.default.create(u.default.VIDEO_PLAYING))},t.prototype.__onSeeked=function(e){this._state=this._originalStateBeforeSeeking,this.dispatchEvent(l.default.create(u.default.VIDEO_SEEKED))},t.prototype.__onSeeking=function(e){this._originalStateBeforeSeeking=this._state,this._state=o.default.Seeking,this.dispatchEvent(l.default.create(u.default.VIDEO_SEEKING))},t.prototype.__onLoadedData=function(e){this._state===o.default.Initialized&&(this._state=o.default.Loaded),this.dispatchEvent(l.default.create(u.default.VIDEO_LOADED_DATA))},t.prototype.__onTimeUpdate=function(e){this.dispatchEvent(new u.default(u.default.VIDEO_TIME_UPDATE))},t}(i.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=c},{"../../../../../lib/glantern/src/gl/mic/EventBase":105,"../../../../../lib/glantern/src/gl/mic/MathUtil":106,"../../../../../lib/glantern/src/gl/mic/VirtualDom":107,"../VideoPlayerBase":201,"../VideoPlayerEvent":202,"../VideoPlayerState":203}],205:[function(e,t,r){"use strict";var n=e("./Html5VideoPlayer");r.Html5VideoPlayer=n.default},{"./Html5VideoPlayer":204}],206:[function(e,t,r){"use strict";var n=e("./VideoPlayerBase");r.VideoPlayerBase=n.default;var i=e("./VideoPlayerState");r.VideoPlayerState=i.default;var o=e("./VideoPlayerEvent");r.VideoPlayerEvent=o.default;var a=e("./html5/index");r.html5=a},{"./VideoPlayerBase":201,"./VideoPlayerEvent":202,"./VideoPlayerState":203,"./html5/index":205}],207:[function(e,t,r){"use strict";var n=Object.create(null);Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,n.codeDanmakuLifeTimeSecs=Number.MAX_VALUE,n.globalDanmakuCountThreshold=3e3,n.scriptedDanmakuEnabled=!0,n.videoPlayerEnabled=!0,n.useWebChimeraForVideoPlayback=!1},{}],208:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../danmaku/DanmakuController"),o=e("../danmaku/scripted/ScriptedDanmakuProvider"),a=e("./DefaultEngineOptions"),u=e("../interactive/video/html5/Html5VideoPlayer"),l=e("../../../lib/glantern/src/gl/mic/EngineBase"),s=e("../interactive/video/VideoPlayerEvent"),c=e("../interactive/video/VideoPlayerState"),f=e("../../../lib/glantern/src/gl/mic/CommonUtil"),d=e("../../../lib/glantern/src/gl/mic/VirtualDom"),h=e("./bulletproof/events/CommentKeyEventArgs"),p=e("../../../lib/glantern/src/gl/mic/EventBase"),_=e("./bulletproof/events/BPEvents"),g=e("../../../lib/glantern/src/gl/flash/errors/ApplicationError"),b=function(e){function t(){var r=e.call(this)||this;if(r._videoMillis=0,r._playerReportedVideoMillis=0,r._lastTimeVideoUpdated=-1,r._danmakuController=null,r._videoPlayer=null,r._options=null,r._blackCurtainView=null,t.instance)throw new g.default("Engine is already created.");return r._options=f.default.deepClone(a.default),t._instance=r,r}return n(t,e),t.prototype.initialize=function(t,r,n,a){if(!this.isInitialized){e.prototype.initialize.call(this,t,r,n);var l=this.options,s=new i.default(this);if(this._danmakuController=s,this._blackCurtainView=d.default.createElement("div"),l.videoPlayerEnabled){var c=null;l.useWebChimeraForVideoPlayback?console.warn("WebChimera integration is not implemented yet."):c=new u.default,this._videoPlayer=c,null!==c&&(c.initialize(r,n),this.attachUpdateFunction(this.__updateVideoTime.bind(this)))}if(this.__initHtmlElements(r,n,a),l.scriptedDanmakuEnabled){var f=new o.default(s);s.addProvider(f)}this.__initEventHandlers(),this.attachUpdateFunction(this.__updateDanmakus.bind(this))}},t.prototype.dispose=function(){this.danmakuController.dispose(),this._danmakuController=null,e.prototype.dispose.call(this)},t.prototype.raiseKeyEvent=function(e,t){var r=new h.default(e,t);this.dispatchEvent(p.default.create(_.default.COMMENT_KEY),r)},t.prototype.raiseCommentEvent=function(e){this.dispatchEvent(p.default.create(_.default.COMMENT_ADDED),e)},Object.defineProperty(t.prototype,"danmakuController",{get:function(){return this._danmakuController},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoMillis",{get:function(){return this.options.videoPlayerEnabled?this._videoMillis:this.elapsedMillis},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoPlayer",{get:function(){return this._videoPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoView",{get:function(){return this.videoPlayer?this.videoPlayer.view:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blackCurtainView",{get:function(){return this._blackCurtainView},enumerable:!0,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t.prototype.__updateVideoTime=function(e){this.options.videoPlayerEnabled&&this.videoPlayer.state!==c.default.Playing||(this._videoMillis+=this.elapsedMillis-this._lastTimeVideoUpdated,this._lastTimeVideoUpdated=this.elapsedMillis),e.millisOfVideo=this._videoMillis},t.prototype.__updateDanmakus=function(e){this.danmakuController.update(e)},t.prototype.__initEventHandlers=function(){var e=this._videoPlayer;e&&(e.addEventListener(s.default.VIDEO_TIME_UPDATE,this.__onVideoTimeUpdate.bind(this)),e.addEventListener(s.default.VIDEO_PLAY,this.__onVideoPlay.bind(this)));var t=this.view;t&&(t.addEventListener("mouseenter",this.__onCanvasMouseEnter.bind(this)),t.addEventListener("mouseout",this.__onCanvasMouseLeave.bind(this)),t.addEventListener("mousemove",this.__onCanvasMouseMove.bind(this)),t.addEventListener("click",this.__onCanvasClick.bind(this)))},t.prototype.__initHtmlElements=function(e,t,r){var n=this.blackCurtainView,i=n.style;i.width=e+"px",i.height=t+"px",i.backgroundColor="black",i.position="absolute",i.zIndex="0";var o=this.videoView;if(o){var a=o.style;a.position="absolute",a.zIndex="1"}var u=this.view;u.style.position="absolute",u.style.zIndex="9999",r.appendChild(n),r.appendChild(o),r.appendChild(u)},t.prototype.__onVideoTimeUpdate=function(){this._playerReportedVideoMillis=1e3*this.videoPlayer.currentTime},t.prototype.__onVideoPlay=function(){this._lastTimeVideoUpdated=this.elapsedMillis},t.prototype.__onCanvasMouseEnter=function(e){},t.prototype.__onCanvasMouseLeave=function(e){},t.prototype.__onCanvasMouseMove=function(e){},t.prototype.__onCanvasClick=function(e){},t}(l.default);b._instance=null,Object.defineProperty(r,"__esModule",{value:!0}),r.default=b},{"../../../lib/glantern/src/gl/flash/errors/ApplicationError":47,"../../../lib/glantern/src/gl/mic/CommonUtil":102,"../../../lib/glantern/src/gl/mic/EngineBase":103,"../../../lib/glantern/src/gl/mic/EventBase":105,"../../../lib/glantern/src/gl/mic/VirtualDom":107,"../danmaku/DanmakuController":177,"../danmaku/scripted/ScriptedDanmakuProvider":186,"../interactive/video/VideoPlayerEvent":202,"../interactive/video/VideoPlayerState":203,"../interactive/video/html5/Html5VideoPlayer":204,"./DefaultEngineOptions":207,"./bulletproof/events/BPEvents":210,"./bulletproof/events/CommentKeyEventArgs":211}],209:[function(e,t,r){"use strict";function n(e,t,r){for(var n=e.length,i=0,o=n-1,a=-1;i<o;){a=(i+o)/2|0;var u=r(t,e[a]);if(u>0){if(i=a+1,i>o){a=i;break}}else{if(!(u<0))break;if(o=a-1,o<i){a=i;break}}}if(a>0)do{if(!(r(t,e[a])>=0))break;--a}while(a>0);return a}var i=e("../../flash/errors/OutOfRangeError"),o=function(){function e(){}return e.createNumberArray=function(e,t){void 0===t&&(t=!0),e|=0;var r=new Array(e);if(t)for(var n=0;n<e;++n)r[n]=0;return r},e.insertAt=function(e,t,r){e.splice(r,0,t)},e.binaryInsert=function(t,r,o){if(t.length<=0)return t.push(r),0;var a=t.length;if(o(r,t[0])<=0)return t.unshift(r),0;if(o(r,t[a-1])>0)return t.push(r),a-1;var u=n(t,r,o);if(u<0)throw new i.default("Unexpected sorting result.");return e.insertAt(t,r,u),u},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"../../flash/errors/OutOfRangeError":196}],210:[function(e,t,r){"use strict";var n=function(){function e(){}return Object.defineProperty(e,"COMMENT_KEY",{get:function(){return"commentKey"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"COMMENT_ADDED",{get:function(){return"commentAdded"},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],211:[function(e,t,r){"use strict";var n=function(){function e(e,t){this._keyCode=0,this._keyUp=!1,this._keyCode=e,this._keyUp=t}return Object.defineProperty(e.prototype,"keyCode",{get:function(){return this._keyCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyUp",{get:function(){return this._keyUp},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],212:[function(e,t,r){"use strict";var n=function(){function e(e,t){this._width=0,this._height=0,this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],213:[function(e,t,r){"use strict";var n=e("./BPEvents");r.BPEvents=n.default;var i=e("./StageResizedEventArgs");r.StageResizedEventArgs=i.default;var o=e("./CommentKeyEventArgs");r.CommentKeyEventArgs=o.default},{"./BPEvents":210,"./CommentKeyEventArgs":211,"./StageResizedEventArgs":212}],214:[function(e,t,r){"use strict";var n=e("./BPUtil");r.BPUtil=n.default;var i=e("./events/index");r.events=i},{"./BPUtil":209,"./events/index":213}],215:[function(e,t,r){"use strict";var n=e("./DefaultEngineOptions");r.DefaultEngineOptions=n.default;var i=e("./Engine");r.Engine=i.default;var o=e("./bulletproof/index");r.bulletproof=o},{"./DefaultEngineOptions":207,"./Engine":208,"./bulletproof/index":214}],216:[function(e,t,r){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},{}],217:[function(e,t,r){"use strict";function n(e,t){return e.b===t.b&&e.a===t.a}function i(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function o(e,t,r){var n=t.b-e.b,i=r.b-t.b;return 0<n+i?n<i?t.a-e.a+n/(n+i)*(e.a-r.a):t.a-r.a+i/(n+i)*(r.a-e.a):0}function a(e,t,r){var n=t.b-e.b,i=r.b-t.b;return 0<n+i?(t.a-r.a)*n+(t.a-e.a)*i:0}function u(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function l(e,t,r){var n=t.a-e.a,i=r.a-t.a;return 0<n+i?n<i?t.b-e.b+n/(n+i)*(e.b-r.b):t.b-r.b+i/(n+i)*(r.b-e.b):0}function s(e,t,r){var n=t.a-e.a,i=r.a-t.a;return 0<n+i?(t.b-r.b)*n+(t.b-e.b)*i:0}function c(e){return i(e.b.a,e.a)}function f(e){return i(e.a,e.b.a)}function d(e,t,r,n){return e=0>e?0:e,r=0>r?0:r,e<=r?0===r?(t+n)/2:t+e/(e+r)*(n-t):n+r/(e+r)*(t-n)}function h(e){var t=y(e.b);return v(t,e.c),v(t.b,e.c),w(t,e.a),t}function p(e,t){var r=!1,n=!1;e!==t&&(t.a!==e.a&&(n=!0,O(t.a,e.a)),t.d!==e.d&&(r=!0,x(t.d,e.d)),m(t,e),n||(v(t,e.a),e.a.c=e),r||(w(t,e.d),e.d.a=e))}function _(e){var t=e.b,r=!1;e.d!==e.b.d&&(r=!0,x(e.d,e.b.d)),e.c===e?O(e.a,null):(e.b.d.a=Q(e),e.a.c=e.c,m(e,Q(e)),r||w(e,e.d)),t.c===t?(O(t.a,null),x(t.d,null)):(e.d.a=Q(t),t.a.c=t.c,m(t,Q(t))),P(e)}function g(e){var t=y(e),r=t.b;return m(t,e.e),t.a=e.b.a,v(r,t.a),t.d=r.d=e.d,t=t.b,m(e.b,Q(e.b)),m(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function b(e,t){var r=!1,n=y(e),i=n.b;return t.d!==e.d&&(r=!0,x(t.d,e.d)),m(n,e.e),m(i,t),n.a=e.b.a,i.a=t.a,n.d=i.d=e.d,e.d.a=i,r||w(n,e.d),n}function y(e){var t=new K,r=new K,n=e.b.h;return r.h=n,n.b.h=t,t.h=e,e.b.h=r,t.b=r,t.c=t,t.e=r,r.b=t,r.c=r,r.e=t}function m(e,t){var r=e.c,n=t.c;r.b.e=t,n.b.e=e,e.c=n,t.c=r}function v(e,t){var r=t.f,n=new ee(t,r);r.e=n,t.f=n,r=n.c=e;do r.a=n,r=r.c;while(r!==e)}function w(e,t){var r=t.d,n=new Z(t,r);r.b=n,t.d=n,n.a=e,n.c=t.c,r=e;do r.d=n,r=r.e;while(r!==e)}function P(e){var t=e.h;e=e.b.h,t.b.h=e,e.b.h=t}function O(e,t){var r=e.c,n=r;do n.a=t,n=n.c;while(n!==r);r=e.f,n=e.e,n.f=r,r.e=n}function x(e,t){var r=e.a,n=r;do n.d=t,n=n.e;while(n!==r);r=e.d,n=e.b,n.d=r,r.b=n}function E(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}function S(e,t){e.f+=t.f,e.b.f+=t.b.f}function T(e,t,r){return e=e.a,t=t.a,r=r.a,t.b.a===e?r.b.a===e?i(t.a,r.a)?0>=a(r.b.a,t.a,r.a):0<=a(t.b.a,r.a,t.a):0>=a(r.b.a,e,r.a):r.b.a===e?0<=a(t.b.a,e,t.a):(t=o(t.b.a,e,t.a),e=o(r.b.a,e,r.a),t>=e)}function C(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function M(e,t){_(e.a),e.c=!1,e.a=t,t.i=e}function j(e){var t=e.a.a;do e=pe(e);while(e.a.a===t);return e.c&&(t=b(he(e).a.b,e.a.e),M(e,t),e=pe(e)),e}function R(e,t,r){var n=new de;return n.a=r,n.e=H(e.f,t.e,n),r.i=n}function D(e,t){switch(e.s){case 100130:return 0!==(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return 0>t;case 100134:return 2<=t||-2>=t}return!1}function k(e){var t=e.a,r=t.d;r.c=e.d,r.a=t,C(e)}function A(e,t,r){for(e=t,t=t.a;e!==r;){e.c=!1;var n=he(e),i=n.a;if(i.a!==t.a){if(!n.c){k(e);break}i=b(t.c.b,i.b),M(n,i)}t.c!==i&&(p(Q(i),i),p(t,i)),k(e),t=n.a,e=n}return t}function I(e,t,r,n,i,o){var a=!0;do R(e,t,r.b),r=r.c;while(r!==n);for(null===i&&(i=he(t).a.b.c);n=he(t),r=n.a.b,r.a===i.a;)r.c!==i&&(p(Q(r),r),p(Q(i),r)),n.f=t.f-r.f,n.d=D(e,n.f),t.b=!0,!a&&L(e,t)&&(S(r,i),C(t),_(i)),a=!1,t=n,i=r;t.b=!0,o&&V(e,t)}function F(e,t,r,n,i){var o=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o?e.o(o,r,n,e.c)||null:null,null===t.d&&(i?e.n||(q(e,100156),e.n=!0):t.d=r[0])}function B(e,t,r){var n=[null,null,null,null];n[0]=t.a.d,n[1]=r.a.d,F(e,t.a,n,[.5,.5,0,0],!1),p(t,r)}function U(e,t,r,n,i){var o=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),a=Math.abs(r.b-e.b)+Math.abs(r.a-e.a),u=i+1;n[i]=.5*a/(o+a),n[u]=.5*o/(o+a),e.g[0]+=n[i]*t.g[0]+n[u]*r.g[0],e.g[1]+=n[i]*t.g[1]+n[u]*r.g[1],e.g[2]+=n[i]*t.g[2]+n[u]*r.g[2]}function L(e,t){var r=he(t),o=t.a,u=r.a;if(i(o.a,u.a)){if(0<a(u.b.a,o.a,u.a))return!1;if(n(o.a,u.a)){if(o.a!==u.a){var r=e.e,l=o.a.h;if(0<=l){var r=r.b,s=r.d,c=r.e,f=r.c,d=f[l];s[d]=s[r.a],f[s[d]]=d,d<=--r.a&&(1>=d?ce(r,d):i(c[s[d>>1]],c[s[d]])?ce(r,d):fe(r,d)),c[l]=null,f[l]=r.b,r.b=l}else for(r.c[-(l+1)]=null;0<r.a&&null===r.c[r.d[r.a-1]];)--r.a;B(e,Q(u),o)}}else g(u.b),p(o,Q(u)),t.b=r.b=!0}else{if(0>a(o.b.a,u.a,o.a))return!1;pe(t).b=t.b=!0,g(o.b),p(Q(u),o)}return!0}function N(e,t){var r=he(t),c=t.a,f=r.a,h=c.a,_=f.a,b=c.b.a,y=f.b.a,m=new ee;if(a(b,e.a,h),a(y,e.a,_),h===_||Math.min(h.a,b.a)>Math.max(_.a,y.a))return!1;if(i(h,_)){if(0<a(y,h,_))return!1}else if(0>a(b,_,h))return!1;var v,w,P=b,O=h,x=y,E=_;if(i(P,O)||(v=P,P=O,O=v),i(x,E)||(v=x,x=E,E=v),i(P,x)||(v=P,P=x,x=v,v=O,O=E,E=v),i(x,O)?i(O,E)?(v=o(P,x,O),w=o(x,O,E),0>v+w&&(v=-v,w=-w),m.b=d(v,x.b,w,O.b)):(v=a(P,x,O),w=-a(P,E,O),0>v+w&&(v=-v,w=-w),m.b=d(v,x.b,w,E.b)):m.b=(x.b+O.b)/2,u(P,O)||(v=P,P=O,O=v),u(x,E)||(v=x,x=E,E=v),u(P,x)||(v=P,P=x,x=v,v=O,O=E,E=v),u(x,O)?u(O,E)?(v=l(P,x,O),w=l(x,O,E),0>v+w&&(v=-v,w=-w),m.a=d(v,x.a,w,O.a)):(v=s(P,x,O),
w=-s(P,E,O),0>v+w&&(v=-v,w=-w),m.a=d(v,x.a,w,E.a)):m.a=(x.a+O.a)/2,i(m,e.a)&&(m.b=e.a.b,m.a=e.a.a),P=i(h,_)?h:_,i(P,m)&&(m.b=P.b,m.a=P.a),n(m,h)||n(m,_))return L(e,t),!1;if(!n(b,e.a)&&0<=a(b,e.a,m)||!n(y,e.a)&&0>=a(y,e.a,m)){if(y===e.a)return g(c.b),p(f.b,c),t=j(t),c=he(t).a,A(e,he(t),r),I(e,t,Q(c),c,c,!0),!0;if(b===e.a){g(f.b),p(c.e,Q(f)),h=r=t,_=h.a.b.a;do h=pe(h);while(h.a.b.a===_);return t=h,h=he(t).a.b.c,r.a=Q(f),f=A(e,r,null),I(e,t,f.c,c.b.c,h,!0),!0}return 0<=a(b,e.a,m)&&(pe(t).b=t.b=!0,g(c.b),c.a.b=e.a.b,c.a.a=e.a.a),0>=a(y,e.a,m)&&(t.b=r.b=!0,g(f.b),f.a.b=e.a.b,f.a.a=e.a.a),!1}return g(c.b),g(f.b),p(Q(f),c),c.a.b=m.b,c.a.a=m.a,c.a.h=ne(e.e,c.a),c=c.a,f=[0,0,0,0],m=[h.d,b.d,_.d,y.d],c.g[0]=c.g[1]=c.g[2]=0,U(c,h,b,f,0),U(c,_,y,f,2),F(e,c,m,f,!0),pe(t).b=t.b=r.b=!0,!1}function V(e,t){for(var r=he(t);;){for(;r.b;)t=r,r=he(r);if(!t.b&&(r=t,t=pe(t),null===t||!t.b))break;t.b=!1;var n,o=t.a,u=r.a;if(n=o.b.a!==u.b.a)e:{n=t;var l=he(n),s=n.a,c=l.a,f=void 0;if(i(s.b.a,c.b.a)){if(0>a(s.b.a,c.b.a,s.a)){n=!1;break e}pe(n).b=n.b=!0,f=g(s),p(c.b,f),f.d.c=n.d}else{if(0<a(c.b.a,s.b.a,c.a)){n=!1;break e}n.b=l.b=!0,f=g(c),p(s.e,c.b),f.b.d.c=n.d}n=!0}if(n&&(r.c?(C(r),_(u),r=he(t),u=r.a):t.c&&(C(t),_(o),t=pe(r),o=t.a)),o.a!==u.a)if(o.b.a===u.b.a||t.c||r.c||o.b.a!==e.a&&u.b.a!==e.a)L(e,t);else if(N(e,t))break;o.a===u.a&&o.b.a===u.b.a&&(S(u,o),C(t),_(o),t=pe(r))}}function z(e,t){e.a=t;for(var r=t.c;null===r.i;)if(r=r.c,r===t.c){var r=e,o=t,u=new de;u.a=o.c.b;var l=r.f,s=l.a;do s=s.a;while(null!==s.b&&!l.c(l.b,u,s.b));var l=s.b,c=he(l),u=l.a,s=c.a;if(0===a(u.b.a,o,u.a))u=l.a,n(u.a,o)||n(u.b.a,o)||(g(u.b),l.c&&(_(u.c),l.c=!1),p(o.c,u),z(r,o));else{var f=i(s.b.a,u.b.a)?l:c,c=void 0;l.d||f.c?(c=f===l?b(o.c.b,u.e):b(s.b.c.b,o.c).b,f.c?M(f,c):(u=r,l=R(r,l,c),l.f=pe(l).f+l.a.f,l.d=D(u,l.f)),z(r,o)):I(r,l,o.c,o.c,null,!0)}return}if(r=j(r.i),u=he(r),l=u.a,u=A(e,u,null),u.c===l){var l=u,u=l.c,s=he(r),c=r.a,f=s.a,d=!1;c.b.a!==f.b.a&&N(e,r),n(c.a,e.a)&&(p(Q(u),c),r=j(r),u=he(r).a,A(e,he(r),s),d=!0),n(f.a,e.a)&&(p(l,Q(f)),l=A(e,s,null),d=!0),d?I(e,r,l.c,u,u,!0):(o=i(f.a,c.a)?Q(f):c,o=b(l.c.b,o),I(e,r,o,o.c,o.c,!1),o.b.i.c=!0,V(e,r))}else I(e,r,u.c,l,l,!0)}function G(e,t){var r=new de,n=h(e.b);n.a.b=ge,n.a.a=t,n.b.a.b=-ge,n.b.a.a=t,e.a=n.b.a,r.a=n,r.f=0,r.d=!1,r.c=!1,r.h=!0,r.b=!1,n=e.f,n=H(n,n.a,r),r.e=n}function X(e){this.a=new $,this.b=e,this.c=T}function H(e,t,r){do t=t.c;while(null!==t.b&&!e.c(e.b,t.b,r));return e=new $(r,t.a,t),t.a.c=e,t.a=e}function $(e,t,r){this.b=e||null,this.a=t||this,this.c=r||this}function Y(){this.d=be,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function W(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case be:q(e,100151),e.u(null);break;case 1:q(e,100152),e.t()}else switch(e.d){case 2:q(e,100154),e.v();break;case 1:q(e,100153),e.w()}}function q(e,t){e.p&&e.p(t,e.c)}function Z(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function K(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Q(e){return e.b.e}function J(){this.c=new ee,this.a=new Z,this.b=new K,this.d=new K,this.b.b=this.d,this.d.b=this.b}function ee(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new oe}function re(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;e.d.sort(function(e){return function(t,r){return i(e[t],e[r])?1:-1}}(e.c)),e.e=!0,ue(e.b)}function ne(e,t){if(e.e){var r=e.b,n=++r.a;2*n>r.f&&(r.f*=2,r.c=ae(r.c,r.f+1));var i;return 0===r.b?i=n:(i=r.b,r.b=r.c[r.b]),r.e[i]=t,r.c[i]=n,r.d[n]=i,r.h&&fe(r,n),i}return r=e.a++,e.c[r]=t,-(r+1)}function ie(e){if(0===e.a)return se(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&i(le(e.b),t))return se(e.b);do--e.a;while(0<e.a&&null===e.c[e.d[e.a-1]]);return t}function oe(){this.d=ae([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ae(e,t){for(var r=Array(t),n=0;n<e.length;n++)r[n]=e[n];for(;n<t;n++)r[n]=0;return r}function ue(e){for(var t=e.a;1<=t;--t)ce(e,t);e.h=!0}function le(e){return e.e[e.d[1]]}function se(e){var t=e.d,r=e.e,n=e.c,i=t[1],o=r[i];return 0<e.a&&(t[1]=t[e.a],n[t[1]]=1,r[i]=null,n[i]=e.b,e.b=i,0<--e.a&&ce(e,1)),o}function ce(e,t){for(var r=e.d,n=e.e,o=e.c,a=t,u=r[a];;){var l=a<<1;l<e.a&&i(n[r[l+1]],n[r[l]])&&(l+=1);var s=r[l];if(l>e.a||i(n[u],n[s])){r[a]=u,o[u]=a;break}r[a]=s,o[s]=a,a=l}}function fe(e,t){for(var r=e.d,n=e.e,o=e.c,a=t,u=r[a];;){var l=a>>1,s=r[l];if(0===l||i(n[s],n[u])){r[a]=u,o[u]=a;break}r[a]=s,o[s]=a,a=l}}function de(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function he(e){return e.e.c.b}function pe(e){return e.e.a.b}var _e,ge=4e150,be=0;_e=Y.prototype,_e.x=function(){W(this,be)},_e.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void q(this,100900)}q(this,100901)},_e.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:q(this,100900)}return!1},_e.A=function(e,t,r){this.j[0]=e,this.j[1]=t,this.j[2]=r},_e.z=function(e,t){var r=t?t:null;switch(e){case 100100:case 100106:this.h=r;break;case 100104:case 100110:this.l=r;break;case 100101:case 100107:this.k=r;break;case 100102:case 100108:this.i=r;break;case 100103:case 100109:this.p=r;break;case 100105:case 100111:this.o=r;break;case 100112:this.r=r;break;default:q(this,100900)}},_e.C=function(e,t){var r=!1,n=[0,0,0];W(this,2);for(var i=0;3>i;++i){var o=e[i];-1e150>o&&(o=-1e150,r=!0),1e150<o&&(o=1e150,r=!0),n[i]=o}r&&q(this,100155),r=this.q,null===r?(r=h(this.b),p(r,r.b)):(g(r),r=r.e),r.a.d=t,r.a.g[0]=n[0],r.a.g[1]=n[1],r.a.g[2]=n[2],r.f=1,r.b.f=-1,this.q=r},_e.u=function(e){W(this,be),this.d=1,this.b=new J,this.c=e},_e.t=function(){W(this,1),this.d=2,this.q=null},_e.v=function(){W(this,2),this.d=1},_e.w=function(){W(this,1),this.d=be;var e=this.j[0],t=this.j[1],r=this.j[2],o=!1,u=[e,t,r];if(0===e&&0===t&&0===r){for(var t=[-2e150,-2e150,-2e150],l=[2e150,2e150,2e150],r=[],s=[],o=this.b.c,e=o.e;e!==o;e=e.e)for(var d=0;3>d;++d){var h=e.g[d];h<l[d]&&(l[d]=h,s[d]=e),h>t[d]&&(t[d]=h,r[d]=e)}if(e=0,t[1]-l[1]>t[0]-l[0]&&(e=1),t[2]-l[2]>t[e]-l[e]&&(e=2),l[e]>=t[e])u[0]=0,u[1]=0,u[2]=1;else{for(t=0,l=s[e],r=r[e],s=[0,0,0],l=[l.g[0]-r.g[0],l.g[1]-r.g[1],l.g[2]-r.g[2]],d=[0,0,0],e=o.e;e!==o;e=e.e)d[0]=e.g[0]-r.g[0],d[1]=e.g[1]-r.g[1],d[2]=e.g[2]-r.g[2],s[0]=l[1]*d[2]-l[2]*d[1],s[1]=l[2]*d[0]-l[0]*d[2],s[2]=l[0]*d[1]-l[1]*d[0],h=s[0]*s[0]+s[1]*s[1]+s[2]*s[2],h>t&&(t=h,u[0]=s[0],u[1]=s[1],u[2]=s[2]);0>=t&&(u[0]=u[1]=u[2]=0,u[E(l)]=1)}o=!0}for(s=E(u),e=this.b.c,t=(s+1)%3,r=(s+2)%3,s=0<u[s]?1:-1,u=e.e;u!==e;u=u.e)u.b=u.g[t],u.a=s*u.g[r];if(o){for(u=0,o=this.b.a,e=o.b;e!==o;e=e.b)if(t=e.a,!(0>=t.f))do u+=(t.a.b-t.b.a.b)*(t.a.a+t.b.a.a),t=t.e;while(t!==e.a);if(0>u)for(u=this.b.c,o=u.e;o!==u;o=o.e)o.a=-o.a}for(this.n=!1,u=this.b.b,e=u.h;e!==u;e=o)o=e.h,t=e.e,n(e.a,e.b.a)&&e.e.e!==e&&(B(this,t,e),_(e),e=t,t=e.e),t.e===e&&(t!==e&&(t!==o&&t!==o.b||(o=o.h),_(t)),e!==o&&e!==o.b||(o=o.h),_(e));for(this.e=u=new te,o=this.b.c,e=o.e;e!==o;e=e.e)e.h=ne(u,e);for(re(u),this.f=new X(this),G(this,-ge),G(this,ge);null!==(u=ie(this.e));){for(;;){e:if(e=this.e,0===e.a)o=le(e.b);else if(o=e.c[e.d[e.a-1]],0!==e.b.a&&(e=le(e.b),i(e,o))){o=e;break e}if(null===o||!n(o,u))break;o=ie(this.e),B(this,u.c,o.c)}z(this,u)}for(this.a=this.f.a.a.b.a.a,u=0;null!==(o=this.f.a.a.b);)o.h||++u,C(o);for(this.f=null,u=this.e,u.b=null,u.d=null,this.e=u.c=null,u=this.b,e=u.a.b;e!==u.a;e=o)o=e.b,e=e.a,e.e.e===e&&(S(e.c,e),_(e));if(!this.n){if(u=this.b,this.m)for(e=u.b.h;e!==u.b;e=o)o=e.h,e.b.d.c!==e.d.c?e.f=e.d.c?1:-1:_(e);else for(e=u.a.b;e!==u.a;e=o)if(o=e.b,e.c){for(e=e.a;i(e.b.a,e.a);e=e.c.b);for(;i(e.a,e.b.a);e=e.e);for(t=e.c.b,r=void 0;e.e!==t;)if(i(e.b.a,t.a)){for(;t.e!==e&&(c(t.e)||0>=a(t.a,t.b.a,t.e.b.a));)r=b(t.e,t),t=r.b;t=t.c.b}else{for(;t.e!==e&&(f(e.c.b)||0<=a(e.b.a,e.a,e.c.b.a));)r=b(e,e.c.b),e=r.b;e=e.e}for(;t.e.e!==e;)r=b(t.e,t),t=r.b}if(this.h||this.i||this.k||this.l)if(this.m){for(u=this.b,o=u.a.b;o!==u.a;o=o.b)if(o.c){this.h&&this.h(2,this.c),e=o.a;do this.k&&this.k(e.a.d,this.c),e=e.e;while(e!==o.a);this.i&&this.i(this.c)}}else{for(u=this.b,o=!!this.l,e=!1,t=-1,r=u.a.d;r!==u.a;r=r.d)if(r.c){e||(this.h&&this.h(4,this.c),e=!0),s=r.a;do o&&(l=s.b.d.c?0:1,t!==l&&(t=l,this.l&&this.l(!!t,this.c))),this.k&&this.k(s.a.d,this.c),s=s.e;while(s!==r.a)}e&&this.i&&this.i(this.c)}if(this.r){for(u=this.b,e=u.a.b;e!==u.a;e=o)if(o=e.b,!e.c){t=e.a,r=t.e,s=void 0;do s=r,r=s.e,s.d=null,null===s.b.d&&(s.c===s?O(s.a,null):(s.a.c=s.c,m(s,Q(s))),l=s.b,l.c===l?O(l.a,null):(l.a.c=l.c,m(l,Q(l))),P(s));while(s!==t);t=e.d,e=e.b,e.d=t,t.b=e}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Y,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Y.prototype.gluDeleteTess=Y.prototype.x,Y.prototype.gluTessProperty=Y.prototype.B,Y.prototype.gluGetTessProperty=Y.prototype.y,Y.prototype.gluTessNormal=Y.prototype.A,Y.prototype.gluTessCallback=Y.prototype.z,Y.prototype.gluTessVertex=Y.prototype.C,Y.prototype.gluTessBeginPolygon=Y.prototype.u,Y.prototype.gluTessBeginContour=Y.prototype.t,Y.prototype.gluTessEndContour=Y.prototype.v,Y.prototype.gluTessEndPolygon=Y.prototype.w,"undefined"!=typeof t&&(t.exports=this.libtess)},{}],218:[function(e,t,r){"use strict";var n=e("./lib/utils/common").assign,i=e("./lib/deflate"),o=e("./lib/inflate"),a=e("./lib/zlib/constants"),u={};n(u,i,o,a),t.exports=u},{"./lib/deflate":219,"./lib/inflate":220,"./lib/utils/common":221,"./lib/zlib/constants":224}],219:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=l.assign({level:y,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var r=u.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==_)throw new Error(c[r]);if(t.header&&u.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=u.deflateSetDictionary(this.strm,i),r!==_)throw new Error(c[r]);this._dict_set=!0}}function i(e,t){var r=new n(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function a(e,t){return t=t||{},t.gzip=!0,i(e,t)}var u=e("./zlib/deflate"),l=e("./utils/common"),s=e("./utils/strings"),c=e("./zlib/messages"),f=e("./zlib/zstream"),d=Object.prototype.toString,h=0,p=4,_=0,g=1,b=2,y=-1,m=0,v=8;n.prototype.push=function(e,t){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:t===!0?p:h,"string"==typeof e?i.input=s.string2buf(e):"[object ArrayBuffer]"===d.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new l.Buf8(o),i.next_out=0,i.avail_out=o),r=u.deflate(i,n),r!==g&&r!==_)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||n!==p&&n!==b)||("string"===this.options.to?this.onData(s.buf2binstring(l.shrinkBuf(i.output,i.next_out))):this.onData(l.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&r!==g);return n===p?(r=u.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===_):n!==b||(this.onEnd(_),i.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===_&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=n,r.deflate=i,r.deflateRaw=o,r.gzip=a},{"./utils/common":221,"./utils/strings":222,"./zlib/deflate":226,"./zlib/messages":231,"./zlib/zstream":233}],220:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(c[r]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}function i(e,t){var r=new n(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var a=e("./zlib/inflate"),u=e("./utils/common"),l=e("./utils/strings"),s=e("./zlib/constants"),c=e("./zlib/messages"),f=e("./zlib/zstream"),d=e("./zlib/gzheader"),h=Object.prototype.toString;n.prototype.push=function(e,t){var r,n,i,o,c,f,d=this.strm,p=this.options.chunkSize,_=this.options.dictionary,g=!1;if(this.ended)return!1;n=t===~~t?t:t===!0?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?d.input=l.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new u.Buf8(p),d.next_out=0,d.avail_out=p),r=a.inflate(d,s.Z_NO_FLUSH),r===s.Z_NEED_DICT&&_&&(f="string"==typeof _?l.string2buf(_):"[object ArrayBuffer]"===h.call(_)?new Uint8Array(_):_,r=a.inflateSetDictionary(this.strm,f)),r===s.Z_BUF_ERROR&&g===!0&&(r=s.Z_OK,g=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||n!==s.Z_FINISH&&n!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(i=l.utf8border(d.output,d.next_out),o=d.next_out-i,c=l.buf2string(d.output,i),d.next_out=o,d.avail_out=p-o,o&&u.arraySet(d.output,d.output,i,o,0),this.onData(c)):this.onData(u.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(n=s.Z_FINISH),n===s.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):n!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=n,r.inflate=i,r.inflateRaw=o,r.ungzip=i},{"./utils/common":221,"./utils/strings":222,"./zlib/constants":224,"./zlib/gzheader":227,"./zlib/inflate":229,"./zlib/messages":231,"./zlib/zstream":233}],221:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(r,r+n),i);for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],222:[function(e,t,r){"use strict";function n(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}var i=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var u=new i.Buf8(256),l=0;l<256;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,r.string2buf=function(e){var t,r,n,o,a,u=e.length,l=0;for(o=0;o<u;o++)r=e.charCodeAt(o),55296===(64512&r)&&o+1<u&&(n=e.charCodeAt(o+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(l),a=0,o=0;a<l;o++)r=e.charCodeAt(o),55296===(64512&r)&&o+1<u&&(n=e.charCodeAt(o+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},r.buf2binstring=function(e){return n(e,e.length)},r.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,i,o,a,l=t||e.length,s=new Array(2*l);for(i=0,r=0;r<l;)if(o=e[r++],o<128)s[i++]=o;else if(a=u[o],a>4)s[i++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&r<l;)o=o<<6|63&e[r++],a--;a>1?s[i++]=65533:o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|1023&o)}return n(s,i)},r.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128===(192&e[r]);)r--;return r<0?t:0===r?t:r+u[e[r]]>t?r:t}},{"./common":221}],223:[function(e,t,r){"use strict";function n(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){a=r>2e3?2e3:r,r-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}t.exports=n},{}],224:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],225:[function(e,t,r){"use strict";function n(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}function i(e,t,r,n){var i=o,a=n+r;e^=-1;for(var u=n;u<a;u++)e=e>>>8^i[255&(e^t[u])];return e^-1}var o=n();t.exports=i},{}],226:[function(e,t,r){"use strict";function n(e,t){return e.msg=A[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(j.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function u(e,t){R._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function s(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,j.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=D(e.adler,t,i,r):2===e.state.wrap&&(e.adler=k(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function f(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,u=e.nice_match,l=e.strstart>e.w_size-fe?e.strstart-(e.w_size-fe):0,s=e.window,c=e.w_mask,f=e.prev,d=e.strstart+ce,h=s[o+a-1],p=s[o+a];e.prev_length>=e.good_match&&(i>>=2),u>e.lookahead&&(u=e.lookahead);do if(r=t,s[r+a]===p&&s[r+a-1]===h&&s[r]===s[o]&&s[++r]===s[o+1]){o+=2,r++;do;while(s[++o]===s[++r]&&s[++o]===s[++r]&&s[++o]===s[++r]&&s[++o]===s[++r]&&s[++o]===s[++r]&&s[++o]===s[++r]&&s[++o]===s[++r]&&s[++o]===s[++r]&&o<d);if(n=ce-(d-o),o=d-ce,n>a){if(e.match_start=t,a=n,n>=u)break;h=s[o+a-1],p=s[o+a]}}while((t=f[t&c])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead}function d(e){var t,r,n,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-fe)){j.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,r=e.hash_size,t=r;do n=e.head[--t],e.head[t]=n>=a?n-a:0;while(--r);r=a,t=r;do n=e.prev[--t],e.prev[t]=n>=a?n-a:0;while(--r);i+=a}if(0===e.strm.avail_in)break;if(r=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<fe&&0!==e.strm.avail_in)}function h(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===I)return ve;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,u(e,!1),0===e.strm.avail_out))return ve;if(e.strstart-e.block_start>=e.w_size-fe&&(u(e,!1),0===e.strm.avail_out))return ve}return e.insert=0,t===U?(u(e,!0),0===e.strm.avail_out?Pe:Oe):e.strstart>e.block_start&&(u(e,!1),0===e.strm.avail_out)?ve:ve}function p(e,t){for(var r,n;;){if(e.lookahead<fe){if(d(e),e.lookahead<fe&&t===I)return ve;if(0===e.lookahead)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-fe&&(e.match_length=f(e,r)),e.match_length>=se)if(n=R._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=R._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(u(e,!1),0===e.strm.avail_out))return ve}return e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(u(e,!0),0===e.strm.avail_out?Pe:Oe):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?ve:we}function _(e,t){for(var r,n,i;;){if(e.lookahead<fe){if(d(e),e.lookahead<fe&&t===I)return ve;if(0===e.lookahead)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-fe&&(e.match_length=f(e,r),e.match_length<=5&&(e.strategy===$||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,n=R._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,n&&(u(e,!1),0===e.strm.avail_out))return ve}else if(e.match_available){if(n=R._tr_tally(e,0,e.window[e.strstart-1]),n&&u(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ve}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=R._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(u(e,!0),0===e.strm.avail_out?Pe:Oe):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?ve:we}function g(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=ce){if(d(e),e.lookahead<=ce&&t===I)return ve;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+ce;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=ce-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(r=R._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=R._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(u(e,!1),0===e.strm.avail_out))return ve}return e.insert=0,t===U?(u(e,!0),0===e.strm.avail_out?Pe:Oe):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?ve:we}function b(e,t){for(var r;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===I)return ve;break}if(e.match_length=0,r=R._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(u(e,!1),0===e.strm.avail_out))return ve}return e.insert=0,t===U?(u(e,!0),0===e.strm.avail_out?Pe:Oe):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?ve:we}function y(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function m(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=M[e.level].max_lazy,e.good_match=M[e.level].good_length,e.nice_match=M[e.level].nice_length,e.max_chain_length=M[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new j.Buf16(2*ue),this.dyn_dtree=new j.Buf16(2*(2*oe+1)),this.bl_tree=new j.Buf16(2*(2*ae+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new j.Buf16(le+1),this.heap=new j.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new j.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=K,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ye,e.adler=2===t.wrap?0:1,t.last_flush=I,R._tr_init(t),N):n(e,z)}function P(e){var t=w(e);return t===N&&m(e.state),t}function O(e,t){return e&&e.state?2!==e.state.wrap?z:(e.state.gzhead=t,N):z}function x(e,t,r,i,o,a){if(!e)return z;var u=1;if(t===H&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),o<1||o>J||r!==Q||i<8||i>15||t<0||t>9||a<0||a>q)return n(e,z);8===i&&(i=9);var l=new v;return e.state=l,l.strm=e,l.wrap=u,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new j.Buf8(2*l.w_size),l.head=new j.Buf16(l.hash_size),l.prev=new j.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new j.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=r,P(e)}function E(e,t){return x(e,t,Q,ee,te,Z)}function S(e,t){var r,u,c,f;if(!e||!e.state||t>L||t<0)return e?n(e,z):z;if(u=e.state,!e.output||!e.input&&0!==e.avail_in||u.status===me&&t!==U)return n(e,0===e.avail_out?X:z);if(u.strm=e,r=u.last_flush,u.last_flush=t,u.status===he)if(2===u.wrap)e.adler=0,l(u,31),l(u,139),l(u,8),u.gzhead?(l(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),l(u,255&u.gzhead.time),l(u,u.gzhead.time>>8&255),l(u,u.gzhead.time>>16&255),l(u,u.gzhead.time>>24&255),l(u,9===u.level?2:u.strategy>=Y||u.level<2?4:0),l(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(l(u,255&u.gzhead.extra.length),l(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(e.adler=k(e.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=pe):(l(u,0),l(u,0),l(u,0),l(u,0),l(u,0),l(u,9===u.level?2:u.strategy>=Y||u.level<2?4:0),l(u,xe),u.status=ye);else{var d=Q+(u.w_bits-8<<4)<<8,h=-1;h=u.strategy>=Y||u.level<2?0:u.level<6?1:6===u.level?2:3,d|=h<<6,0!==u.strstart&&(d|=de),d+=31-d%31,u.status=ye,s(u,d),0!==u.strstart&&(s(u,e.adler>>>16),s(u,65535&e.adler)),e.adler=1}if(u.status===pe)if(u.gzhead.extra){for(c=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>c&&(e.adler=k(e.adler,u.pending_buf,u.pending-c,c)),a(e),c=u.pending,u.pending!==u.pending_buf_size));)l(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>c&&(e.adler=k(e.adler,u.pending_buf,u.pending-c,c)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=_e)}else u.status=_e;if(u.status===_e)if(u.gzhead.name){c=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>c&&(e.adler=k(e.adler,u.pending_buf,u.pending-c,c)),a(e),c=u.pending,u.pending===u.pending_buf_size)){f=1;break}f=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,l(u,f)}while(0!==f);u.gzhead.hcrc&&u.pending>c&&(e.adler=k(e.adler,u.pending_buf,u.pending-c,c)),0===f&&(u.gzindex=0,u.status=ge)}else u.status=ge;if(u.status===ge)if(u.gzhead.comment){c=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>c&&(e.adler=k(e.adler,u.pending_buf,u.pending-c,c)),a(e),c=u.pending,u.pending===u.pending_buf_size)){f=1;break}f=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,l(u,f)}while(0!==f);u.gzhead.hcrc&&u.pending>c&&(e.adler=k(e.adler,u.pending_buf,u.pending-c,c)),0===f&&(u.status=be)}else u.status=be;if(u.status===be&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&a(e),u.pending+2<=u.pending_buf_size&&(l(u,255&e.adler),l(u,e.adler>>8&255),e.adler=0,u.status=ye)):u.status=ye),0!==u.pending){if(a(e),0===e.avail_out)return u.last_flush=-1,N}else if(0===e.avail_in&&i(t)<=i(r)&&t!==U)return n(e,X);if(u.status===me&&0!==e.avail_in)return n(e,X);if(0!==e.avail_in||0!==u.lookahead||t!==I&&u.status!==me){var p=u.strategy===Y?b(u,t):u.strategy===W?g(u,t):M[u.level].func(u,t);if(p!==Pe&&p!==Oe||(u.status=me),p===ve||p===Pe)return 0===e.avail_out&&(u.last_flush=-1),N;if(p===we&&(t===F?R._tr_align(u):t!==L&&(R._tr_stored_block(u,0,0,!1),t===B&&(o(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),a(e),0===e.avail_out))return u.last_flush=-1,N}return t!==U?N:u.wrap<=0?V:(2===u.wrap?(l(u,255&e.adler),l(u,e.adler>>8&255),l(u,e.adler>>16&255),l(u,e.adler>>24&255),
l(u,255&e.total_in),l(u,e.total_in>>8&255),l(u,e.total_in>>16&255),l(u,e.total_in>>24&255)):(s(u,e.adler>>>16),s(u,65535&e.adler)),a(e),u.wrap>0&&(u.wrap=-u.wrap),0!==u.pending?N:V)}function T(e){var t;return e&&e.state?(t=e.state.status,t!==he&&t!==pe&&t!==_e&&t!==ge&&t!==be&&t!==ye&&t!==me?n(e,z):(e.state=null,t===ye?n(e,G):N)):z}function C(e,t){var r,n,i,a,u,l,s,c,f=t.length;if(!e||!e.state)return z;if(r=e.state,a=r.wrap,2===a||1===a&&r.status!==he||r.lookahead)return z;for(1===a&&(e.adler=D(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===a&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new j.Buf8(r.w_size),j.arraySet(c,t,f-r.w_size,r.w_size,0),t=c,f=r.w_size),u=e.avail_in,l=e.next_in,s=e.input,e.avail_in=f,e.next_in=0,e.input=t,d(r);r.lookahead>=se;){n=r.strstart,i=r.lookahead-(se-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+se-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++;while(--i);r.strstart=n,r.lookahead=se-1,d(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=se-1,r.match_available=0,e.next_in=l,e.input=s,e.avail_in=u,r.wrap=a,N}var M,j=e("../utils/common"),R=e("./trees"),D=e("./adler32"),k=e("./crc32"),A=e("./messages"),I=0,F=1,B=3,U=4,L=5,N=0,V=1,z=-2,G=-3,X=-5,H=-1,$=1,Y=2,W=3,q=4,Z=0,K=2,Q=8,J=9,ee=15,te=8,re=29,ne=256,ie=ne+1+re,oe=30,ae=19,ue=2*ie+1,le=15,se=3,ce=258,fe=ce+se+1,de=32,he=42,pe=69,_e=73,ge=91,be=103,ye=113,me=666,ve=1,we=2,Pe=3,Oe=4,xe=3;M=[new y(0,0,0,0,h),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,_),new y(8,16,32,32,_),new y(8,16,128,128,_),new y(8,32,128,256,_),new y(32,128,258,1024,_),new y(32,258,258,4096,_)],r.deflateInit=E,r.deflateInit2=x,r.deflateReset=P,r.deflateResetKeep=w,r.deflateSetHeader=O,r.deflate=S,r.deflateEnd=T,r.deflateSetDictionary=C,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":221,"./adler32":223,"./crc32":225,"./messages":231,"./trees":232}],227:[function(e,t,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},{}],228:[function(e,t,r){"use strict";var n=30,i=12;t.exports=function(e,t){var r,o,a,u,l,s,c,f,d,h,p,_,g,b,y,m,v,w,P,O,x,E,S,T,C;r=e.state,o=e.next_in,T=e.input,a=o+(e.avail_in-5),u=e.next_out,C=e.output,l=u-(t-e.avail_out),s=u+(e.avail_out-257),c=r.dmax,f=r.wsize,d=r.whave,h=r.wnext,p=r.window,_=r.hold,g=r.bits,b=r.lencode,y=r.distcode,m=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;e:do{g<15&&(_+=T[o++]<<g,g+=8,_+=T[o++]<<g,g+=8),w=b[_&m];t:for(;;){if(P=w>>>24,_>>>=P,g-=P,P=w>>>16&255,0===P)C[u++]=65535&w;else{if(!(16&P)){if(0===(64&P)){w=b[(65535&w)+(_&(1<<P)-1)];continue t}if(32&P){r.mode=i;break e}e.msg="invalid literal/length code",r.mode=n;break e}O=65535&w,P&=15,P&&(g<P&&(_+=T[o++]<<g,g+=8),O+=_&(1<<P)-1,_>>>=P,g-=P),g<15&&(_+=T[o++]<<g,g+=8,_+=T[o++]<<g,g+=8),w=y[_&v];r:for(;;){if(P=w>>>24,_>>>=P,g-=P,P=w>>>16&255,!(16&P)){if(0===(64&P)){w=y[(65535&w)+(_&(1<<P)-1)];continue r}e.msg="invalid distance code",r.mode=n;break e}if(x=65535&w,P&=15,g<P&&(_+=T[o++]<<g,g+=8,g<P&&(_+=T[o++]<<g,g+=8)),x+=_&(1<<P)-1,x>c){e.msg="invalid distance too far back",r.mode=n;break e}if(_>>>=P,g-=P,P=u-l,x>P){if(P=x-P,P>d&&r.sane){e.msg="invalid distance too far back",r.mode=n;break e}if(E=0,S=p,0===h){if(E+=f-P,P<O){O-=P;do C[u++]=p[E++];while(--P);E=u-x,S=C}}else if(h<P){if(E+=f+h-P,P-=h,P<O){O-=P;do C[u++]=p[E++];while(--P);if(E=0,h<O){P=h,O-=P;do C[u++]=p[E++];while(--P);E=u-x,S=C}}}else if(E+=h-P,P<O){O-=P;do C[u++]=p[E++];while(--P);E=u-x,S=C}for(;O>2;)C[u++]=S[E++],C[u++]=S[E++],C[u++]=S[E++],O-=3;O&&(C[u++]=S[E++],O>1&&(C[u++]=S[E++]))}else{E=u-x;do C[u++]=C[E++],C[u++]=C[E++],C[u++]=C[E++],O-=3;while(O>2);O&&(C[u++]=C[E++],O>1&&(C[u++]=C[E++]))}break}}break}}while(o<a&&u<s);O=g>>3,o-=O,g-=O<<3,_&=(1<<g)-1,e.next_in=o,e.next_out=u,e.avail_in=o<a?5+(a-o):5-(o-a),e.avail_out=u<s?257+(s-u):257-(u-s),r.hold=_,r.bits=g}},{}],229:[function(e,t,r){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=B,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(_e),t.distcode=t.distdyn=new y.Buf32(ge),t.sane=1,t.back=-1,M):D}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):D}function u(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?D:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,a(e))):D}function l(e,t){var r,n;return e?(n=new i,e.state=n,n.window=null,r=u(e,t),r!==M&&(e.state=null),r):D}function s(e){return l(e,ye)}function c(e){if(me){var t;for(g=new y.Buf32(512),b=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(P(x,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;P(E,e.lens,0,32,b,0,e.work,{bits:5}),me=!1}e.lencode=g,e.lenbits=9,e.distcode=b,e.distbits=5}function f(e,t,r,n){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),n>=o.wsize?(y.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),y.arraySet(o.window,t,r-n,i,o.wnext),n-=i,n?(y.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function d(e,t){var r,i,o,a,u,l,s,d,h,p,_,g,b,_e,ge,be,ye,me,ve,we,Pe,Oe,xe,Ee,Se=0,Te=new y.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return D;r=e.state,r.mode===W&&(r.mode=q),u=e.next_out,o=e.output,s=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=r.hold,h=r.bits,p=l,_=s,Oe=M;e:for(;;)switch(r.mode){case B:if(0===r.wrap){r.mode=q;break}for(;h<16;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(2&r.wrap&&35615===d){r.check=0,Te[0]=255&d,Te[1]=d>>>8&255,r.check=v(r.check,Te,2,0),d=0,h=0,r.mode=U;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=de;break}if((15&d)!==F){e.msg="unknown compression method",r.mode=de;break}if(d>>>=4,h-=4,Pe=(15&d)+8,0===r.wbits)r.wbits=Pe;else if(Pe>r.wbits){e.msg="invalid window size",r.mode=de;break}r.dmax=1<<Pe,e.adler=r.check=1,r.mode=512&d?$:W,d=0,h=0;break;case U:for(;h<16;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(r.flags=d,(255&r.flags)!==F){e.msg="unknown compression method",r.mode=de;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=de;break}r.head&&(r.head.text=d>>8&1),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,r.check=v(r.check,Te,2,0)),d=0,h=0,r.mode=L;case L:for(;h<32;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}r.head&&(r.head.time=d),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,Te[2]=d>>>16&255,Te[3]=d>>>24&255,r.check=v(r.check,Te,4,0)),d=0,h=0,r.mode=N;case N:for(;h<16;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}r.head&&(r.head.xflags=255&d,r.head.os=d>>8),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,r.check=v(r.check,Te,2,0)),d=0,h=0,r.mode=V;case V:if(1024&r.flags){for(;h<16;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}r.length=d,r.head&&(r.head.extra_len=d),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,r.check=v(r.check,Te,2,0)),d=0,h=0}else r.head&&(r.head.extra=null);r.mode=z;case z:if(1024&r.flags&&(g=r.length,g>l&&(g=l),g&&(r.head&&(Pe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),y.arraySet(r.head.extra,i,a,g,Pe)),512&r.flags&&(r.check=v(r.check,i,g,a)),l-=g,a+=g,r.length-=g),r.length))break e;r.length=0,r.mode=G;case G:if(2048&r.flags){if(0===l)break e;g=0;do Pe=i[a+g++],r.head&&Pe&&r.length<65536&&(r.head.name+=String.fromCharCode(Pe));while(Pe&&g<l);if(512&r.flags&&(r.check=v(r.check,i,g,a)),l-=g,a+=g,Pe)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=X;case X:if(4096&r.flags){if(0===l)break e;g=0;do Pe=i[a+g++],r.head&&Pe&&r.length<65536&&(r.head.comment+=String.fromCharCode(Pe));while(Pe&&g<l);if(512&r.flags&&(r.check=v(r.check,i,g,a)),l-=g,a+=g,Pe)break e}else r.head&&(r.head.comment=null);r.mode=H;case H:if(512&r.flags){for(;h<16;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(d!==(65535&r.check)){e.msg="header crc mismatch",r.mode=de;break}d=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=W;break;case $:for(;h<32;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}e.adler=r.check=n(d),d=0,h=0,r.mode=Y;case Y:if(0===r.havedict)return e.next_out=u,e.avail_out=s,e.next_in=a,e.avail_in=l,r.hold=d,r.bits=h,R;e.adler=r.check=1,r.mode=W;case W:if(t===T||t===C)break e;case q:if(r.last){d>>>=7&h,h-=7&h,r.mode=se;break}for(;h<3;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}switch(r.last=1&d,d>>>=1,h-=1,3&d){case 0:r.mode=Z;break;case 1:if(c(r),r.mode=re,t===C){d>>>=2,h-=2;break e}break;case 2:r.mode=J;break;case 3:e.msg="invalid block type",r.mode=de}d>>>=2,h-=2;break;case Z:for(d>>>=7&h,h-=7&h;h<32;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=de;break}if(r.length=65535&d,d=0,h=0,r.mode=K,t===C)break e;case K:r.mode=Q;case Q:if(g=r.length){if(g>l&&(g=l),g>s&&(g=s),0===g)break e;y.arraySet(o,i,a,g,u),l-=g,a+=g,s-=g,u+=g,r.length-=g;break}r.mode=W;break;case J:for(;h<14;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(r.nlen=(31&d)+257,d>>>=5,h-=5,r.ndist=(31&d)+1,d>>>=5,h-=5,r.ncode=(15&d)+4,d>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=de;break}r.have=0,r.mode=ee;case ee:for(;r.have<r.ncode;){for(;h<3;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}r.lens[Ce[r.have++]]=7&d,d>>>=3,h-=3}for(;r.have<19;)r.lens[Ce[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,xe={bits:r.lenbits},Oe=P(O,r.lens,0,19,r.lencode,0,r.work,xe),r.lenbits=xe.bits,Oe){e.msg="invalid code lengths set",r.mode=de;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Se=r.lencode[d&(1<<r.lenbits)-1],ge=Se>>>24,be=Se>>>16&255,ye=65535&Se,!(ge<=h);){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(ye<16)d>>>=ge,h-=ge,r.lens[r.have++]=ye;else{if(16===ye){for(Ee=ge+2;h<Ee;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(d>>>=ge,h-=ge,0===r.have){e.msg="invalid bit length repeat",r.mode=de;break}Pe=r.lens[r.have-1],g=3+(3&d),d>>>=2,h-=2}else if(17===ye){for(Ee=ge+3;h<Ee;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}d>>>=ge,h-=ge,Pe=0,g=3+(7&d),d>>>=3,h-=3}else{for(Ee=ge+7;h<Ee;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}d>>>=ge,h-=ge,Pe=0,g=11+(127&d),d>>>=7,h-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=de;break}for(;g--;)r.lens[r.have++]=Pe}}if(r.mode===de)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=de;break}if(r.lenbits=9,xe={bits:r.lenbits},Oe=P(x,r.lens,0,r.nlen,r.lencode,0,r.work,xe),r.lenbits=xe.bits,Oe){e.msg="invalid literal/lengths set",r.mode=de;break}if(r.distbits=6,r.distcode=r.distdyn,xe={bits:r.distbits},Oe=P(E,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,xe),r.distbits=xe.bits,Oe){e.msg="invalid distances set",r.mode=de;break}if(r.mode=re,t===C)break e;case re:r.mode=ne;case ne:if(l>=6&&s>=258){e.next_out=u,e.avail_out=s,e.next_in=a,e.avail_in=l,r.hold=d,r.bits=h,w(e,_),u=e.next_out,o=e.output,s=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=r.hold,h=r.bits,r.mode===W&&(r.back=-1);break}for(r.back=0;Se=r.lencode[d&(1<<r.lenbits)-1],ge=Se>>>24,be=Se>>>16&255,ye=65535&Se,!(ge<=h);){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(be&&0===(240&be)){for(me=ge,ve=be,we=ye;Se=r.lencode[we+((d&(1<<me+ve)-1)>>me)],ge=Se>>>24,be=Se>>>16&255,ye=65535&Se,!(me+ge<=h);){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}d>>>=me,h-=me,r.back+=me}if(d>>>=ge,h-=ge,r.back+=ge,r.length=ye,0===be){r.mode=le;break}if(32&be){r.back=-1,r.mode=W;break}if(64&be){e.msg="invalid literal/length code",r.mode=de;break}r.extra=15&be,r.mode=ie;case ie:if(r.extra){for(Ee=r.extra;h<Ee;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=oe;case oe:for(;Se=r.distcode[d&(1<<r.distbits)-1],ge=Se>>>24,be=Se>>>16&255,ye=65535&Se,!(ge<=h);){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(0===(240&be)){for(me=ge,ve=be,we=ye;Se=r.distcode[we+((d&(1<<me+ve)-1)>>me)],ge=Se>>>24,be=Se>>>16&255,ye=65535&Se,!(me+ge<=h);){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}d>>>=me,h-=me,r.back+=me}if(d>>>=ge,h-=ge,r.back+=ge,64&be){e.msg="invalid distance code",r.mode=de;break}r.offset=ye,r.extra=15&be,r.mode=ae;case ae:if(r.extra){for(Ee=r.extra;h<Ee;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=de;break}r.mode=ue;case ue:if(0===s)break e;if(g=_-s,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=de;break}g>r.wnext?(g-=r.wnext,b=r.wsize-g):b=r.wnext-g,g>r.length&&(g=r.length),_e=r.window}else _e=o,b=u-r.offset,g=r.length;g>s&&(g=s),s-=g,r.length-=g;do o[u++]=_e[b++];while(--g);0===r.length&&(r.mode=ne);break;case le:if(0===s)break e;o[u++]=r.length,s--,r.mode=ne;break;case se:if(r.wrap){for(;h<32;){if(0===l)break e;l--,d|=i[a++]<<h,h+=8}if(_-=s,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?v(r.check,o,_,u-_):m(r.check,o,_,u-_)),_=s,(r.flags?d:n(d))!==r.check){e.msg="incorrect data check",r.mode=de;break}d=0,h=0}r.mode=ce;case ce:if(r.wrap&&r.flags){for(;h<32;){if(0===l)break e;l--,d+=i[a++]<<h,h+=8}if(d!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=de;break}d=0,h=0}r.mode=fe;case fe:Oe=j;break e;case de:Oe=k;break e;case he:return A;case pe:default:return D}return e.next_out=u,e.avail_out=s,e.next_in=a,e.avail_in=l,r.hold=d,r.bits=h,(r.wsize||_!==e.avail_out&&r.mode<de&&(r.mode<se||t!==S))&&f(e,e.output,e.next_out,_-e.avail_out)?(r.mode=he,A):(p-=e.avail_in,_-=e.avail_out,e.total_in+=p,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?v(r.check,o,_,e.next_out-_):m(r.check,o,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(r.mode===W?128:0)+(r.mode===re||r.mode===K?256:0),(0===p&&0===_||t===S)&&Oe===M&&(Oe=I),Oe)}function h(e){if(!e||!e.state)return D;var t=e.state;return t.window&&(t.window=null),e.state=null,M}function p(e,t){var r;return e&&e.state?(r=e.state,0===(2&r.wrap)?D:(r.head=t,t.done=!1,M)):D}function _(e,t){var r,n,i,o=t.length;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==Y?D:r.mode===Y&&(n=1,n=m(n,t,o,0),n!==r.check)?k:(i=f(e,t,o,o))?(r.mode=he,A):(r.havedict=1,M)):D}var g,b,y=e("../utils/common"),m=e("./adler32"),v=e("./crc32"),w=e("./inffast"),P=e("./inftrees"),O=0,x=1,E=2,S=4,T=5,C=6,M=0,j=1,R=2,D=-2,k=-3,A=-4,I=-5,F=8,B=1,U=2,L=3,N=4,V=5,z=6,G=7,X=8,H=9,$=10,Y=11,W=12,q=13,Z=14,K=15,Q=16,J=17,ee=18,te=19,re=20,ne=21,ie=22,oe=23,ae=24,ue=25,le=26,se=27,ce=28,fe=29,de=30,he=31,pe=32,_e=852,ge=592,be=15,ye=be,me=!0;r.inflateReset=a,r.inflateReset2=u,r.inflateResetKeep=o,r.inflateInit=s,r.inflateInit2=l,r.inflate=d,r.inflateEnd=h,r.inflateGetHeader=p,r.inflateSetDictionary=_,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":221,"./adler32":223,"./crc32":225,"./inffast":228,"./inftrees":230}],230:[function(e,t,r){"use strict";var n=e("../utils/common"),i=15,o=852,a=592,u=0,l=1,s=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,p,_,g,b,y){var m,v,w,P,O,x,E,S,T,C=y.bits,M=0,j=0,R=0,D=0,k=0,A=0,I=0,F=0,B=0,U=0,L=null,N=0,V=new n.Buf16(i+1),z=new n.Buf16(i+1),G=null,X=0;for(M=0;M<=i;M++)V[M]=0;for(j=0;j<p;j++)V[t[r+j]]++;for(k=C,D=i;D>=1&&0===V[D];D--);if(k>D&&(k=D),0===D)return _[g++]=20971520,_[g++]=20971520,y.bits=1,0;for(R=1;R<D&&0===V[R];R++);for(k<R&&(k=R),F=1,M=1;M<=i;M++)if(F<<=1,F-=V[M],F<0)return-1;if(F>0&&(e===u||1!==D))return-1;for(z[1]=0,M=1;M<i;M++)z[M+1]=z[M]+V[M];for(j=0;j<p;j++)0!==t[r+j]&&(b[z[t[r+j]]++]=j);if(e===u?(L=G=b,x=19):e===l?(L=c,N-=257,G=f,X-=257,x=256):(L=d,G=h,x=-1),U=0,j=0,M=R,O=g,A=k,I=0,w=-1,B=1<<k,P=B-1,e===l&&B>o||e===s&&B>a)return 1;for(var H=0;;){H++,E=M-I,b[j]<x?(S=0,T=b[j]):b[j]>x?(S=G[X+b[j]],T=L[N+b[j]]):(S=96,T=0),m=1<<M-I,v=1<<A,R=v;do v-=m,_[O+(U>>I)+v]=E<<24|S<<16|T|0;while(0!==v);for(m=1<<M-1;U&m;)m>>=1;if(0!==m?(U&=m-1,U+=m):U=0,j++,0===--V[M]){if(M===D)break;M=t[r+b[j]]}if(M>k&&(U&P)!==w){for(0===I&&(I=k),O+=R,A=M-I,F=1<<A;A+I<D&&(F-=V[A+I],!(F<=0));)A++,F<<=1;if(B+=1<<A,e===l&&B>o||e===s&&B>a)return 1;w=U&P,_[w]=k<<24|A<<16|O-g|0}}return 0!==U&&(_[O+U]=M-I<<24|64<<16|0),y.bits=k,0}},{"../utils/common":221}],231:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],232:[function(e,t,r){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?le[e]:le[256+(e>>>7)]}function u(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,r){e.bi_valid>q-r?(e.bi_buf|=t<<e.bi_valid&65535,u(e,e.bi_buf),e.bi_buf=t>>q-e.bi_valid,e.bi_valid+=r-q):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function s(e,t,r){l(e,r[2*t],r[2*t+1])}function c(e,t){var r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1}function f(e){16===e.bi_valid?(u(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var r,n,i,o,a,u,l=t.dyn_tree,s=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,_=0;for(o=0;o<=W;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<Y;r++)n=e.heap[r],o=l[2*l[2*n+1]+1]+1,o>p&&(o=p,_++),l[2*n+1]=o,n>s||(e.bl_count[o]++,a=0,n>=h&&(a=d[n-h]),u=l[2*n],e.opt_len+=u*(o+a),f&&(e.static_len+=u*(c[2*n+1]+a)));if(0!==_){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,_-=2}while(_>0);for(o=p;0!==o;o--)for(n=e.bl_count[o];0!==n;)i=e.heap[--r],i>s||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}function h(e,t,r){var n,i,o=new Array(W+1),a=0;for(n=1;n<=W;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var u=e[2*i+1];0!==u&&(e[2*i]=c(o[u]++,u))}}function p(){var e,t,r,n,o,a=new Array(W+1);for(r=0,n=0;n<z-1;n++)for(ce[n]=r,e=0;e<1<<te[n];e++)se[r++]=n;for(se[r-1]=n,o=0,n=0;n<16;n++)for(fe[n]=o,e=0;e<1<<re[n];e++)le[o++]=n;for(o>>=7;n<H;n++)for(fe[n]=o<<7,e=0;e<1<<re[n]-7;e++)le[256+o++]=n;for(t=0;t<=W;t++)a[t]=0;for(e=0;e<=143;)ae[2*e+1]=8,e++,a[8]++;for(;e<=255;)ae[2*e+1]=9,e++,a[9]++;for(;e<=279;)ae[2*e+1]=7,e++,a[7]++;for(;e<=287;)ae[2*e+1]=8,e++,a[8]++;for(h(ae,X+1,a),e=0;e<H;e++)ue[2*e+1]=5,ue[2*e]=c(e,5);de=new i(ae,te,G+1,X,W),he=new i(ue,re,0,H,W),pe=new i(new Array(0),ne,0,$,Z)}function _(e){var t;for(t=0;t<X;t++)e.dyn_ltree[2*t]=0;for(t=0;t<H;t++)e.dyn_dtree[2*t]=0;for(t=0;t<$;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*K]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){e.bi_valid>8?u(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function b(e,t,r,n){g(e),n&&(u(e,r),u(e,~r)),D.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function y(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function m(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function v(e,t,r){var n,i,o,u,c=0;if(0!==e.last_lit)do n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===n?s(e,i,t):(o=se[i],s(e,o+G+1,t),u=te[o],0!==u&&(i-=ce[o],l(e,i,u)),n--,o=a(n),s(e,o,r),u=re[o],0!==u&&(n-=fe[o],l(e,n,u)));while(c<e.last_lit);s(e,K,t)}function w(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,u=t.stat_desc.has_stree,l=t.stat_desc.elems,s=-1;for(e.heap_len=0,e.heap_max=Y,r=0;r<l;r++)0!==o[2*r]?(e.heap[++e.heap_len]=s=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=s<2?++s:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,u&&(e.static_len-=a[2*i+1]);for(t.max_code=s,r=e.heap_len>>1;r>=1;r--)m(e,o,r);i=l;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,m(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),h(o,s,e.bl_count)}function P(e,t,r){var n,i,o=-1,a=t[1],u=0,l=7,s=4;for(0===a&&(l=138,s=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++u<l&&i===a||(u<s?e.bl_tree[2*i]+=u:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*Q]++):u<=10?e.bl_tree[2*J]++:e.bl_tree[2*ee]++,u=0,o=i,0===a?(l=138,s=3):i===a?(l=6,s=3):(l=7,s=4))}function O(e,t,r){var n,i,o=-1,a=t[1],u=0,c=7,f=4;for(0===a&&(c=138,f=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++u<c&&i===a)){if(u<f){do s(e,i,e.bl_tree);while(0!==--u)}else 0!==i?(i!==o&&(s(e,i,e.bl_tree),u--),s(e,Q,e.bl_tree),l(e,u-3,2)):u<=10?(s(e,J,e.bl_tree),l(e,u-3,3)):(s(e,ee,e.bl_tree),l(e,u-11,7));u=0,o=i,0===a?(c=138,f=3):i===a?(c=6,f=3):(c=7,f=4)}}function x(e){var t;for(P(e,e.dyn_ltree,e.l_desc.max_code),P(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=$-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function E(e,t,r,n){var i;for(l(e,t-257,5),l(e,r-1,5),l(e,n-4,4),i=0;i<n;i++)l(e,e.bl_tree[2*ie[i]+1],3);O(e,e.dyn_ltree,t-1),O(e,e.dyn_dtree,r-1)}function S(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return A;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return I;for(t=32;t<G;t++)if(0!==e.dyn_ltree[2*t])return I;return A}function T(e){_e||(p(),_e=!0),e.l_desc=new o(e.dyn_ltree,de),e.d_desc=new o(e.dyn_dtree,he),e.bl_desc=new o(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,_(e)}function C(e,t,r,n){l(e,(B<<1)+(n?1:0),3),b(e,t,r,!0)}function M(e){l(e,U<<1,3),s(e,K,ae),f(e)}function j(e,t,r,n){var i,o,a=0;e.level>0?(e.strm.data_type===F&&(e.strm.data_type=S(e)),w(e,e.l_desc),w(e,e.d_desc),a=x(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?C(e,t,r,n):e.strategy===k||o===i?(l(e,(U<<1)+(n?1:0),3),v(e,ae,ue)):(l(e,(L<<1)+(n?1:0),3),E(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),v(e,e.dyn_ltree,e.dyn_dtree)),_(e),n&&g(e)}function R(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(se[r]+G+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var D=e("../utils/common"),k=4,A=0,I=1,F=2,B=0,U=1,L=2,N=3,V=258,z=29,G=256,X=G+1+z,H=30,$=19,Y=2*X+1,W=15,q=16,Z=7,K=256,Q=16,J=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],re=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=512,ae=new Array(2*(X+2));n(ae);var ue=new Array(2*H);n(ue);var le=new Array(oe);n(le);var se=new Array(V-N+1);n(se);var ce=new Array(z);n(ce);var fe=new Array(H);n(fe);var de,he,pe,_e=!1;r._tr_init=T,r._tr_stored_block=C,r._tr_flush_block=j,r._tr_tally=R,r._tr_align=M},{"../utils/common":221}],233:[function(e,t,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},{}],234:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?void(this.code=e):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),a=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||indexOf(o,t)===-1)&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},{indexof:216}]},{},[176]);
//# sourceMappingURL=Bulletproof-browser.min.js.map
